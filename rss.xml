<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[율로그]]></title><description><![CDATA[백엔드 개발자 율 블로그]]></description><link>https://gb-template.netlify.com</link><image><url>https://gb-template.netlify.com/logos/logo-512x512.png</url><title>율로그</title><link>https://gb-template.netlify.com</link></image><generator>Gatsby Blog Template</generator><lastBuildDate>Sat, 30 Dec 2023 11:16:52 GMT</lastBuildDate><atom:link href="https://gb-template.netlify.com/rss.xml" rel="self" type="application/rss+xml"/><copyright><![CDATA[©Yul, Built with Gatsby-blog-template]]></copyright><item><title><![CDATA[Mysql Lock 에 대해서]]></title><description><![CDATA[실무나 이론적인 공부를 하다보면 락에 대한 얘기는 끊임없이 나오는 것 같다. 공부를 해보자 공부하기전 선수 개념 트랜잭션 : 데이터베이스에서 실행되는 하나의 논리적 작업 단위이다. 예를 들어, 은행 계좌 이체 작업은 하나의 트랜잭션이다. ACID 원자성(Atomicity…]]></description><link>https://gb-template.netlify.com/databaselock20231020/</link><guid isPermaLink="false">https://gb-template.netlify.com/databaselock20231020/</guid><category><![CDATA[mysql]]></category><pubDate>Sat, 30 Dec 2023 11:31:00 GMT</pubDate><content:encoded>&lt;p&gt;실무나 이론적인 공부를 하다보면 락에 대한 얘기는 끊임없이 나오는 것 같다. 공부를 해보자&lt;/p&gt;
&lt;h2 id=&quot;공부하기전-선수-개념&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B3%B5%EB%B6%80%ED%95%98%EA%B8%B0%EC%A0%84-%EC%84%A0%EC%88%98-%EA%B0%9C%EB%85%90&quot; aria-label=&quot;공부하기전 선수 개념 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;공부하기전 선수 개념&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;트랜잭션&lt;/strong&gt; : 데이터베이스에서 실행되는 하나의 논리적 작업 단위이다. 예를 들어, 은행 계좌 이체 작업은 하나의 트랜잭션이다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ACID&lt;/li&gt;
&lt;li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;원자성(Atomicity)&lt;/strong&gt;: 트랜잭션 내의 모든 작업은 완전히 수행되거나 전혀 수행되지 않아야 한다.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;&lt;strong&gt;일관성(Consistency)&lt;/strong&gt;: 트랜잭션은 데이터베이스의 일관된 상태를 유지해야한다.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;&lt;strong&gt;격리성(Isolation)&lt;/strong&gt;: 개별 트랜잭션은 동시에 실행되는 다른 트랜잭션으로부터 독립적이어야한다.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ol start=&quot;4&quot;&gt;
&lt;li&gt;&lt;strong&gt;지속성(Durability)&lt;/strong&gt;: 트랜잭션이 완료되면 그 결과는 시스템 장애가 발생해도 영구적으로 유지된다.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 66.06060606060606%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACSUlEQVQ4y4WTTW/TQBCG84s5IIEEEkg90Eogql44cEI9AAc+JGghkJBAEf0gKDRpafqR1Otdr+3YSZM2aarS1n7QrhPUAxWHVzuatZ55Z3acS0cD0oM2aS/6r5JexPlBFtPPlE5yhjHsk0sHPYg96PikV2hyR9eHw8DGw1BzHGp7x1EAHU3Sj8dA82GvnV0eBND9t0Ztn/llydRHwXRRMF0QNn6+JjmLTLEOOWMT7ZDKFhfdkEHg8zvyOWlnGoY+p1Hm7GFJML8is6ITdQMeLbk8/ipg1CWXngygUSOprHDai9naVTT3NfVdj31Hs7HrEUht27r93uFOXvCyIsmvK/I/lY1vLDrMFBw4HgPTRg2aDY7jNr7UeK62pxQaNY6N05miYHXLo7rtWZiRKVyqK2ZLAoYGODIO6yStbYZxm1BqhNBINwO6QuM4mr7vM/VBcHPR4VVF8qmmKNYULyqSa28c7hcvOWSzSuK7HIYhwtG21da+tq1Hns5m1Qu4VxB8b3h2DAZo1Gh6lOvKzjcDjo5IdzbB3WMQhbY9AzFtG6eB0pzFvgXezQtuvXN4tiZZrCoWqoqnq5Lrby87PB2RrizBt88E7Q61bcVOK3uU9Z3MjZmjeWWzJoWasrmlDcWXDcVW0+P1D8lceeLQ7GHkjZc44CL2OY/9v6eRWSPj0Dg2DzNXdnmynGm27PKg5BJKD446Y6CB2eX1r1zqpJNBzTxDpdnc8/i152UztnmfpG+BfYi1BRqHV/5+Y2g6AffH6pl8QGIYh13+AFb+sz+TykMFAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;rock2&quot; title=&quot;rock2&quot; src=&quot;/static/b2692c4201210a9665bb876d7e193e77/7c811/rock2.png&quot; srcset=&quot;/static/b2692c4201210a9665bb876d7e193e77/103f2/rock2.png 165w,
/static/b2692c4201210a9665bb876d7e193e77/748ba/rock2.png 330w,
/static/b2692c4201210a9665bb876d7e193e77/7c811/rock2.png 660w,
/static/b2692c4201210a9665bb876d7e193e77/0ea77/rock2.png 682w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;&lt;strong&gt;커밋&lt;/strong&gt; : 트랜잭션의 모든 작업이 성공적으로 완료되었음을 데이터베이스에 알리는 과정이다. 커밋을 통해 변경 사항이 데이터베이스에 영구적으로 저장한다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;트랜잭션을 &lt;strong&gt;‘커밋’&lt;/strong&gt; 하여 변경사항을 데이터베이스에 반영한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;세션&lt;/strong&gt; : client ( application 서버 ) 하고 db 하고 연결되어 있는 전체적인 시간이다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;연결 풀을 사용하는 경우, 여러 I/O 작업이 같은 세션을 재사용한다.&lt;/li&gt;
&lt;li&gt;연결 풀을 사용하지 않는 경우, 각 I/O 작업마다 새로운 세션을 생성한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;락이란&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%9D%BD%EC%9D%B4%EB%9E%80&quot; aria-label=&quot;락이란 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;락이란?&lt;/h2&gt;
&lt;p&gt;DB 는 여러 사용자들이 같은 데이터를 동시에 접근하는 상황에서 세션이 &lt;strong&gt;트랜잭션을 시작&lt;/strong&gt;하고 데이터를 수정하는 동안에는 &lt;strong&gt;커밋이나 롤백 전까지 다른 세션에서 해당 데이터를 수정 할 수 없게 해야한다&lt;/strong&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Lock “잠금”&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;락-종류&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%9D%BD-%EC%A2%85%EB%A5%98&quot; aria-label=&quot;락 종류 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;락 종류&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;공유 락 ( Shared Lock )&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;데이터를 조회할 때 사용된다. Read Lock 이라고도 불리고 Shared 의 앞글자를 따서 주로 S락이라고 하기도 함.&lt;/li&gt;
&lt;li&gt;여러 사용자가 같은 데이터를 동시에 볼 수 있지만 그 다른 사람이 1명이라도 보고 있으면 변경이 불가능하다.&lt;/li&gt;
&lt;/ul&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 45.45454545454545%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABDklEQVQoz42SUWuDMBSF/f8/qU9j0NGn6miRQSmFilGXiFUTk3QmZyQQl3ZsKBzuIXg/7/EmmecZxhi46mStBeccQgjvl3NjF8XvBx9q4kxQDGyaxp8FqP7SmPQEdVf46ZkR9zslMSx4pRSklOi6DowyCM1xKDPk1RFH8o52pIDFQ88C/C+yEx84bqJDSlLsixR7kqEeqgdgDE6evxCAVV2D0k8ofUfJCA4fO+TZG075DuxWrZ/Q+WmafOR+GNAVBJfijHS7Qbl9xfVlg7YtHQ/Pvb+WEiZ0Ufu+B2UM9HyBFBxsbFC1VzQdgdTSb3s2K//hOI5+IeEx1vqIrvhq7LprEyYMkeN76KaJIX/pG0XrvKQ7kVsTAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;rock3&quot; title=&quot;rock3&quot; src=&quot;/static/3a0f6b0ca6a471f7dc950e15bb9055a2/7c811/rock3.png&quot; srcset=&quot;/static/3a0f6b0ca6a471f7dc950e15bb9055a2/103f2/rock3.png 165w,
/static/3a0f6b0ca6a471f7dc950e15bb9055a2/748ba/rock3.png 330w,
/static/3a0f6b0ca6a471f7dc950e15bb9055a2/7c811/rock3.png 660w,
/static/3a0f6b0ca6a471f7dc950e15bb9055a2/00706/rock3.png 862w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;&lt;strong&gt;베타 락 ( Exclusive Lock )&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;데이터를 변경할 때 사용된다. Write Lock 이라고도 불리고 X로 표기한다.&lt;/li&gt;
&lt;li&gt;아예 베타락이 걸려있으면 Select 하는 세션이라든지 Insert 하는 세션이라든지 데이터에 접근할 수 없다.&lt;/li&gt;
&lt;/ul&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 47.878787878787875%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABOUlEQVQoz42S607CQBCF+/7P5A9iNGIiRUQlAUukLZGUrtv7Zbuzx8xitRCDbHLS2Wnmy5mdcbTWICLw1xiDoihQ17WNh/+sSP/k+nwf93KGRXySJIEQwsYwBqQJMIAhY8XxL5D+BvbiRFVViIVAlmUoyhLaELYygLdfWYXSR6e7I4fDeue0ZQZy3CgFf/mGJNrheTfHY+BiFk4xC100qrZu/22ZgWmaYh9FiOUnhB/iY7WEl64xeZ/A9adYRK9oVHM5MM9z+4YFt770EHgrTKbX2IxvEIyuEM7vUZ1zOLwwkCeslLJQKQTSIsPTyx3W7i288QibxQOarj3vsBcDeRhSSsRxjLIsYYjQUoukTZGqHFXXgAY1p0N1hjvFh9+QoYetObhgKAjA9+qcujrrkF3xpI8W+kIx8AviJwkjjWVnKAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;rock5&quot; title=&quot;rock5&quot; src=&quot;/static/358c848e3dd76c8592d024992bec3459/7c811/rock5.png&quot; srcset=&quot;/static/358c848e3dd76c8592d024992bec3459/103f2/rock5.png 165w,
/static/358c848e3dd76c8592d024992bec3459/748ba/rock5.png 330w,
/static/358c848e3dd76c8592d024992bec3459/7c811/rock5.png 660w,
/static/358c848e3dd76c8592d024992bec3459/a0e79/rock5.png 824w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;&lt;strong&gt;비관적 락 ( Pessimistic Lock )&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;하나의 트랜잭션이 데이터를 읽는 시점에서 락을 걸고 조회 또는 갱신 처리가 완료 될 때까지 그 Lock 이 유지된다. 조회 때 락 잠금을 획득하는 방법은 대표적으로 Select .. For Update 이다. 즉, 조회할 때! Lock을 가져간다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;여기서 잠깐 ? 베타 락과 비관적 락의 차이점을 모르겠다. &lt;br&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;배타 락은 데이터에 대한 독점적인 접근 권한을 부여하는 특정한 락 유형이다.&lt;/li&gt;
&lt;li&gt;비관적 락은 데이터베이스 충돌이 발생할 것을 가정하고, 이를 방지하기 위해 트랜잭션 동안 지속적으로 락을 설정하는 전략이다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;락-시나리오&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%9D%BD-%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4&quot; aria-label=&quot;락 시나리오 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;락 시나리오&lt;/h2&gt;
&lt;p&gt;각 세션들의 트랜잭션에서 같은 데이터를 접근하려고 했을 때, 그 데이터에 하나의 트랜잭션이 S 락을 요청하고 다른 하나의 트랜잭션도 S 락을 요청했을 때는 블로킹이 안됨&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;S락과 S락은 블로킹 안됨&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;다만, 각 트랜잭션에서 하나의 데이터에 S 락이 있고 X 락을 요청할 때, 블로킹이됨. X 락이 있는 데이터에도 똑같이 X락을 걸 수 가 없음.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;S락과 X락은 블로킹이 됨&lt;/li&gt;
&lt;li&gt;X락과 X락도 블로킹이 됨&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;블로킹에서 더 나아가 양쪽 트랜잭션이 모두 영원히 처리가 되지않은 상태가 될 때, 예를 들어 하나의 트랜잭션은 A 에 대해서 S락을 획득하고 Sleep. 또 다른 트랜잭션은 해당 데이터에 X 락을 걸려고 하면 계속 기다려야한다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Dead Lock “교착상태”&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;락-범위&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%9D%BD-%EB%B2%94%EC%9C%84&quot; aria-label=&quot;락 범위 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;락 범위&lt;/h2&gt;
&lt;p&gt;어떠한 데이터에 트랜잭션이 실행했을 때, 접근제한의 범위는 어디까지 일까?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;데이터베이스&lt;/strong&gt; : DB 의 소프트웨어 버전을 업그레드 하거나 DB 업데이트를 진행할 경우&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;파일&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;테이블&lt;/strong&gt; : DDL ( create, alter, drop ) 할 때 주로 쓰며 DDL Lock 이라고 한다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;페이지와 블럭&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;컬럼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;행&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;해결-방법&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95&quot; aria-label=&quot;해결 방법 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;해결 방법&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;각각의 트랜잭션이 빠르게 실행되도록 해야한다.&lt;/li&gt;
&lt;li&gt;그래야 그 데이터간의 락 Race Condition 이 생기지 않음&lt;/li&gt;
&lt;li&gt;동시에 접근을 안하게 하는게 좋음&lt;/li&gt;
&lt;li&gt;대용량 → 작업 단위를 쪼개거나 Lock Time out 을 설정&lt;/li&gt;
&lt;/ul&gt;</content:encoded><author>a_l_b_bloomer@naver.com</author></item><item><title><![CDATA[데이터 파이프라인 kafka streams 적용하기]]></title><description><![CDATA[줌인터넷에서 가장 흥미로운 프로젝트를 맡아서 진행했다. 바로 줌투자 & 인베스팅뷰 의 모든 데이터를 적재할 수 있는 데이터파이프라인을 구축하는 프로젝트다. 2023년 1월 25일, 기존 파이프라인에서 차세대 파이프라인을 구축 완료 및 배포를 하였고 운영을 하면서 10월 중순 경에 Polling 서비스에서 WebSocket…]]></description><link>https://gb-template.netlify.com/kafkastreams20231202/</link><guid isPermaLink="false">https://gb-template.netlify.com/kafkastreams20231202/</guid><category><![CDATA[kafka streams]]></category><category><![CDATA[kafka]]></category><pubDate>Sat, 02 Dec 2023 08:31:00 GMT</pubDate><content:encoded>&lt;p&gt;줌인터넷에서 가장 흥미로운 프로젝트를 맡아서 진행했다. 바로 줌투자 &amp;#x26; 인베스팅뷰 의 모든 데이터를 적재할 수 있는 데이터파이프라인을 구축하는 프로젝트다. 2023년 1월 25일, 기존 파이프라인에서 차세대 파이프라인을 구축 완료 및 배포를 하였고 운영을 하면서 10월 중순 경에 Polling 서비스에서 WebSocket 서비스로 전환하는 프로젝트를 맡아서 진행했다.&lt;/p&gt;
&lt;h2 id=&quot;적용하기전-전체적인-아키텍처&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0%EC%A0%84-%EC%A0%84%EC%B2%B4%EC%A0%81%EC%9D%B8-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98&quot; aria-label=&quot;적용하기전 전체적인 아키텍처 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;적용하기전 전체적인 아키텍처&lt;/h2&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 36.96969696969697%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+ElEQVQoz5WQy04DMQxF5/9/CtQ127IqLNqKBR2ReWScZJzkIKcMKoUNkW6UxPaJr7taK6ZSCqpKLpXsPel5j/Y9FailsOXda1sbo5vnmXEcERG890iMSH/B7R4J5xNrrS0WQiDGyLquyLLg57m9T9PUlFJiWRY6S7LklihCUiU5h9s9IKcjWitBpMViSs3FOHmsEau1Zuxs9Q14a7lZA7II6+sLOrh2pxbbrhZrxQ0TIcRvqz8s2/ZLFjRw+6ywhMzbh+JDbmDr0lxtkFv9DfxSzgYovI/K00E495GsNqvrvA38T2BpQOeV/VG4DImsa5udyT68B34CCL0jgGb26AkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;kafkastreams1&quot; title=&quot;kafkastreams1&quot; src=&quot;/static/5a0847d0d82f37ea3c0953ff37d69e55/7c811/kafkastreams1.png&quot; srcset=&quot;/static/5a0847d0d82f37ea3c0953ff37d69e55/103f2/kafkastreams1.png 165w,
/static/5a0847d0d82f37ea3c0953ff37d69e55/748ba/kafkastreams1.png 330w,
/static/5a0847d0d82f37ea3c0953ff37d69e55/7c811/kafkastreams1.png 660w,
/static/5a0847d0d82f37ea3c0953ff37d69e55/d28e0/kafkastreams1.png 990w,
/static/5a0847d0d82f37ea3c0953ff37d69e55/bb51b/kafkastreams1.png 1320w,
/static/5a0847d0d82f37ea3c0953ff37d69e55/3cde6/kafkastreams1.png 2014w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;금융 데이터를 제공해주는 증권 유관기관으로 부터 데이터를 받고  SpringIntegartion 프레임워크를 이용하여 데이터 가공하고 카프카에 Publish 를 하였다.&lt;/p&gt;
&lt;p&gt;가공된 데이터는 해당 Topic 에 따라 카프카 클러스터에 데이터를 보내 Load 모듈에서 데이터를 Consume 하였다.  데이터는 Redis 에 적재가 되고 적재된 데이터는 서비스 어플리케이션 서버(줌투자 &amp;#x26; 인베스팅뷰) 에서 key 설계에 맞게 데이터를 뽑아내서 서비스 운영중에 있다.&lt;/p&gt;
&lt;h2 id=&quot;왜-polling-의-방식에서-websocket-방식으로-전환하였는가-&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%99%9C-polling-%EC%9D%98-%EB%B0%A9%EC%8B%9D%EC%97%90%EC%84%9C-websocket-%EB%B0%A9%EC%8B%9D%EC%9C%BC%EB%A1%9C-%EC%A0%84%ED%99%98%ED%95%98%EC%98%80%EB%8A%94%EA%B0%80-&quot; aria-label=&quot;왜 polling 의 방식에서 websocket 방식으로 전환하였는가  permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;왜, Polling 의 방식에서 WebSocket 방식으로 전환하였는가 ?&lt;/h2&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 53.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcUlEQVQoz3WTi26jMBBF8/8/WCkSSbaQSMHBmPj9vKuZlHYhXaQR2BzfuWOPD6010GOMQdd1WMf0rrVy0Pc6f7vdcDwekVL6lTs450ChtcY4jrDW8jiE8A3lnOG953mlFOZ5fuPWONBPIUZ2GGPC4zFBCMHjUgoLxhhZiBIao5mTUmIcBRtZORYMweP5tPA+IUbPQdmppNUhLfjh4q/ct8NaC5aFHDT0/Yx5zryInn/35sUFLEvDMCgoRVzYcCxI2Z0L0LpBiILLJUMpArebXUqGtRFPDdzHjPM5YdlxLNhaQd9HXK8ZHx8djHHIOW5Or1Y65YL7VUOOBsNwQ8gZKe25L4d0Us41SFlxPlcube8wl4LoDLySGP9cMJ06OK3fS6414373mKaKvpeYZ2oPv+2vWlFqxVM84B8UAup0gl3U//eQHFGppSR2/CbYGuTnJ8x1gJ8mBK25D99Kft2AtrkRe2htHW8tXvcF7HifmAT/AjN7WbZGEXAnAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;kafkastreams2&quot; title=&quot;kafkastreams2&quot; src=&quot;/static/053fe910d719914334538f531cd49f5d/7c811/kafkastreams2.png&quot; srcset=&quot;/static/053fe910d719914334538f531cd49f5d/103f2/kafkastreams2.png 165w,
/static/053fe910d719914334538f531cd49f5d/748ba/kafkastreams2.png 330w,
/static/053fe910d719914334538f531cd49f5d/7c811/kafkastreams2.png 660w,
/static/053fe910d719914334538f531cd49f5d/d28e0/kafkastreams2.png 990w,
/static/053fe910d719914334538f531cd49f5d/bb51b/kafkastreams2.png 1320w,
/static/053fe910d719914334538f531cd49f5d/d2ccd/kafkastreams2.png 1744w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;항상 &apos;왜?&apos;라는 질문은 중요하고 동시에 어려운 과제라고 한다. 운영 중인 주식 서비스에서는 &lt;strong&gt;실시간 데이터 전송&lt;/strong&gt;과 &lt;strong&gt;최신 상태 유지&lt;/strong&gt;가 필수적이다. 이전에는 폴링 방식을 사용하여, 예를 들어 인베스팅뷰 서비스의 경우 10초마다 클라이언트가 서버에 데이터를 요청을 했다.&lt;/p&gt;
&lt;p&gt;하지만 이런 폴링 방식에는 한계가 있었고 단순히 데이터를 보여주는 서비스라 할지라도, 사용자 경험 개선을 위한 노력이 필요했다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;서버 부하와 스레드 한계&lt;/strong&gt;: 폴링 방식은 클라이언트가 서버에 연결할 때마다 새로운 커넥션을 맺어야 하므로 서버에 부담을 줄 수 있다. 특히, 톰캣 같은 서버에서는 동시에 처리할 수 있는 스레드 수에 한계가 있어, 많은 요청이 동시에 이루어질 때 성능 문제가 발생할 수 있다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;실시간 성 저하&lt;/strong&gt;: 폴링 방식은 데이터 연결이 끊어졌다 재연결되는 과정에서 실시간 시세의 지연이 발생할 수 있다. 이는 주식 서비스에서 실시간 정보의 중요성을 고려했을 때, 큰 단점으로 작용할 수 있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;반면, 웹소켓 방식은 이러한 문제를 상당 부분 해결할 수 있다. 한 번의 커넥션으로 데이터가 실시간으로 전송되기 때문에 서버 부하를 줄이고 사용자 경험을 개선할 수 있다. 폴링 방식과 비교했을 때, 데이터 전송의 지연이 현저히 줄어들며 이는 주식 서비스에서 빠른 반응 속도와 신뢰성을 제공하는 데 큰 이점을 가져다준다.&lt;/p&gt;
&lt;p&gt;결국, 웹소켓을 사용하는 것은 클라이언트와 서버 간의 효율적인 성능 향상을 가능하게 하며 서비스를 이용하는 사용자들에게 보다 좋은 경험을 제공한다.&lt;/p&gt;
&lt;h2 id=&quot;체결할-때마다-들어오는-데이터를-다-받아낼-수-있었나&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%B2%B4%EA%B2%B0%ED%95%A0-%EB%95%8C%EB%A7%88%EB%8B%A4-%EB%93%A4%EC%96%B4%EC%98%A4%EB%8A%94-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-%EB%8B%A4-%EB%B0%9B%EC%95%84%EB%82%BC-%EC%88%98-%EC%9E%88%EC%97%88%EB%82%98&quot; aria-label=&quot;체결할 때마다 들어오는 데이터를 다 받아낼 수 있었나 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;체결할 때마다 들어오는 데이터를 다 받아낼 수 있었나?&lt;/h2&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 38.18181818181819%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABM0lEQVQoz22S207jMBBA+/9fBvuwPAHarmhVQdKExCnx3Ymds7LbLikw0njGY+nMzZuUEmvN4pzH+VD8lOL/tyUlJjkSnCv3EMI5vixFY4xsspMln0uKmABKnQiygxhZS5ojx4ffiLpit99jtC7QzMjgAvTeY63Fe4dRluYw0AwHhuMB1XQILWjGmlY2VF2FlArjPU3bYoxhnufbCjNwHEe01lhnsc0r/eEv/VBzrAe29TO/9vfc7+7YdS+ojxH99ppnUQBX2A1wmiayXdJM9B2iP9ELiR09UwrooDBB4yZH17a8Pz3SVhWmdOYLSClV2t+sM5QsKSFMjwmRdImdB3yeY4b0pxN/ttvPzqxFCFHgm69bXi5bY7mN3+hlWdcNZ5FS4pz7DvxJr9Wv72t7/W7Z/gPXom6Z0eA84AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;kafkastreams3&quot; title=&quot;kafkastreams3&quot; src=&quot;/static/a85d9b220962b0d1278016437b458795/7c811/kafkastreams3.png&quot; srcset=&quot;/static/a85d9b220962b0d1278016437b458795/103f2/kafkastreams3.png 165w,
/static/a85d9b220962b0d1278016437b458795/748ba/kafkastreams3.png 330w,
/static/a85d9b220962b0d1278016437b458795/7c811/kafkastreams3.png 660w,
/static/a85d9b220962b0d1278016437b458795/d28e0/kafkastreams3.png 990w,
/static/a85d9b220962b0d1278016437b458795/bb51b/kafkastreams3.png 1320w,
/static/a85d9b220962b0d1278016437b458795/38f13/kafkastreams3.png 1843w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;1초에 많으면 900개 정도의 종목에 대한 체결 데이터. 적으면 600개 정도의 데이터가 쏟아져 나오기 때문에 문제가 있었다. redis pub/sub 을 이용하여 데이터를 보낼 때, 서버측에서는 웹소켓 어플리케이션 서버에서도 부하가 있었고 만약, 서버에서 부하를 견뎌냈다고 해도 클라이언트에서도 1초에 900개 정도의 데이터를 받아내기에는 문제가 있었다.&lt;/p&gt;
&lt;p&gt;‘ &lt;strong&gt;어떻게 이 부하를 해결할 수 있을까?&lt;/strong&gt; ‘&lt;/p&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 33.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABAUlEQVQoz21R2XLEIAzj/7+yTac7ba5NAgF8EO2YXG2nDx5kCwvZuFIKtq1AVaFlw7ZtsJpqQTnwv6G6x5+6UxVkLlj8BIkeIgUhJuQwQUV+XdZDwAyknCGq1UA1c3DOwNzO6L/fsAwtwnNF9/WJqfsARwIxoWkahBAuYROZ5oDswyUox+NO7eU04dk+MIwekgN8/0Dfj0iRYRN478HMtdEEiATL0GFs3y8hO41zzAJmwhwXxCwQYSxpgY8EplvEzlPUmm3HiTNYuOYn51KKyLYPERDlOpqRJryuK2KMNbc7homohmGrGZdyqn2Wu597Oa2f+bns++d3bLG7vDkTtpFfPB8kdBQHB8cAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;kafkastreams4&quot; title=&quot;kafkastreams4&quot; src=&quot;/static/1d0dd46616cd1426111d72044eb9108c/7c811/kafkastreams4.png&quot; srcset=&quot;/static/1d0dd46616cd1426111d72044eb9108c/103f2/kafkastreams4.png 165w,
/static/1d0dd46616cd1426111d72044eb9108c/748ba/kafkastreams4.png 330w,
/static/1d0dd46616cd1426111d72044eb9108c/7c811/kafkastreams4.png 660w,
/static/1d0dd46616cd1426111d72044eb9108c/d28e0/kafkastreams4.png 990w,
/static/1d0dd46616cd1426111d72044eb9108c/bb51b/kafkastreams4.png 1320w,
/static/1d0dd46616cd1426111d72044eb9108c/bd833/kafkastreams4.png 1990w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;그래서 생각했다. 이 모든 데이터를 전부 보내줄 수는 없다. 기획자, 개발자와 커뮤니케이션을 통해 어느 정도의 데이터는 버려야했다.  ‘&lt;strong&gt;n초 안에 데이터 주기로 업데이트가 필요로하다&lt;/strong&gt;’. 이 n초는 우리는 2초로 결정하였다. 2초 동안의 데이터를 모아서 그 종목에 따른 최신의 데이터를 필요로 했다.&lt;/p&gt;
&lt;h2 id=&quot;왜-kafka-streams-를-이용하였는가-&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%99%9C-kafka-streams-%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%98%EC%98%80%EB%8A%94%EA%B0%80-&quot; aria-label=&quot;왜 kafka streams 를 이용하였는가  permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;왜, Kafka Streams 를 이용하였는가 ?&lt;/h2&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 46.06060606060606%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABf0lEQVQoz42Sz0vCcBjG/fc8CIKgFw+CB7sIguBVLxopaIdE8TKlg8tDE7KZicUmoZVEiTS7CHVZM/vhCIXc9sT3i1uGQj0w3ud99/L57tlm03UdRIPBAOl0GrIsw5RhGJY394g0TbP61R0i22KxoCYej8PpdIJlWSiKYoHJ/dlsZoFMvwlGgWSJqN/vw+PxoNPp0BoKhei8UCggkdgGx1URjUYRDodRq9VQr9etJzfBpNrMJpVMIRgMwu/3IxKJIJ/P03nrrInSPoNYLAaGYZDJ7CK5k0SxWFom0H4DiVFVFT6fD+VyGS6XCzzPQ5IkuvQ1B+Yq/pQJtSKLogiHw4FcLge73Y5AYIvOb85fcbj3iBYro80p6PJjtLlnXByROkbn+AX33Y9lfOMHWKlU4PV6IQgCstksWPaAzp8ePnF1MsGt8Ibh1RTXpxO0q2Pcie8Y9lT0mhNIl9N1IHn5brcbjUZjJQb+LSuyaQh4NBpt/M/Iycby0vX1nlTzo3wDRNCCNuSNdasAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;kafkastreams5&quot; title=&quot;kafkastreams5&quot; src=&quot;/static/06d2993d0b825a5631928eb0ad7c6f1c/7c811/kafkastreams5.png&quot; srcset=&quot;/static/06d2993d0b825a5631928eb0ad7c6f1c/103f2/kafkastreams5.png 165w,
/static/06d2993d0b825a5631928eb0ad7c6f1c/748ba/kafkastreams5.png 330w,
/static/06d2993d0b825a5631928eb0ad7c6f1c/7c811/kafkastreams5.png 660w,
/static/06d2993d0b825a5631928eb0ad7c6f1c/91652/kafkastreams5.png 694w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;Google의 Guava 라이브러리에 포함된 RateLimiter를 사용하여 Java로 직접 스루틀링을 구현할 수도 있었다.&lt;/p&gt;
&lt;p&gt;우선 이유 중에 가장 큰 것은 &lt;strong&gt;카프카 스트림즈의 윈도우 기능&lt;/strong&gt;이라고 할 수 있다. 또 다른 큰 이유는 &lt;strong&gt;카프카를 쓰고 있기 때문에&lt;/strong&gt; 라고 할 수 있다.  아파치 카프카에서 제공하는 라이브러리기 때문에 호환성과 개발 생산성에 이점이 가장 먼저 생각이 났다. 또한, 해당 라이브러리는 대용량의 스트리밍 데이터를 효과적으로 처리할 수 있기 때문에 매우 적합했다. 또한, 나름의 도전을 하고 싶었다. 카프카에 대한 욕심이 개인적으로도 있었기 때문이다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;위에 글에서도 썼지만 카프카와 카프카 스트림즈와의 호환이 잘되어있기에 다양한 기능이 제공된다.&lt;/li&gt;
&lt;li&gt;또한, 확장성에 이점이 있다. 카프카 스트림즈도 내부적으로 데이터를 받을 때 Consume 과 같은 동작이 있기에 스케일링에도 이점이 있다.&lt;/li&gt;
&lt;li&gt;직접 구현할 수 있지만 일정과 생산성으로 인해 더 유리하다고 생각했다.&lt;/li&gt;
&lt;li&gt;카프카 스트림즈의 윈도우 기능이 해결 과제에 매우 적합한 기능으로 보였다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;kafka-streams-어떻게-적용하였는가-&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#kafka-streams-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%A0%81%EC%9A%A9%ED%95%98%EC%98%80%EB%8A%94%EA%B0%80-&quot; aria-label=&quot;kafka streams 어떻게 적용하였는가  permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kafka Streams 어떻게 적용하였는가 ?&lt;/h2&gt;
&lt;p&gt;Kafka Streams 에 대해서 무지했기 때문에 데이터가 어떻게 흘러가는지에 대해서 먼저 리서치가 필요로 했다. 간단하게 데이터 흐름을 이론으로 알아보았다. 직접적으로는 코스콤에서 오는 데이터를 레디스에 있는 데이터에 끌어다써서 데이터가 직접 오는 것처럼 테스트가 구축되어 있기 때문에 해당 시스템을 통해 로컬 환경에서 데이터 보면서 확인을 하였다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;fun &lt;span class=&quot;token function&quot;&gt;kStream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;builder&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StreamsBuilder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;KStream&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    val stockTradingStream &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createStockTradingStream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;builder&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    val mappedStream &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mapToIsinStockCode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;stockTradingStream&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    val groupedStream &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; mappedStream&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;groupByKey&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Grouped&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Serdes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Serdes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;createWindowedTable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;groupedStream&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;transformValues&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;StockTradingSupplier&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;objectMapper&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; redisPublish&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;stock-trading-store&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; stockTradingStream
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;직접 구현한 코드를 순차적으로 간단히 설명하겠다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;createStockTradingStream 를 통해 주식 체결 데이터에 대한 스트림을 생성하는 과정&lt;/li&gt;
&lt;li&gt;mapToIsinStockCode 를 통해 주식 체결 데이터 스트림에서 각 메세지 Isin 종목 표준코드를 key 로 설계하여 KStream 을 생성하는 과정&lt;/li&gt;
&lt;li&gt;groupByKey 내장된 기능을 이용하여 KStream 에서 키별로 데이터를 그룹화하여 KGroupedStream 생성하는 과정&lt;/li&gt;
&lt;li&gt;createWindowedTable 은 Kafka Streams를 사용하여 시간 기반 윈도우를 적용한 KTable 을 생성하는 과정&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;이러한 일련의 과정들을 통해서 KTable 을 생성하고 그 저장된 데이터를 이용하여 redis에 주기적으로 publish 를 해준다. 이제는 이러한 일련의 과정들을 좀 더 상세히 설명을 해볼 차례이다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;‘createStockTradingStream 를 통해 주식 체결 데이터에 대한 스트림을 생성하는 과정’&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; fun &lt;span class=&quot;token function&quot;&gt;createStockTradingStream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;builder&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StreamsBuilder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;KStream&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; builder&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        stockTradingTopic&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Consumed&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Serdes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Serdes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;StreamsBuilder 를 사용하여 스트림 토폴로지를 구성한다. 토폴로지에 대한 이해가 안될 수 있는데 Kafka Streams In Action 에 나온 부분을 같이 보면,&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;‘전체 시스템의 부분을 배열하고 서로 연결하는 방법. 하나 이상의 프로세서를 실행해 데이터를 반환한다는 의미’&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;이해하기 어려울 수 있다. 간단하게 생각하면 데이터가 들어오면 그 데이터를 각각의 모듈 (노드) 를 거쳐가면서 데이터를 입맛에 맞게 가공 후, 최종적으로 데이터를 출력하는 과정. 이러한 과정들의 집합체라고 생각하면 이해하기 쉬울 것이라고 생각한다.&lt;/p&gt;
&lt;p&gt;이러한 토폴로지를 구성하기 위해선 데이터를 받고 그 데이터를 Stream 을 만들어야하는데 이 과정 속에서 Key와 Value 를 Serdes 를 이용하여 지정해준다. 예를 들어, 위와 같은 체결 데이터는 KStream&amp;#x3C;String, String&gt; 타입을 반환하는데 키와 값이 모두 문자열인 레코드 스트림을 의미한다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;‘mapToIsinStockCode 를 통해 주식 체결 데이터 스트림에서 각 메세지 Isin 종목 표준코드를 key 로 설계하여 KStream 을 생성하는 과정’&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; fun &lt;span class=&quot;token function&quot;&gt;mapToIsinStockCode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;stockTradingStream&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;KStream&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;KStream&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; stockTradingStream&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;map &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; _&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
        val parsedData&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StockTrading&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; objectMapper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;readValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StockTrading&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;java&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        val isinStockCode &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; parsedData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isinStockCode
        &lt;span class=&quot;token class-name&quot;&gt;KeyValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isinStockCode&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 설명으로 KStream은 &amp;#x3C;String, String&gt; 타입을 반환한다.  단순히 타입을 정의했을 뿐 키와 값에는 어떤 데이터를 넣을지는 정하지 않았기에 이 과정에서 정하는 과정이다. 객체 형태를 사용할 수 있도록 역직렬화하여 StockTrading 객체의 표준코드를 이용하여 키를 설계한다. 그리고 그 원본 그자체는 값으로 설계한다. 반환은 Kstream&amp;#x3C;String, String&gt; 타입으로 같다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;‘createWindowedTable 은 Kafka Streams를 사용하여 시간 기반 윈도우를 적용한 KTable 을 생성하는 과정’&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; fun &lt;span class=&quot;token function&quot;&gt;createWindowedTable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;groupedStream&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;KGroupedStream&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;KTable&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Windowed&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    val windowDuration &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Duration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ofSeconds&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;WINDOW_DURATION_SECONDS&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    val materialized&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Materialized&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WindowStore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Bytes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ByteArray&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Materialized&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;`as`&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WindowStore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Bytes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ByteArray&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;stock-trading-store&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;withKeySerde&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Serdes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;withValueSerde&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Serdes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;withRetention&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Duration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ofSeconds&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;WINDOW_RETENTION_SECONDS&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;withLoggingDisabled&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; groupedStream
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;windowedBy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;TimeWindows&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ofSizeWithNoGrace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;windowDuration&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; _&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; newValue &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; newValue &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; materialized&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Kafka Streams 를 쓴 가장 큰 이유다. 윈도우에 대한 기능이 있기 때문에 가장 적합했다. Duration.ofSeconds(WINDOW_DURATION_SECONDS)을 이용하여 윈도우의 지속 시간을 설정한다. 즉,&lt;/p&gt;
&lt;p&gt;해결 과제인 2초간의 데이터를 모아서 가장 최신의 데이터를 가지게끔 하는 그 2초의 시간이 이 시간이다. stock-trading-store 라는 이름으로 윈도우 데이터를 저장할 상태 저장소를 설계하였고 해당 데이터가 계속 누적이 되면 문제가 되므로 보존기간을 설계하였다. 이러한 스트림을 시간 기반 윈도우를 그룹화하여 reduce 를 이용하여 항상 최신 값만을 유지하도록 하였다.&lt;/p&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 63.63636363636363%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABg0lEQVQ4y4WT627CMAyF+/4PtZeYtB8g7cIAlZa2tGl6SS+ePiNHMMEWyYrjxMf2sZMsyyJICEFlmqa4P5N5nqNufoaTmMKl6SY4juMowzBEJ85t20rXdeqzrmtM4CkgQGbD0TmnO46Xy0XyPJeiKMR7r7LdbvX8EJCIC7Ks0Q4QQaxUsuz7Xs8EappGgXl3B8gDyut9LfM0qq0sS9nv95olTsfjUTabjZzPZ6mqSm11XSsNBEmsRJwxcFkVufjWaSZkgI07dEDSNFUbZwAtwwh42wBK9l2nl+jrukgYR5nnSbOwTPBhoROECqguuSXfHlpXATxlubx/fErjnGZ1OBwky7LIuTWNDNETsqJDPDSgr91OuZrCKK+7Rl7eSvk+d0pDmp6UPxsZfAxMm8KF1a/zFILUZaalQUPTBSncIM4PyhXZ0ajbMbtSc52KBMX4A5h9Gn18wFqUP6dcUQkVPfoId3MYZ5AG6Qxeh9u1bRwPm0WTfwF//xQCAMbPoFwL+Jf8AKei9U2cLaeEAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;kafkastreams6&quot; title=&quot;kafkastreams6&quot; src=&quot;/static/afff6bb92e94c5e1746765ec95feb51b/7c811/kafkastreams6.png&quot; srcset=&quot;/static/afff6bb92e94c5e1746765ec95feb51b/103f2/kafkastreams6.png 165w,
/static/afff6bb92e94c5e1746765ec95feb51b/748ba/kafkastreams6.png 330w,
/static/afff6bb92e94c5e1746765ec95feb51b/7c811/kafkastreams6.png 660w,
/static/afff6bb92e94c5e1746765ec95feb51b/d28e0/kafkastreams6.png 990w,
/static/afff6bb92e94c5e1746765ec95feb51b/bb51b/kafkastreams6.png 1320w,
/static/afff6bb92e94c5e1746765ec95feb51b/e1dbf/kafkastreams6.png 1631w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;이러한 일련의 과정들이 처음 접했을 때 매우 이해하기 힘들었다. 리서치를 해보고 책을 사서 읽어보았다. 앞서 터득한 지식은 시간이 흐르면 잊어먹고 또 다시 터득을 해야했으므로 그림을 그리면서 이해하려고 했고 위의 설계된 그림이 책읅 읽으면서 나름 설계한 나의 그림이며 흔적이다. 틀린 부분도 있을 수 있겠지만 이해에 도움이 되길 바란다.&lt;/p&gt;
&lt;h2 id=&quot;state-store에-저장된-ktable-은-어떻게-redis-에-pub-하는-건가-&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#state-store%EC%97%90-%EC%A0%80%EC%9E%A5%EB%90%9C-ktable-%EC%9D%80-%EC%96%B4%EB%96%BB%EA%B2%8C-redis-%EC%97%90-pub-%ED%95%98%EB%8A%94-%EA%B1%B4%EA%B0%80-&quot; aria-label=&quot;state store에 저장된 ktable 은 어떻게 redis 에 pub 하는 건가  permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;State Store에 저장된 KTable 은 어떻게 Redis 에 Pub 하는 건가 ?&lt;/h2&gt;
&lt;p&gt;설명하기 앞서 State Store 은 간단히 서버 로컬 저장소라고 생각하면 되고 위에서 만든 2초간의 집계된 데이터가 kTable 이며 즉, 윈도우라고 생각하면 된다. 위의 과정으로 로컬 저장소인 State Store 에 KTable 이 저장된다.&lt;/p&gt;
&lt;p&gt;위의 코드에서 ‘&lt;strong&gt;StockTradingSupplier&lt;/strong&gt;&apos; 를 설명을 하지 않았다. 이 부분이 저장된 KTable 즉, 윈도우를 Redis에 publish 하는 과정이 들어가있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;override fun &lt;span class=&quot;token function&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProcessorContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;stateStore &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getStateStore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;stock-trading-store&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; as &lt;span class=&quot;token class-name&quot;&gt;TimestampedWindowStore&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;schedule&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Duration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ofMillis&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;WINDOW_DURATION_SECONDS&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;PunctuationType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;WALL_CLOCK_TIME&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; _ &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
        val timeTo &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Instant&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        val timeFrom &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Instant&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ofEpochMilli&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;timeTo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toEpochMilli&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Duration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ofMillis&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5_000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toMillis&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; latestWindowEnd&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;stateStore&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;let &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; stateStore &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
            val iterator &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; stateStore&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;timeFrom&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; timeTo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            val recordList &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; mutableListOf&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;StockTradingRedisResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            iterator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;use &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;it&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hasNext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                   &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
                  
                   publish    

                   &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;recordList&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isNotEmpty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                  &lt;span class=&quot;token comment&quot;&gt;// logic&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Kafka Streams를 사용하여 처리한 데이터를 주기적으로 Redis에 Publish를 해야한다.  Kafka Streams의 기능 중, Processor API에 내장된 punctuate 를 사용하고, 윈도우 기반의 상태 저장소에서 데이터를 주기적으로 추출한 후 Redis를 이용하여 Publish를 한다.&lt;/p&gt;
&lt;p&gt;여기서 주기적으로 스케줄링하기 하기 위해 punctuate 를 썼는데 State Store 의 현재 시간에서 5초 전의 데이터들을 조회하였고 그 이전의 데이터는 무시하고 최신 윈도우의 데이터만을 추출했다. 밑에 그림을 보면 이해하기 쉽다.&lt;/p&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 56.96969696969697%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABu0lEQVQoz4WTC08bMRCE8/9/VaUWRKAqkAZUFVQoguRy8T38WNvne3zVGQpCJaql8cpreT2eHS8A9rXl98Mjd3d3hBBIKeV4COM4HsQixkjTarz3eJGMotgizhFDeM6/IASPcy5jmqaPCxpj6LrIvqpI44AVoSwrxgnGefpgaK0PM3QiqLJke35Odb5id3ON2a8RtSb4ltglvKthsExDZJpgJvG3wDAO7+Jipq/rmuriGHNxhH1YY4oj4v6EFFr6lDDFKe3jJ6a4ZeZszBvDnHjBW0FdoYslvlriqivazQl+f0aKmlljXX7HqwumpPJZa03WcBgGGmmonKKWin7oWVjnMLpGb5f4comoK1zxhaSOSaFh6BOiVtjdGWMsc8GmqUldwljDerPi5PaY1dMlsY8zQ6FtFO3mlKC+YtVPtk8/UOUNMdis4fV9w+Uvw67tSF1EqQqlFN4LIQUkOqSTzHhhrcOLxpVnSPGZttnw7daxuhe0i1mcxvXsmkDoxry21r7aZo7vNJw7Nt809IEhefo+EVOfmc36/c82/3S56zratmV+unWSTSvZvBYRyT/D+/Bi7PC8L3LQ2H8A/EVPokVVkXwAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;kafkastreams7&quot; title=&quot;kafkastreams7&quot; src=&quot;/static/f89297a274d1e281cb39e87fa17e7360/7c811/kafkastreams7.png&quot; srcset=&quot;/static/f89297a274d1e281cb39e87fa17e7360/103f2/kafkastreams7.png 165w,
/static/f89297a274d1e281cb39e87fa17e7360/748ba/kafkastreams7.png 330w,
/static/f89297a274d1e281cb39e87fa17e7360/7c811/kafkastreams7.png 660w,
/static/f89297a274d1e281cb39e87fa17e7360/d28e0/kafkastreams7.png 990w,
/static/f89297a274d1e281cb39e87fa17e7360/bb51b/kafkastreams7.png 1320w,
/static/f89297a274d1e281cb39e87fa17e7360/d234e/kafkastreams7.png 1378w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;h2 id=&quot;왜-그렇게-적용하였고-문제가-무엇이-있었는가-&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%99%9C-%EA%B7%B8%EB%A0%87%EA%B2%8C-%EC%A0%81%EC%9A%A9%ED%95%98%EC%98%80%EA%B3%A0-%EB%AC%B8%EC%A0%9C%EA%B0%80-%EB%AC%B4%EC%97%87%EC%9D%B4-%EC%9E%88%EC%97%88%EB%8A%94%EA%B0%80-&quot; aria-label=&quot;왜 그렇게 적용하였고 문제가 무엇이 있었는가  permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;왜 그렇게 적용하였고 문제가 무엇이 있었는가 ?&lt;/h2&gt;
&lt;p&gt;우선 나는 현재 아키텍처, 일정내로 해야하는 상황에서 ‘&lt;strong&gt;윈도우를 만들자 마자 redis publish&lt;/strong&gt;’ 하는 것이 최상의 시나리오라고 생각했다. 하지만, 쉽지않았다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;suppress() 에 대한 적용 실패&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;윈도우를 만들자마자 redis publish 를 하기 위해서 여러 방면으로 리서치를 했다. 항상 개발을 하면서 ‘&lt;strong&gt;내가 하고자 하는 기능들은 무조건 있다고 생각했고 내가 못찾는 것이다&lt;/strong&gt;’ 라는 생각을 가졌었는데 이번에는 달랐다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; groupedStream
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;windowedBy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;TimeWindows&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ofSizeWithNoGrace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;windowDuration&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; _&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; newValue &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; newValue &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; materialized&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;suppress&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Suppressed&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;untilTimeLimit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Duration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ofSeconds&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Suppressed&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BufferConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unbounded&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ktable 을 만들때, &lt;strong&gt;suppress&lt;/strong&gt; 함수를 추가하여 저수준의 Processor API 를 굳이 사용하는 것이 아닌 간편하게 적용하여 redis 에 출력이 가능할 줄 알았다. 하지만, 여러 리서치 및 책을 본 결과 그러한 기능은 존재하지 않았다. 물론, stackoverflow 의 질문들이 나와 같은 질문이 많았는데 답변에는 suppress 를 쓰라는 답변이 많았지만 적용되지 않았다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;StreamsConfig.COMMIT_INTERVAL_MS_CONFIG&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;
fun &lt;span class=&quot;token function&quot;&gt;kafkaStreamsConfiguration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;KafkaStreamsConfiguration&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    val props&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MutableMap&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Any&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    props&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;StreamsConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;APPLICATION_ID_CONFIG&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; applicationId
    props&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;StreamsConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;BOOTSTRAP_SERVERS_CONFIG&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; brokers
    props&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;StreamsConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;DEFAULT_KEY_SERDE_CLASS_CONFIG&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StringDeserializer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;java&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name
    props&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;StreamsConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;DEFAULT_VALUE_SERDE_CLASS_CONFIG&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;kafka&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;support&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;JsonDeserializer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;java
    props&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;kafka&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;support&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;JsonDeserializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;TRUSTED_PACKAGES&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;*&quot;&lt;/span&gt;
    props&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;StreamsConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;REPLICATION_FACTOR_CONFIG&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; replicationFactor
    props&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ConsumerConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;AUTO_OFFSET_RESET_CONFIG&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;latest&quot;&lt;/span&gt;
    props&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;StreamsConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;STATE_DIR_CONFIG&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;../state-store&quot;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;StreamsConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;COMMIT_INTERVAL_MS_CONFIG&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2_000&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;KafkaStreamsConfiguration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Processor API 를 고려하기 전에 어플리케이션 설정 상에서 컨트롤 할 수 있도록 &lt;strong&gt;COMMIT_INTERVAL_MS_CONFIG&lt;/strong&gt; 을 찾아 설정을 하려고 했다**.** 하지만 ****구현하는 부분에 있어서 지푸라기라도 잡고 싶은 생각에 시도를 한 부분이였다. 어플리케이션단의 전체적인 설정에 영향이 가는 부분이였고 정확한 일정 시간내의 집계를 활용하지 못해 데이터에 대한 신뢰성이 깨진다는 것이 문제였다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;윈도우별로 정렬이 아닌 key 값으로 정렬&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;val storeQueryParameters &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StoreQueryParameters&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fromNameAndType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;storeName&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;QueryableStoreTypes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;windowStore&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
val windowStore &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; kafkaStreams&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;store&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;storeQueryParameters&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
val results &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; windowStore&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;‘ t0 ~ t0 + a ‘ a시간만큼 집계하여 윈도우로 만들고 State Store에 적재했을 때, 윈도우가 적재된 순서대로 정렬될 줄 알았다. 하지만,  해당 로직을 작성하여 저장된 데이터를 확인해보니 각, 키에 대한 정렬 그다음 윈도우 시간에 대한 정렬로 저장되어있었다. 그래서 가장 추출하기 위해 나름의 해결을 하였다.&lt;/p&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 50.909090909090914%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABTElEQVQoz4WSiW6DMBBE8/8/10pp1aZSDoiScBiDscEHhKl2CRGkaYu02rWxn2e8Xl2vV3jv0YUOVVUhjmMURYG+7+Gc4zwMw4+gfc/mVyEE1HWNYxEhkWeoSiHNUggh0DQNB32PgD+B3nnE1QGJuqAQkmFSStA/UjkHzPOzegR6j4/jGlG6RylLtkz2KRtjWOGkYKrH4lYPWCp0zuKQK5wLBaUqaK0ZROqstXw6raOgeRrvki+URsC2ltcrpfi+bwodPqMacaKR5ymyLLvbbtuWwbQhiiL+F4LHertDKkuGkRNaPwMGJKc3iGwPpfQCRkFWuq7joDEpvOQGuhndUeMm5Qy0zsNu39Gc9jDWMowUEYgs/3qHmDLu86PCECBeXpFvNsilhLw1hQ+zdtHJqZv9bLzoMtnQxqBRCnVZopCS3yUF3c/js/nvHX4DKvEJEWXf8OYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;kafkastreams8&quot; title=&quot;kafkastreams8&quot; src=&quot;/static/d921026b6744faf91d1c3a84c5ff3fc5/7c811/kafkastreams8.png&quot; srcset=&quot;/static/d921026b6744faf91d1c3a84c5ff3fc5/103f2/kafkastreams8.png 165w,
/static/d921026b6744faf91d1c3a84c5ff3fc5/748ba/kafkastreams8.png 330w,
/static/d921026b6744faf91d1c3a84c5ff3fc5/7c811/kafkastreams8.png 660w,
/static/d921026b6744faf91d1c3a84c5ff3fc5/d28e0/kafkastreams8.png 990w,
/static/d921026b6744faf91d1c3a84c5ff3fc5/bb51b/kafkastreams8.png 1320w,
/static/d921026b6744faf91d1c3a84c5ff3fc5/4596f/kafkastreams8.png 1549w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;5초 전의 윈도우 시간들만 탐색 조건에 걸고 최신의 윈도우만 걸러주는 간단한 알고리즘 ( 시간 복잡도 N ) 정도의 탐색으로 구현하여 데이터를 추출하였다.&lt;/p&gt;
&lt;h2 id=&quot;왜-window-기법에서-tumbling-windows-를-선택하였는가-&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%99%9C-window-%EA%B8%B0%EB%B2%95%EC%97%90%EC%84%9C-tumbling-windows-%EB%A5%BC-%EC%84%A0%ED%83%9D%ED%95%98%EC%98%80%EB%8A%94%EA%B0%80-&quot; aria-label=&quot;왜 window 기법에서 tumbling windows 를 선택하였는가  permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;왜, Window 기법에서 &lt;strong&gt;&lt;strong&gt;Tumbling Windows 를 선택하였는가 ?&lt;/strong&gt;&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;kafka streams 에서는 여러 가지 window 기법을 제공한다. 이번 실시간 시세에 적용한 window 기법은 Tumbling windows 기법을 사용했다. 우선, 쓰지 않은 3가지 window 기법을 설명하겠다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;hopping windows&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Tumbling windows 와 비슷하지만 일정 간격으로 이동이 가능하기 때문에 윈도우가 중첩될 수 있다. 예를 들어, 1초에서 3초 동안의 데이터 집계를 얻은 A 블록. 2초에서 4초 동안의 데이터 집계를 얻은 B 블록. 즉, 2초 ~ 3초 구간의 데이터가 중첩이 될 수 있다. 중복이 될 수 있으므로 실시간 시세에 적합하지 않았다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Sliding Windows&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;이벤트 간의 최대 시간 간격을 기준으로 윈도우를 생성한다. 즉, 레코드의 Timestamp에 따라 윈도우가 겹치는 부분이 있을 수 있기에 실시간 시세에 적합하지 않다. 고정적인 윈도우라 할지라도.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Session Windows&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Session windows 같은 경우에는 윈도우 자체가 유일하게 고정적인 부분이 아니라서 애초에 실시간 시세에 적합하지 않은 기법이였다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tumbling Windows&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Thumbling windows 는 실시간시세에 적합했는데, 고정된 윈도우를 지원하며 중첩되는 부분이 없었기에 종목에 대한 시세 중복없이 구현을 할 수 있다.&lt;/p&gt;
&lt;h2 id=&quot;적용-후-전체적인-파이프라인-및-결과물&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%A0%81%EC%9A%A9-%ED%9B%84-%EC%A0%84%EC%B2%B4%EC%A0%81%EC%9D%B8-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-%EB%B0%8F-%EA%B2%B0%EA%B3%BC%EB%AC%BC&quot; aria-label=&quot;적용 후 전체적인 파이프라인 및 결과물 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;적용 후 전체적인 파이프라인 및 결과물&lt;/h2&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 20.60606060606061%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAApUlEQVQY03WPWQrCQBBEc/9juRxBP01QP1xCEpPu2ZzJkxkRF7DhUVBUNVSVUmKe5zdADIFwPHAfehJQMjzvK/tBzmSqEAIigrUWYxQ1BjdNTOsltqmJgHOOqd9zPTfcxOKdK14m97J67wvl4TiOGGNQEUQVJ0K3WiD1jpBS8VVG+qHj0nWoasnnXtu2RV9e9Ts5X/QOv90Qzqcydf6YDP8nxxh5ADGnN34clLu8AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;kafkastreams9&quot; title=&quot;kafkastreams9&quot; src=&quot;/static/26acea9508865b4bd47ead0242ca0019/7c811/kafkastreams9.png&quot; srcset=&quot;/static/26acea9508865b4bd47ead0242ca0019/103f2/kafkastreams9.png 165w,
/static/26acea9508865b4bd47ead0242ca0019/748ba/kafkastreams9.png 330w,
/static/26acea9508865b4bd47ead0242ca0019/7c811/kafkastreams9.png 660w,
/static/26acea9508865b4bd47ead0242ca0019/d28e0/kafkastreams9.png 990w,
/static/26acea9508865b4bd47ead0242ca0019/bb51b/kafkastreams9.png 1320w,
/static/26acea9508865b4bd47ead0242ca0019/ea4be/kafkastreams9.png 1861w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 30.303030303030305%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABnElEQVQY0zXF227ScADA4b6JDiFzImNxxQGjdEDLvwcohxZajpMx2JJhgIgRdbronCZuya40eqVeeeEL6BP4BPo6P8OFF18+6UY4ys3/IqvvktzJcjsmE9mIE92UiW7eI7QeZ20lEiW8sUU4JhMKRwlFYqyF73Br9foWUsI+IVGek7AnJP03bD/9y07/I4WcIGf65BtzNGeE2r9Cnf6k6M0Rzj5D4dO2A+pigC4O0MU+8m4JKd04wzi8xhi8IzX8ivoN1OVv6jWfUnNJ15tRDs7IH31h0L9kUj3C82acWj2U4CXp7jV7nUsCd4FhnyCl3Gf0H3+i++gDKf8cffqDQusUp2Dh6y4Vw6WVNTGtQ5Rij4ozoeou6GQtrkSLhWhhmn1MrUnROkZKui9IB2/JtC7IdN5jzb4jxp/xvSlmbUCnEnBuN3HazxnbbWr+EwqNKX51xIXu064/xCuUyeg98kkTSS0fkLZHyMYY2X1FfPkHdfILIYbcz1U4VjQeaF0S5SlNxaKTLVHJexi7AiXfJhW8RtWbaMk9lNg2/wA7oeo+xSnV9gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;kafkastreams10&quot; title=&quot;kafkastreams10&quot; src=&quot;/static/8ff13595f8fee7fe13cd810a08c04dbf/7c811/kafkastreams10.png&quot; srcset=&quot;/static/8ff13595f8fee7fe13cd810a08c04dbf/103f2/kafkastreams10.png 165w,
/static/8ff13595f8fee7fe13cd810a08c04dbf/748ba/kafkastreams10.png 330w,
/static/8ff13595f8fee7fe13cd810a08c04dbf/7c811/kafkastreams10.png 660w,
/static/8ff13595f8fee7fe13cd810a08c04dbf/d28e0/kafkastreams10.png 990w,
/static/8ff13595f8fee7fe13cd810a08c04dbf/bb51b/kafkastreams10.png 1320w,
/static/8ff13595f8fee7fe13cd810a08c04dbf/315d6/kafkastreams10.png 2329w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;video src=&quot;/986fab74721b43476479ba59aa2efb8c/RPReplay_Final1703204357.mp4&quot; style=&quot;display: block; margin: auto; width: 40%;&quot; controls=&quot;&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;
&lt;h2 id=&quot;완벽하지-않다-어떤-문제가-남아있는가-&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%99%84%EB%B2%BD%ED%95%98%EC%A7%80-%EC%95%8A%EB%8B%A4-%EC%96%B4%EB%96%A4-%EB%AC%B8%EC%A0%9C%EA%B0%80-%EB%82%A8%EC%95%84%EC%9E%88%EB%8A%94%EA%B0%80-&quot; aria-label=&quot;완벽하지 않다 어떤 문제가 남아있는가  permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;완벽하지 않다. 어떤 문제가 남아있는가 ?&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;파티션 별로 중복된 종목이 존재&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Kafka Streams에서는 각 파티션의 데이터를 별도로 처리한다. 이는 Kafka의 토픽이 여러 파티션으로 분할될 수 있으며, Kafka Streams 애플리케이션(Load)은 각 파티션을 독립적으로 처리하기 때문에 중복을 처리하는 부분에서는 Stream Task 는 특정 파티션을 처리하여 Punctuate 를 실행하게 하였다. 즉, 각 파티션은 중복된 종목 데이터가 없지만 그 파티션끼리는 중복된 종목이 있으므로 Websocket Application 에서 시간에 대한 비교 로직이 한번 더 들어가야했다. 물론, 현저히 처리해야하는 데이터양이 줄었기에 충분히 가능했다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;카프카 토픽과 파티션에 대한 제대로 된 구축&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;차세대 파이프라인을 구축했을 당시, 토픽 설계에 있어서 문제점을 인지하지 못했다. 체결에 대한 Topic 하나만을 설계했고 이 Topic에 모든 체결 데이터가 들어왔다.&lt;/p&gt;
&lt;p&gt;Kafka Streams 를 구축하면서 애초에 ‘&lt;strong&gt;체결 Topic&lt;/strong&gt;’ 아닌 ‘&lt;strong&gt;업종 또는 지수 별로 Topic을 나눴으면 어땠을까?&lt;/strong&gt;’ 라는 생각이 들었다. 그러면, 앞서 말한 파티션 별로 중복된 종목이 존재하는 일도 없을 것 이다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;일정 및 서버 비용&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;kafka streams 를 적용한 어플리케이션을 따로 서버를 구축했으면 좋았다고 생각한다. 원본 데이터를 가공하여 최종 결과인 윈도우를 로컬 저장소에 임시적으로 저장하는 것이 아닌 새로운 Topic에 넣었으면 좀 더 가용성과 확장성에 이점이 있을 것이라고 생각한다.&lt;/p&gt;
&lt;p&gt;다만, 일정이 중요했고 또 다른 서버를 구축하는 것은 비용에 문제가 있었기에 기존 파이프라인에 스펙을 고려했을 때 충분하다고 생각하였고 구축하였다.&lt;/p&gt;
&lt;h2 id=&quot;끝내며&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%81%9D%EB%82%B4%EB%A9%B0&quot; aria-label=&quot;끝내며 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;끝내며&lt;/h2&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 27.272727272727277%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAv0lEQVQY03WQSwrCMBCGc1F33sSdB/AI7rrwENJLSH0gbUqhtXmSV3+ZQIui/WDIwEy+mYRdqzseT4666dF1A4zR8N6DmKZpCUIpBWNMzr0P6HsNH0KuW2sRYwQrzyV4U0NKucSaUAiRpQSJh5dYBtCZhd4FrPEpnKVEStNP3wwrDnvcqgs4H9A0Xd6AIoTwJZ23oKcRMSZI5bKc6s5RnsB22w1OxRHWeozjmGVa679CqtOXEFJptG0PpTR1LXfe1cSC/BrkubQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;kafkastreams11&quot; title=&quot;kafkastreams11&quot; src=&quot;/static/e64f3e0cc5346f3b4b42fd18901833de/7c811/kafkastreams11.png&quot; srcset=&quot;/static/e64f3e0cc5346f3b4b42fd18901833de/103f2/kafkastreams11.png 165w,
/static/e64f3e0cc5346f3b4b42fd18901833de/748ba/kafkastreams11.png 330w,
/static/e64f3e0cc5346f3b4b42fd18901833de/7c811/kafkastreams11.png 660w,
/static/e64f3e0cc5346f3b4b42fd18901833de/d28e0/kafkastreams11.png 990w,
/static/e64f3e0cc5346f3b4b42fd18901833de/bb51b/kafkastreams11.png 1320w,
/static/e64f3e0cc5346f3b4b42fd18901833de/4753e/kafkastreams11.png 1992w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;일정이 있었고 책임감으로 부담이 있었던 시간이었다. 하지만 결과가 좋았고 그 과정들을 되새겨 보았을 때, 리서치에 대한 한계점을 도달하고 거기서 끝나는 것이 아닌 관련 책을 구입하여 완독 후, 기능이 없다는 것을 스스로 확답을 받고 차선책을 생각해냈다는 것에 스스로 큰 점수를 주고 싶다.&lt;/p&gt;</content:encoded><author>a_l_b_bloomer@naver.com</author></item><item><title><![CDATA[redis 구성 - 단일, 레플리케이션, 센티넬]]></title><description><![CDATA[시작 레디스 구성에 대해서 글을 쓴다.
이번에는 잠시 쉬는 동안 운영하고 있는 인베스팅뷰, 줌투자에 붙어있는 레디스를 공부하면서 전체적으로 여러 종류의 구성을 조사하고 공부해보려고 한다. 단일 인스턴스 그림에 보이는 것 처럼 단순히 하나의 Redis…]]></description><link>https://gb-template.netlify.com/redisinfra20231124/</link><guid isPermaLink="false">https://gb-template.netlify.com/redisinfra20231124/</guid><category><![CDATA[infra]]></category><category><![CDATA[cache]]></category><pubDate>Fri, 24 Nov 2023 14:31:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;시작&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%8B%9C%EC%9E%91&quot; aria-label=&quot;시작 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;시작&lt;/h2&gt;
&lt;p&gt;레디스 구성에 대해서 글을 쓴다.
이번에는 잠시 쉬는 동안 운영하고 있는 인베스팅뷰, 줌투자에 붙어있는 레디스를 공부하면서 전체적으로 여러 종류의 구성을 조사하고 공부해보려고 한다.&lt;/p&gt;
&lt;h2 id=&quot;단일-인스턴스&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%8B%A8%EC%9D%BC-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4&quot; aria-label=&quot;단일 인스턴스 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;단일 인스턴스&lt;/h2&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 29.6969696969697%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAv0lEQVQY052RUQ+CIBSF/f9/qKynVutvROHEB3QqTmECpx0Wy7aeZDvAuffyDbhFCAFUjBFSShhjwJFjXL33yHWBMeY/8ps98wWndV0xjiOEEOi6Dtba5IdhSDCCQQGI1sLKF4Kq4VWNoFTyru/BioLFBEzTlA4Q2LZt2vO2hC7LgnmesTgHLR4w9xue5QHyXOJ5OqK/XuAq+R+otU7Q3cDtkykepLLPf/nz5EoiNA18o9JKmBv6L3DbgK3f05Q3Q9DOwVeHppsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;     &quot; title=&quot;     &quot; src=&quot;/static/2cb458193c726b6906343c3c2911d513/7c811/%EB%8B%A8%EC%9D%BC%EB%A0%88%EB%94%94%EC%8A%A4.png&quot; srcset=&quot;/static/2cb458193c726b6906343c3c2911d513/103f2/%EB%8B%A8%EC%9D%BC%EB%A0%88%EB%94%94%EC%8A%A4.png 165w,
/static/2cb458193c726b6906343c3c2911d513/748ba/%EB%8B%A8%EC%9D%BC%EB%A0%88%EB%94%94%EC%8A%A4.png 330w,
/static/2cb458193c726b6906343c3c2911d513/7c811/%EB%8B%A8%EC%9D%BC%EB%A0%88%EB%94%94%EC%8A%A4.png 660w,
/static/2cb458193c726b6906343c3c2911d513/ad973/%EB%8B%A8%EC%9D%BC%EB%A0%88%EB%94%94%EC%8A%A4.png 722w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;그림에 보이는 것 처럼 단순히 하나의 Redis 서버만 존재한다. 이 구성은 설정이 간단하고 관리하기 쉽다는 장점이 있지만, 서비스에서는 웬만해서는 이런 구성을 하지 않는다. 이유는 고가용성에 취약하다. &lt;strong&gt;Redis 서버에 장애가 발생하면 어떻게 될까 ?&lt;/strong&gt; 서비스 전체가 마비된다. 하나의 서버기 때문에 복제한 서버도 없기 때문에.&lt;/p&gt;
&lt;p&gt;해당 같은 경우에 읽기 부하가 있는 경우, slave 추가하여 수평적확장에 기대할 수 있다. 쓰기 부하가 있는 경우에는 수평적확장이 까다롭다. 예를들어, 클러스터링일까나.. 불필요한 쓰기 작업을 제거하거나 파이프라이닝을 사용하여 여러 쓰기 명령을 그룹화하는 것도 좋은 방법이다. 해당 부분은 네트워크 비용을 절감할 수 있다.&lt;/p&gt;
&lt;h2 id=&quot;레플리케이션&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%A0%88%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98&quot; aria-label=&quot;레플리케이션 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;레플리케이션&lt;/h2&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 63.63636363636363%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzUlEQVQ4y21Ty27bMBD0//9OH6eihxZFgRzaIC0QOVVcBBEYK5Zk0RQpSpQ4xWxFQw5MYODlijs7+/BmnmdcwzRNmGPE1DvY7B769y+Byx8weI9xHBFCEKzjNtfIeGKM8ntUCofPn/D04R2eP76H/v4N1hj03uOkNYwxQs73Z0JekoOw1sI5h67r4IxBqA5wSmF8LTFWB2ZD33vkeY6iKITwQiFlD8OARK61xn6/F0JRC8B6j8DEAFJMnCf0zmIcvLwSQrJnWYbtditE6wTn0mOEcxZTCGL/ryZiCBG669EaJzb7vmF5DG6aBt571HUtYCKWrZSS70zGO20qOlmPuyeLm/tX3GQ1Hl4GjGEhZHBZluj7Hm3bSqkkJ+gjCf18Sx+nbKxHVjjc/qlwmzf4Wy6ELI+PGOCXdcDSpzQsHqpLJ5VMgmkGwmJfTJkBadLshezhYtNP1VVVieKzf7Vq8e0espykaK2MgbKPxyN2u52QLjqF5O3KbZISKkj7RySbe8ZvJOSdCq3tcNQddqXH497h8cWhqJYerv9qbP4a7GcCydhnTtucNFRZ48euw5efz/h6p7BV/pJwPYRUwrUWpDPNEY0J0G5Ga4kge/gPXifxQUj172IAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;      &quot; title=&quot;      &quot; src=&quot;/static/08c09717b87eee8ebea22a73b4676e6a/7c811/%EB%A0%88%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98.png&quot; srcset=&quot;/static/08c09717b87eee8ebea22a73b4676e6a/103f2/%EB%A0%88%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98.png 165w,
/static/08c09717b87eee8ebea22a73b4676e6a/748ba/%EB%A0%88%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98.png 330w,
/static/08c09717b87eee8ebea22a73b4676e6a/7c811/%EB%A0%88%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98.png 660w,
/static/08c09717b87eee8ebea22a73b4676e6a/d28e0/%EB%A0%88%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98.png 990w,
/static/08c09717b87eee8ebea22a73b4676e6a/9d874/%EB%A0%88%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98.png 1012w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;단일 인스턴스 레디스 같은 경우, 위와 같이 장애가 났을 때 서비스 측면에 큰 문제가 생길 수 있다. 그래서 레플리케이션으로 구성하면 쓰기를 할 때, Master 에만 쓰고 읽기를 할 때는 여러 Slave 서버에 읽기에 사용할 수 있어서 쓰기, 읽기 부하에 비용을 덜을 수 있다.&lt;/p&gt;
&lt;p&gt;하지만 단일 인스턴스처럼 레플리케이션 구성에는 쓰기 부하에는 아직까지 해결을 할 수는 없다. 모든 데이터를 Master에 쓸 수 있기 때문에. 또한, Master 에 있는 데이터를 Slave 에 비동기로 보내 복제를 하기 때문에 항상 동기화가 됐다고는 보장할 수 없다.&lt;/p&gt;
&lt;h2 id=&quot;클러스터--matser-만-있는-경우-slave-도-있는-경우-&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0--matser-%EB%A7%8C-%EC%9E%88%EB%8A%94-%EA%B2%BD%EC%9A%B0-slave-%EB%8F%84-%EC%9E%88%EB%8A%94-%EA%B2%BD%EC%9A%B0-&quot; aria-label=&quot;클러스터  matser 만 있는 경우 slave 도 있는 경우  permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;클러스터 ( Matser 만 있는 경우, Slave 도 있는 경우 )&lt;/h2&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 93.93939393939394%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACc0lEQVQ4y5VUa3OTQBTN//89aq36SW2jn5wEbaePtGkKCCEL7HthgePcNXRoY7Vm5gR2L/fsfZy7s77vQei6LoDenXOoqgpCiICyLKG1xjAMGL9/DrORhH6jg9QaJk1Rfp2DfZnDrK4hpAz28eAppgHNaNG2LdI0RV3XxAplLHSWgS8XqJcL6Lv1ywnpI8YYoijCer0OqXHOYZUEnA1olAqpv4iQ/qhm1lo0TQPBOVhdQ9ys8PPoNeKjV5DREkIpDBPHv6ZMRCMpbWpjYAWHZ7uAhhr00pTHjRHD2JRiC3F+Bn5+BhPH/yR81OWnRmkMTHyP8uQTdp8/Ql9e/F+ET43GWkgh4IxBYwyUEFBUw72sfj+Hh/XUf/anEzvvUVYVcsawZQwFY6HO5Ex1tkbDWQNj9MP+AeG4SU9FNWQMXRLDpwlsnoMLAe9bbHcl4kJjk0ukOxUOPiCk0L33GN+Vc9D3G6Rv3yA+PgriZmUFrSQ2yRaLW4WTKMNl6lDXHP2kMUHYJObFYoHVahWmhtZUP3gPdB6ttaGGZJNSoh+AbgB8N4TpmmYYdEgENC00IXwvbJnE2M1PsZ2fQl1fhi63jUO+q3GRaHy7KrDeOlQ1P2zKKOoRXCmYPIOMFhDfl5C3N2B04yiFNCtwVzS4ShSSskW1j/B5YVMNtYalJpQMvizh9pNCHa1qAekGcO2hbP+Q8vM67Doo62DuN8jfHyP78A4iWoJVFbRW2KRFaMrpjxwX6TTl/nGEU/lQhIoiyzO4PIcuCkilghLKqkYlW+y4QyWbcBH3fXd4wU6jJEcioBEk0E1D6ZJNSRnkQ1BSwBjzSIe/AGLzvN8o/fV1AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;    &quot; title=&quot;    &quot; src=&quot;/static/e6205a1882f2044966b04a36321c303c/7c811/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0.png&quot; srcset=&quot;/static/e6205a1882f2044966b04a36321c303c/103f2/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0.png 165w,
/static/e6205a1882f2044966b04a36321c303c/748ba/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0.png 330w,
/static/e6205a1882f2044966b04a36321c303c/7c811/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0.png 660w,
/static/e6205a1882f2044966b04a36321c303c/eb088/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0.png 916w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;단일 인스턴스 레디스와 레플리케이션 구성에 있어서 계속 문제가 되는 경우가 바로 ‘쓰기’ 에 대한 부하를 해결하기에 까다로움이 있었다. 예를 들어, 데이터를 그룹화한다든지에 대한 비지니스 부분이 추가되야한다. 이 인프라적인 부분에서 해결하기 위해서는 클러스터부터 가능하다.&lt;/p&gt;
&lt;p&gt;위에 그림을 보면 Master 를 하나의 클러스터 안에 구성하므로써 쓰기에 대한 부하를 3대로 분산(sharding)시킬 수 있다. 즉, 클러스터를 통해 여러 노드에 걸쳐 데이터를 분산 저장함으로써, 단일 노드에 대한 부하를 줄이고 전체 시스템의 처리량과 용량을 증가할 수 있다. 그러면 자연스럽게 고가용성에 대한 장점이 있다.&lt;/p&gt;
&lt;p&gt;그럼, 첫번째 사진은 Master 만 여러대 있는데 이 구성에 대한 문제점은 무엇일까? 바로 복제가 없기 때문에 데이터에 대한 손실이 일어날 수 있다. 이 부분을 극복하기 위해선 두번째 사진처럼 각 Master 에 대한 Slave 를 추가하면 고가용성을 더 더욱 늘릴 수 있다.&lt;/p&gt;
&lt;h2 id=&quot;센티널&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%84%BC%ED%8B%B0%EB%84%90&quot; aria-label=&quot;센티널 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;센티널&lt;/h2&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 53.93939393939393%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5UlEQVQoz11Sa3PTMBDM//87DJ8g6QAfeA40pdO0BOKUxIkfkizLkvzWMneOW0AzO5JuT6vV6RYhBMyjaRq0bcuo6/qffdt2FzxzXdfxPI4jnyetxTAMKMuSkaYplFIwxoDilEz7oigYtLbWsoD3nmNZlkEIwecpf1FVFQgkMAsRSbfPSRQjUIxEyQnNQ9+zMDmeuYWxFj6OYW+uIb9+QXO/QZllcL6GLhTSssf2VGN7cvgtOghZsEOtC5yKAQ9Hix+xw6no2fHCOAcX7XBevcL25Qtkb66QRBG0MZAiw0G0+Pwg8f72jPujZ8EQJsGfSYMPdynjV9JcBCuD1nugH5AcjjBSITmfkec5kiSBtR6+puIPaLsRUir0/eRmDJgwAn0foLW+1NBXcIODaQzqUKM0JZxz0yeVEtLkMLVGUUkkacI1I05bBe0UXFfBt3ZyaCuHRxHh3eYtVtdLfNp9hNA5mrpBVVns5Q5X31dYrZdYH75BqJw/hdzcxjdYrl8zvznfodAsaCGqHI9qj30eIdYHaFOwC/pl6QT2ImLupI+QSmIcRhbMbDpxIkJqkucnU2+FMXBrzMnUwDR3bccxAtVOSokxjE9tM3NPbUNJdHBublpTP9IgUarL3xxdToP67/9z9Ko/GQNFYbHSSPAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;   &quot; title=&quot;   &quot; src=&quot;/static/06d0735ca20c46b7ee2f736c51906520/7c811/%EC%84%BC%ED%8B%B0%EB%84%90.png&quot; srcset=&quot;/static/06d0735ca20c46b7ee2f736c51906520/103f2/%EC%84%BC%ED%8B%B0%EB%84%90.png 165w,
/static/06d0735ca20c46b7ee2f736c51906520/748ba/%EC%84%BC%ED%8B%B0%EB%84%90.png 330w,
/static/06d0735ca20c46b7ee2f736c51906520/7c811/%EC%84%BC%ED%8B%B0%EB%84%90.png 660w,
/static/06d0735ca20c46b7ee2f736c51906520/d28e0/%EC%84%BC%ED%8B%B0%EB%84%90.png 990w,
/static/06d0735ca20c46b7ee2f736c51906520/6cbfb/%EC%84%BC%ED%8B%B0%EB%84%90.png 1269w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;센티널은 나에게 조금 혼란스럽게 했다. ‘서버일까 ? 시스템인가 ? ‘ 이해가 가지 않았다. 결국 찾아보니 하나의 서버에 하나의 ‘프로세스’로 작동하는 것이 센티널이다.&lt;/p&gt;
&lt;p&gt;센티널의 큰 특징은 간단하다. 모니터링, 알림, 자동 장애복구, 구성관리 딱 이 부분만 생각하고 있으면 된다. 4가지의 각 특징을 알아보자.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;모니터링&lt;/strong&gt;: Sentinel은 Redis 서버 인스턴스(주로 마스터 및 그 슬레이브들)를 지속적으로 확인하여, 네트워크 불능, 과부하 등의 문제가 있는지 감시.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;알림&lt;/strong&gt;: 문제가 감지되면, Sentinel은 구성된 방식으로 시스템 관리자나 다른 시스템에 알림을 보낸다. 즉, 보통은 인프라팀에 모니터링하며 알림을 받고 개발자에게 알림을 알린다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;자동 장애 복구&lt;/strong&gt;: 마스터 Redis 서버에 문제가 생겼을 때, Sentinel은 슬레이브 중 하나를 새로운 마스터로 자동 승격시키고, 나머지 슬레이브가 새 마스터를 따르도록 재구성.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;구성 관리&lt;/strong&gt;: Sentinel은 Redis 서버의 구성을 관리하고, 마스터 서버의 변경사항을 클라이언트와 다른 서버에 알린다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;끝내며&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%81%9D%EB%82%B4%EB%A9%B0&quot; aria-label=&quot;끝내며 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;끝내며&lt;/h2&gt;
&lt;p&gt;시간내서 자료를 찾아보고 알아보면 간단하게 구분할 수 있는 부분이었다. 내가 운영하고 있는 인베스팅뷰와 줌투자 같은 경우 인프라팀에서 센티널로 구축을 해주셨고 보통 메모리라든지 문제가 생길 경우, 슬랙으로 노티를 해주시는 편이다.&lt;/p&gt;</content:encoded><author>a_l_b_bloomer@naver.com</author></item><item><title><![CDATA[도커 overlay 용량을 정리해보자.]]></title><description><![CDATA[문제의 시작 차세대 코스콤 시스템을 구축하면서 IDC 에 docker image 를 이용해서 어플리케이션을 띄웠다. 배포를 하고 운영을 하면서 서버에 용량이 차기 시작했고 Zabbix에 알림이 오기 시작했다. 용량을 정리해보자. 문제 해결 우선 인프라팀에서 Zabbix…]]></description><link>https://gb-template.netlify.com/docker20231113/</link><guid isPermaLink="false">https://gb-template.netlify.com/docker20231113/</guid><category><![CDATA[docker]]></category><pubDate>Mon, 13 Nov 2023 22:31:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;문제의-시작&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%AC%B8%EC%A0%9C%EC%9D%98-%EC%8B%9C%EC%9E%91&quot; aria-label=&quot;문제의 시작 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;문제의 시작&lt;/h2&gt;
&lt;p&gt;차세대 코스콤 시스템을 구축하면서 IDC 에 docker image 를 이용해서 어플리케이션을 띄웠다. 배포를 하고 운영을 하면서 서버에 용량이 차기 시작했고 Zabbix에 알림이 오기 시작했다. 용량을 정리해보자.&lt;/p&gt;
&lt;h2 id=&quot;문제-해결&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0&quot; aria-label=&quot;문제 해결 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;문제 해결&lt;/h2&gt;
&lt;p&gt;우선 인프라팀에서 Zabbix 에 알림이 오면 각 서버 담당자에게 슬랙으로 연락이 온다. 나 같은 경우는 차세대 전체적으로 관리를 하고 있으므로 총 Application 7대와 운영 브로커, 스테이징 브로커에 대한 슬랙을 주신다.&lt;/p&gt;
&lt;p&gt;df -h 명령어를 이용해서 우선 전체적으로 얼마정도 데이터가 쌓였는지 알아본다.&lt;/p&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 576px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 59.3939393939394%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAC5UlEQVQoz0WSWW/iBhhF/Vf60Ey2mYR0SCZJJ2EPYEJI8IqxzWaDMauBANkm02nVjKqO1I6qSlWlqmpf2j95KpyHPnyvR+e79wrvgzl3nSHLus/S7nBje5iH56i7GcwDkeF5le6ZRv1NiaBgM8rbdGMqg7TBIGXQOZIZJEx6xzr+oY7wGMy5cfp8GExZ1jr4BQNjX0TdTaPvnbFQmyz0NvZ+kUC0mJcdBpkqd6rHdanFIF7hu/qEhdjivT5A+Hj3wNLp8dgdMZJqKK+zqJFMeOXtOF5SYqm5VCMil1/EcI6vqGzm8d4q3Fd89Bc5eic6QcIiSFQRnu7f8dAd074wUKNZ9P086t4Zym4KeSuOlygzLdepRYv0M0ZoaGzl6cV17rQuxkaO3tcK47jJPNdA+PThW975AUOtiXFUQIvmQjvlVRJ5I0YnfsWs3MB+XcCLyYzFGsaWiH+qMrtoUlnLMopVng2TVYSfnr7n3hsz0lpoByLa6uXddAiU1k/pJiXmiou5J1LfLzLImFS3RfpxjXnJwXqRI4hXGceqDE8qCJ9/eOK2PWRiuDRSMtWjc5QV8OUzcGV4LbfQX2aRvkziHsmh4TBlsCg5mGs5JslVyxqzjI3w+cePLNwhU6vDo/dcjLzzv6FzUgqB6kYaP6EyKTaoRYr0YjrTQoPOgcRNycU/VGmsFxB+/fkT180egdnmm/6Eqe6EhvKrZGgZlCym5QZmJI8XV8MMm9FLJqLNIFmlvllgmrboH2sMjnWEP37/hVtvTGB1sOJlzLcXqHsZlJ000lYaNyYxk1qYkQJW5Jxe0sDevWAq1phkbay1PNO0jf9G4fbCQfj7r9+Yu0PmrT5OXkdZtfzVGcpOhvJmmvpRibnqom/n0TdyzxmuF/BX20tb2Osiy3yTblSif6gg/PPvn/QNl7HVYVbz0A8LqOF0ckjbGZxTmYXaDoG9lMGs5NDcu2SUMkOgdyBzf+XiR8s8lNv8B1Dk6LEobj5fAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;     2023 11 20    9 18 51&quot; title=&quot;     2023 11 20    9 18 51&quot; src=&quot;/static/378f2ba5ca50b09b4d821fb5b0d5ca5f/694da/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-20%20%EC%98%A4%ED%9B%84%209.18.51.png&quot; srcset=&quot;/static/378f2ba5ca50b09b4d821fb5b0d5ca5f/103f2/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-20%20%EC%98%A4%ED%9B%84%209.18.51.png 165w,
/static/378f2ba5ca50b09b4d821fb5b0d5ca5f/748ba/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-20%20%EC%98%A4%ED%9B%84%209.18.51.png 330w,
/static/378f2ba5ca50b09b4d821fb5b0d5ca5f/694da/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-20%20%EC%98%A4%ED%9B%84%209.18.51.png 576w&quot; sizes=&quot;(max-width: 576px) 100vw, 576px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;디스크에 용량이 가득차고 overlay에 가득차있다. 나는 항상 용량에 대한 이슈가 나에게 오면 ‘&lt;strong&gt;docker system prune -a -f’&lt;/strong&gt; 명령어를 쓰고 Docker 환경에서 사용되지 않는 리소스를 강제로 정리한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;사용 중이지 않은 컨테이너&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; 모든 종료된 컨테이너가 제거
네트워크&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; 사용 중이지 않은 &lt;span class=&quot;token class-name&quot;&gt;Docker&lt;/span&gt; 네트워크 리소스가 제거
이미지&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; 기본적으로는 태그가 없는 이미지만 제거되지만&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;a 옵션으로 인해 사용 중이지 않은 태그가 있는 이미지도 제거
빌드 캐시&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Docker&lt;/span&gt; 이미지 빌드 과정에서 생성된 캐시들이 제거&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;문제-해결-변수&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0-%EB%B3%80%EC%88%98&quot; aria-label=&quot;문제 해결 변수 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;문제 해결 변수&lt;/h2&gt;
&lt;p&gt;보통 docker system prune -a -f 명령어를 사용하면 용량을 확보할 수 있었는데 이번에는 단 1도 용량이 확보되지 않았다. 이유는 이미 사용되지 않는 리소스는 정리가 되었고 추가로 용량을 차지하고 있는 부분을 확인해서 삭제를 해야한다.&lt;/p&gt;
&lt;p&gt;자, 순차적으로 확인해보자.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;df -h 를 이용해서 가장 큰 용량이 있는 마운트된 경로알아봄&lt;/li&gt;
&lt;li&gt;sudo du -ahx / | sort -rh | head -n 10로 용량이 가장 많은 부분을 알아본다. ( ‘/’ 마운트된 경로 )&lt;/li&gt;
&lt;li&gt;/var/lib/docker/containers/ - 에 가장 큰 용량 차지&lt;/li&gt;
&lt;li&gt;du -ah /var/lib/docker/containers/ - | sort -rh | head -n 10 을 통해 어느 것이 가장 용량이 많은지 확인&lt;/li&gt;
&lt;li&gt;-.json 의 파일이 가장 컸다.&lt;/li&gt;
&lt;/ol&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 14.545454545454545%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA40lEQVQI1wXBaUvCcADAYT9VF1hBZS1nq/82NtmV7miaLjIhCioioqJeVMaCDiIIOpzZBD/fr+cpeBUTVzawJB1b0nHLBlZJxytXCVWPSK0RaXXaVkzDDIkNn46fsBcktN2Ylh3RqPoEwsEXDoVAc9h2QhJvi916ix2vib/hUVMcArGJvWJiLGhYyyb6vEAUFdTZdUSxgjKzytq0hDxVQp5cQp5YpCDmZJ7ue4zzIcPvH/L+gFH2y6g/YJz9kX9lfL5+8P74xkvvmfQmJb1+4O7ilquTS84PzjjtHnHcOWS/2eUfog2H+s8R0xsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;     2023 11 20    9 19 35&quot; title=&quot;     2023 11 20    9 19 35&quot; src=&quot;/static/f8df08d113403cbc13066eecc24ef2b6/7c811/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-20%20%EC%98%A4%ED%9B%84%209.19.35.png&quot; srcset=&quot;/static/f8df08d113403cbc13066eecc24ef2b6/103f2/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-20%20%EC%98%A4%ED%9B%84%209.19.35.png 165w,
/static/f8df08d113403cbc13066eecc24ef2b6/748ba/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-20%20%EC%98%A4%ED%9B%84%209.19.35.png 330w,
/static/f8df08d113403cbc13066eecc24ef2b6/7c811/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-20%20%EC%98%A4%ED%9B%84%209.19.35.png 660w,
/static/f8df08d113403cbc13066eecc24ef2b6/190d7/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-20%20%EC%98%A4%ED%9B%84%209.19.35.png 706w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;삭제를 시켜주자 !!!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;rm -rf&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 576px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 59.3939393939394%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAC5UlEQVQoz0WSWW/iBhhF/Vf60Ey2mYR0SCZJJ2EPYEJI8IqxzWaDMauBANkm02nVjKqO1I6qSlWlqmpf2j95KpyHPnyvR+e79wrvgzl3nSHLus/S7nBje5iH56i7GcwDkeF5le6ZRv1NiaBgM8rbdGMqg7TBIGXQOZIZJEx6xzr+oY7wGMy5cfp8GExZ1jr4BQNjX0TdTaPvnbFQmyz0NvZ+kUC0mJcdBpkqd6rHdanFIF7hu/qEhdjivT5A+Hj3wNLp8dgdMZJqKK+zqJFMeOXtOF5SYqm5VCMil1/EcI6vqGzm8d4q3Fd89Bc5eic6QcIiSFQRnu7f8dAd074wUKNZ9P086t4Zym4KeSuOlygzLdepRYv0M0ZoaGzl6cV17rQuxkaO3tcK47jJPNdA+PThW975AUOtiXFUQIvmQjvlVRJ5I0YnfsWs3MB+XcCLyYzFGsaWiH+qMrtoUlnLMopVng2TVYSfnr7n3hsz0lpoByLa6uXddAiU1k/pJiXmiou5J1LfLzLImFS3RfpxjXnJwXqRI4hXGceqDE8qCJ9/eOK2PWRiuDRSMtWjc5QV8OUzcGV4LbfQX2aRvkziHsmh4TBlsCg5mGs5JslVyxqzjI3w+cePLNwhU6vDo/dcjLzzv6FzUgqB6kYaP6EyKTaoRYr0YjrTQoPOgcRNycU/VGmsFxB+/fkT180egdnmm/6Eqe6EhvKrZGgZlCym5QZmJI8XV8MMm9FLJqLNIFmlvllgmrboH2sMjnWEP37/hVtvTGB1sOJlzLcXqHsZlJ000lYaNyYxk1qYkQJW5Jxe0sDevWAq1phkbay1PNO0jf9G4fbCQfj7r9+Yu0PmrT5OXkdZtfzVGcpOhvJmmvpRibnqom/n0TdyzxmuF/BX20tb2Osiy3yTblSif6gg/PPvn/QNl7HVYVbz0A8LqOF0ckjbGZxTmYXaDoG9lMGs5NDcu2SUMkOgdyBzf+XiR8s8lNv8B1Dk6LEobj5fAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;     2023 11 20    9 18 51&quot; title=&quot;     2023 11 20    9 18 51&quot; src=&quot;/static/378f2ba5ca50b09b4d821fb5b0d5ca5f/694da/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-20%20%EC%98%A4%ED%9B%84%209.18.51.png&quot; srcset=&quot;/static/378f2ba5ca50b09b4d821fb5b0d5ca5f/103f2/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-20%20%EC%98%A4%ED%9B%84%209.18.51.png 165w,
/static/378f2ba5ca50b09b4d821fb5b0d5ca5f/748ba/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-20%20%EC%98%A4%ED%9B%84%209.18.51.png 330w,
/static/378f2ba5ca50b09b4d821fb5b0d5ca5f/694da/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-20%20%EC%98%A4%ED%9B%84%209.18.51.png 576w&quot; sizes=&quot;(max-width: 576px) 100vw, 576px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;응 ? 근데 왜 그대로 일까? 여전히 용량은 확보되지 않았다. 하지만, 다시 경로에 들어가보면 -.json 에 대한 데이터는 사라지고 없었다.&lt;/p&gt;
&lt;p&gt;확인해보니 docker container에 해당 부분을 쓰고 있으면 삭제를 해도 완벽히 지워지지않는다더라. 한번 재시작을 하고나서야 용량이 확보되었다.&lt;/p&gt;
&lt;h2 id=&quot;번외-1----왜-용량이-차기-시작했을까-&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%B2%88%EC%99%B8-1----%EC%99%9C-%EC%9A%A9%EB%9F%89%EC%9D%B4-%EC%B0%A8%EA%B8%B0-%EC%8B%9C%EC%9E%91%ED%96%88%EC%9D%84%EA%B9%8C-&quot; aria-label=&quot;번외 1    왜 용량이 차기 시작했을까  permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;번외 1 ) - 왜 용량이 차기 시작했을까 ?&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;로그 파일&lt;/strong&gt;: 웹 어플리케이션과 Docker 자체가 생성하는 로그 파일이 지속적으로 쌓일 수 있고 로그 파일들은 시간이 지남에 따라 디스크 공간을 차지한다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Docker 이미지와 컨테이너&lt;/strong&gt;: 차세대 코스콤 같은 경우, 어플리케이션 같은 경우, 3가지가 있다. 물론, 각자 다른 서버에 있지만 Processor(프로듀서 역할), Load(컨슈머 역할), Batch(스케줄러) 어플리케이션이 있다. 각각의 어플리케이션의 기능 개발, 장애, 수정을 할 경우, 빌드하고 배포 하므로 Docker 이미지 또는 컨테이너를 자주 업데이트하거나 재생성하는 경우가 많다. 이전 버전의 이미지나 사용되지 않는 컨테이너가 계속해서 디스크 공간을 차지할 수 있다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;데이터베이스&lt;/strong&gt;: 어플리케이션의 데이터베이스가 서버 내부에 저장되고 있고, 데이터가 지속적으로 추가되는 경우, 이는 디스크 공간을 차지하는 요인이 될 수 있는데 예를 들어, kafka streams 의 RocksDB 같은 경우에도 용량에 문제가 될 수도 있다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;캐시 및 임시 파일&lt;/strong&gt;: 시스템이나 어플리케이션에 의해 생성되는 캐시나 임시 파일들이 정기적으로 삭제되지 않는 경우도 있다.&lt;/p&gt;
&lt;h2 id=&quot;번외-2-----varlibdockercontainers-에-있던-json-파일의-정체는-무엇일까&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%B2%88%EC%99%B8-2-----varlibdockercontainers-%EC%97%90-%EC%9E%88%EB%8D%98-json-%ED%8C%8C%EC%9D%BC%EC%9D%98-%EC%A0%95%EC%B2%B4%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C&quot; aria-label=&quot;번외 2     varlibdockercontainers 에 있던 json 파일의 정체는 무엇일까 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;번외 2 ) -  /var/lib/docker/containers/ 에 있던 json 파일의 정체는 무엇일까?&lt;/h2&gt;
&lt;p&gt;이 파일은 Docker 컨테이너의 로그 파일이었다. 이 파일은 Docker 컨테이너에서 발생하는 모든 출력 및 에러 로그를 저장한다. 즉, 컨테이너 내부에서 실행되는 프로세스가 콘솔에 출력하는 모든 내용이 이 파일에 기록한다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;로그의 누적&lt;/strong&gt;: Docker 컨테이너는 기본적으로 로그를 계속해서 이 파일에 쓰며, 시간이 지남에 따라 파일 크기가 커질 수 있고 특히 로그가 많이 생성되는 애플리케이션이 실행되는 경우 더 빨리 누적된다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;컨테이너 재시작의 필요성&lt;/strong&gt; : 로그 파일을 직접 삭제하려고 해도, 해당 파일이 여전히 Docker 데몬에 의해 사용 중이라면 삭제가 반영이 되지 않는다. 컨테이너를 재시작하면 Docker는 새로운 로그 파일을 시작하고, 이전에 사용 중이던 로그 파일은 해제되어 삭제될 수 있음.&lt;/p&gt;
&lt;p&gt;또한, 중요한 로그도 있을 수 있으므로 함부로 지우면 안되고 또한 Docker 컨테이너의 로그 설정을 조정하여 로그의 최대 크기나 로테이션 수를 설정하면서 이번 문제 처럼 용량의 문제를 사전에 극복할 수 있다.&lt;/p&gt;</content:encoded><author>a_l_b_bloomer@naver.com</author></item><item><title><![CDATA[chromWebdriver 크롤 버전 이슈]]></title><description><![CDATA[시작 줌인터넷에서 스타줌을 오픈을 해야했다. 연예인 데이터를 간단히 크롤할 자료를 찾고 해당 어떻게 크롤을 할지 생각을 하고
간단할 줄 알았는데 .. 갑분싸.. 갑자기 버전의 문제가 생겼다. 그 당시에는 chrome version 이 갑자기 올랐고 이 버전이 호환되던 WebDriver…]]></description><link>https://gb-template.netlify.com/crawl20231020/</link><guid isPermaLink="false">https://gb-template.netlify.com/crawl20231020/</guid><category><![CDATA[crawl]]></category><pubDate>Fri, 20 Oct 2023 22:31:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;시작&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%8B%9C%EC%9E%91&quot; aria-label=&quot;시작 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;시작&lt;/h2&gt;
&lt;p&gt;줌인터넷에서 스타줌을 오픈을 해야했다. 연예인 데이터를 간단히 크롤할 자료를 찾고 해당 어떻게 크롤을 할지 생각을 하고
간단할 줄 알았는데 .. 갑분싸.. 갑자기 버전의 문제가 생겼다. 그 당시에는 chrome version 이 갑자기 올랐고 이 버전이 호환되던 WebDriver 버전이 호환이 맞지 않았다.
또한, 치명적인 실수인게 크롬을 자동 버전 업그레이드를 설정해놓았기 때문에 개발이 어려웠다. 즉, 114버전하고 118버전하고 문제가 생기는 이슈이다. 어떻게 해야할까?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;크롬 다운 그레이드&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;우선 급한대로 일정이 있고 개발을 해야하니 크롬을 다운시키고 chromWebDriver 의 버전을 호환되게끔 맞추려고 했다. 다만, 이 과정에서도 문제가 있었는데..&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;근데 해당 부분은 전체적으로 문제가 생기고 Mac 에서는 너무 어려운 과정이 있음.&lt;/li&gt;
&lt;li&gt;추가로 다른 사람이 또 추가 개발을 할때, 그사람도 다운그레이드해야한다는게 말이안됨.&lt;/li&gt;
&lt;li&gt;크롬 북마크등의 데이터가 사라짐&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;이러한 문제로 잠깐의 시도뿐 .. 그만 뒀다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;webdriverManager 로 강제 버전 수정&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;webdriverManager 로 강제 버전 수정&lt;/li&gt;
&lt;li&gt;강제로 버전을 넣으려고 해도 114 버전으로 됨. 근데 해당 부분이 User/min-yul 쪽 .cache 부분에 114가 남아있었다. 그래서 해당 부분 지우고 가져 오려했지만...&lt;/li&gt;
&lt;li&gt;하지만, 디폴트 url 이 &lt;a href=&quot;https://chromedriver.storage.googleapis.com/&quot;&gt;https://chromedriver.storage.googleapis.com/&lt;/a&gt; 이부분 이였고 여기는 114 버전이 마지막.&lt;/li&gt;
&lt;li&gt;그래서 나는 &lt;a href=&quot;https://googlechromelabs.github.io/chrome-for-testing/#stable&quot;&gt;https://googlechromelabs.github.io/chrome-for-testing/#stable&lt;/a&gt; 해당 부분으로 url 을 수정했고 다시 했으나 태그가 달라서 가져올 수 없었음.&lt;/li&gt;
&lt;li&gt;117 버전이 호환된다는 얘기를 듣고 &lt;a href=&quot;https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json&quot;&gt;https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json&lt;/a&gt; 해당 부분에 117 버전을 다운 받아서 넣었음.&lt;/li&gt;
&lt;/ol&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 87.87878787878788%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5ElEQVQ4y52U2ZKbMBBF+Z9UbLMakAAtICEZvCZ5z/9/xE2p7cx4vEwmfjgl6KIPraUVOb2C61P8HhfYDynGoYDT8ctESiZQKsMvV8CbEkqvoWUKir9AFLMCCS9gf5ygJoeUF1iUCRJWIH6BKAgSliPnBczpADV7SDeQOGX5eeT5lzkLeYGM5Wi3E9TxCO3tRXQm+Q9xFD4mQkKdYTnvIOcNmG6xKOM32bv0c6LrKrK2gt17iFGjtQGFtWBfln0QhnKzpsQw9RhmC+ktlLeoVPNcyB4I36ZMZCTd/DxBekOsRY3FOsaqSq9IaEz4de6ZKG85irb5QN0buOMRynuinyYau3GEdI6exTgib+5zo/cgJ8J7pXuMhyMUJTsM0wQdJNZCupFinTW4zQ1EtyWf1ytHWqZwsoYXFbaqxiRrrFmGb2WM70SCFcvup3y7qCRsSnQbh0HWMIrBaw6rGJSoiV7WGCSD6Kq7DXsoTJoCYvYwkpEoCM1FGGLhR6NiMLL+h5D6Oke3FRi2nno7tGLrDDpvsawzLKoES5ZjWedYXR36v+KHQu5b6CnsqIHyBq2R6KxGM0jwQTxpy08qbDYdCYUb6CzyXlDnSJKrT1vxoVAeFPxpD7ubYPczicxuIsTlJnom/APWfGH49PzZYwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;     2023 11 22    7 31 44&quot; title=&quot;     2023 11 22    7 31 44&quot; src=&quot;/static/b4966d299f055d8e8acc60813745af76/7c811/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%207.31.44.png&quot; srcset=&quot;/static/b4966d299f055d8e8acc60813745af76/103f2/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%207.31.44.png 165w,
/static/b4966d299f055d8e8acc60813745af76/748ba/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%207.31.44.png 330w,
/static/b4966d299f055d8e8acc60813745af76/7c811/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%207.31.44.png 660w,
/static/b4966d299f055d8e8acc60813745af76/d28e0/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%207.31.44.png 990w,
/static/b4966d299f055d8e8acc60813745af76/46e29/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%207.31.44.png 1136w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;&lt;strong&gt;!!&lt;/strong&gt;
그러나 계속 실행되지않았음. 이유는 m1, intel 용이 있는데 나는 계속 내 노트북이 m1 인줄알고 m1 으로 하고 있었음. &lt;br&gt;
intel로 바꿨더니 실행은 됬음. 근데 또 문제가 생김. 호환이 되지않음.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;해결 방법&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json&quot;&gt;https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json&lt;/a&gt;  해당 부분에서 버전을 확인했음.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;min&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;yul&lt;span class=&quot;token annotation punctuation&quot;&gt;@MacBook&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Pro&lt;/span&gt; drivers &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;wget https&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;edgedl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;me&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;gvt1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;com&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;edgedl&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;chrome&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;chrome&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;testing&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;118.0&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.5993&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.70&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;chromedriver&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;zip&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; 
&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2023&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;06&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;59&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;  https&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;edgedl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;me&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;gvt1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;com&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;edgedl&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;chrome&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;chrome&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;testing&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;118.0&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.5993&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.70&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;chromedriver&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;zip
edgedl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;me&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;gvt1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;com &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edgedl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;me&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;gvt1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;com&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; 해석 중&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;34.104&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.35&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.123&lt;/span&gt;
다음으로 연결 중&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; edgedl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;me&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;gvt1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;com &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edgedl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;me&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;gvt1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;com&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;34.104&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.35&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.123&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;443.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; 연결했습니다&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token constant&quot;&gt;HTTP&lt;/span&gt; 요청을 보냈습니다&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; 응답 기다리는 중&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;OK&lt;/span&gt;
길이&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;9256492&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8.8&lt;/span&gt;M&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;application&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;octet&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;stream&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
저장 위치&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; `chromedriver&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;zip&apos;

chromedriver&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;zip              &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;   &lt;span class=&quot;token number&quot;&gt;8.83&lt;/span&gt;M  &lt;span class=&quot;token number&quot;&gt;5.54&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;MB&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;s    &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;  &lt;span class=&quot;token number&quot;&gt;1.6&lt;/span&gt;s    

&lt;span class=&quot;token number&quot;&gt;2023&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;07&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;01&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5.54&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;MB&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; `chromedriver&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;zip&apos; 저장함 &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;9256492&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;9256492&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

min&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;yul&lt;span class=&quot;token annotation punctuation&quot;&gt;@MacBook&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Pro&lt;/span&gt; drivers &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ls&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;
chromedriver&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;zip
min&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;yul&lt;span class=&quot;token annotation punctuation&quot;&gt;@MacBook&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Pro&lt;/span&gt; drivers &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;unzip chromedriver&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;zip&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; 
&lt;span class=&quot;token class-name&quot;&gt;Archive&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  chromedriver&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;zip
  inflating&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; chromedriver&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;LICENSE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;chromedriver  
  inflating&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; chromedriver&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;chromedriver  
min&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;yul&lt;span class=&quot;token annotation punctuation&quot;&gt;@MacBook&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Pro&lt;/span&gt; drivers &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ls&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;
chromedriver&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64		chromedriver&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;zip
min&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;yul&lt;span class=&quot;token annotation punctuation&quot;&gt;@MacBook&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Pro&lt;/span&gt; drivers &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;cd chromedriver&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;
min&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;yul&lt;span class=&quot;token annotation punctuation&quot;&gt;@MacBook&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Pro&lt;/span&gt; chromedriver&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64 &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; ls
&lt;span class=&quot;token constant&quot;&gt;LICENSE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;chromedriver	chromedriver
min&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;yul&lt;span class=&quot;token annotation punctuation&quot;&gt;@MacBook&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Pro&lt;/span&gt; chromedriver&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64 &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;mv chromedriver &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;*&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;
min&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;yul&lt;span class=&quot;token annotation punctuation&quot;&gt;@MacBook&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Pro&lt;/span&gt; chromedriver&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64 &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;cd &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;*&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;
min&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;yul&lt;span class=&quot;token annotation punctuation&quot;&gt;@MacBook&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Pro&lt;/span&gt; drivers &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; ls
chromedriver			chromedriver&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64		chromedriver&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;mac&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;x64&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;zip
min&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;yul&lt;span class=&quot;token annotation punctuation&quot;&gt;@MacBook&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Pro&lt;/span&gt; drivers &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;resources 쪽에 drivers 에 해당 명령어 작성&lt;/li&gt;
&lt;/ol&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 47.27272727272727%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABUklEQVQoz4WRW27bMBAAdarYEsX3Q7RE1VKsNL3/RSYgnTpOgKIfg10uieGS2+Vl4lIisVjcbBi85GwFvRsf8V887//NO5c8yzax7JGyRlTU/xU9JD/kIko6nz1pCfisiZNBBcXJiEY9dLJf+XeGRv9Uq3lnomNeA74E5HzB50RePemXYwwaFRU6KWRUiCQZk0RExRDtneQR0TZZ7xVdbbfsmfz7wL0eTPvEfEQut4DOrgnNpJBJNdlPoXgSDsHQyaDwZcHs78jrG3YNhNeIiI6zlbzosXH65GsteFHiUa+cjaIbvCJdF+ztD3J/x18D09td6reALQ5bLHq2rbMxaeSkW15jXVdEUq3W9U4yrYWw3wjH0cjHRtiq1BM2R958u9SUBb047GowxaIupk32mdbhGAwyGtSkkckyRkPvRwY/tlj/eXCK3tZniQf36Y/fpv8BrKk8k1xEhW8AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;     2023 11 22    7 32 00&quot; title=&quot;     2023 11 22    7 32 00&quot; src=&quot;/static/1da6fc8d4c8392ed17741d5cab22034c/7c811/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%207.32.00.png&quot; srcset=&quot;/static/1da6fc8d4c8392ed17741d5cab22034c/103f2/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%207.32.00.png 165w,
/static/1da6fc8d4c8392ed17741d5cab22034c/748ba/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%207.32.00.png 330w,
/static/1da6fc8d4c8392ed17741d5cab22034c/7c811/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%207.32.00.png 660w,
/static/1da6fc8d4c8392ed17741d5cab22034c/d28e0/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%207.32.00.png 990w,
/static/1da6fc8d4c8392ed17741d5cab22034c/bb51b/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%207.32.00.png 1320w,
/static/1da6fc8d4c8392ed17741d5cab22034c/db5ee/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%207.32.00.png 1916w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;코드를 추가하자&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;System&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setProperty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;webdriver.chrome.driver&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ClassPathResource&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;drivers/chromedriver&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getFile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getAbsolutePath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;끝내며&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%81%9D%EB%82%B4%EB%A9%B0&quot; aria-label=&quot;끝내며 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;끝내며&lt;/h2&gt;
&lt;p&gt;해결방법은 무조건 있다.다음에도 같은 문제가 생겼을 때, 이걸로 해결하자.&lt;/p&gt;</content:encoded><author>a_l_b_bloomer@naver.com</author></item><item><title><![CDATA[[2] 서비스 캐싱 - 데이터 업데이트]]></title><description><![CDATA[첫 호출을 통해 @acheable 로 JVM 또는 Redis 에 캐싱을 하고 나면 해당 데이터는 TTL이 걸려있지 않으면 계속 유지된 상태로 남아있게 된다.
TTL…]]></description><link>https://gb-template.netlify.com/cacheloop20230524/</link><guid isPermaLink="false">https://gb-template.netlify.com/cacheloop20230524/</guid><category><![CDATA[spring]]></category><category><![CDATA[java]]></category><category><![CDATA[cache]]></category><pubDate>Wed, 24 May 2023 22:31:00 GMT</pubDate><content:encoded>&lt;p&gt;첫 호출을 통해 @acheable 로 JVM 또는 Redis 에 캐싱을 하고 나면 해당 데이터는 TTL이 걸려있지 않으면 계속 유지된 상태로 남아있게 된다.
TTL 을 통해서 시간이 지나 데이터가 삭제되고 또 다른 호출을 통해 같은 키의 다른 데이터를 캐싱하면 데이터가 업데이트가 된다.&lt;/p&gt;
&lt;p&gt;또 다른 방법으로는 주기적으로 데이터를 업데이트를 시킬 수 있다. 예를 들어, 데이터파이프라인을 통해 주기적으로 데이터가 들어올 때, 정해진 key에 업데이트를 해주거나 또는 @Scheduled 를 통해서 어플리케이션단에서 데이터를 업데이트 시켜줄 수 있다.&lt;/p&gt;
&lt;p&gt;데이터파이프라인 같은 경우, 레디스와 연동하여 상호 작용으로 데이터를 주기적으로 업데이트해줄 수 있고 이번 블로그에 글을 쓰는 부분은 어플리케이션단에서 Local 데이터 업데이트에 대한 부분을 글로 써 내려갈 예정이다.&lt;/p&gt;
&lt;br&gt;
&lt;h2 id=&quot;스프링-프레임워크에서-제공하는-캐싱관련-어노테이션에-대해-알아보자&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%8A%A4%ED%94%84%EB%A7%81-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC%EC%97%90%EC%84%9C-%EC%A0%9C%EA%B3%B5%ED%95%98%EB%8A%94-%EC%BA%90%EC%8B%B1%EA%B4%80%EB%A0%A8-%EC%96%B4%EB%85%B8%ED%85%8C%EC%9D%B4%EC%85%98%EC%97%90-%EB%8C%80%ED%95%B4-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90&quot; aria-label=&quot;스프링 프레임워크에서 제공하는 캐싱관련 어노테이션에 대해 알아보자 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;스프링 프레임워크에서 제공하는 캐싱관련 어노테이션에 대해 알아보자.&lt;/h2&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 92.12121212121212%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAABrElEQVQ4y4WU666DIBCEff8HrCZN/9jau/faq5bm22QoanoOyYQFlt0ZWIher5c7Ho9uvV5bX9e1q6rKUJalYRgGQ9/3s162EBHg8Xi4X63rOne9Xt1f7f1+fwOKyeFwcPv93mwSANiTsCgKs8/ns/lkWWb+AFWn08k9n89xQBYUkM0Ah6ZpTD7SWFNQehKBPM+/AWGAJDYQZCr/fr+bbEljjC8BpIS5kWQA/e12ayxwAGxiTQyQhpLNZmMsGbOmI/EBdbMstG3r2eLAmHXZOiLt40jAKGAoGSZhu91uXjI+jEOpgsonEjPkIgUJoWTYMEcA7NVq5ZbLpUuSxC0WC7ORPgoo2tiSDLiEy+XiJaOEs1NF7HY7s1UFPiCSdGsw+yUZHxISmDmSQUQkLKCeFxl5ftgEAVPJKmaOBqlxHPtjGhU2mZSR7KopPT1YIJ8kYgcr/JmbXQoO4a1NJbORRhXgKwVKoCrxAXlGyE3T1CQRVOUhyczpqeliBJKM6lA/SvizIJHGGMl6hjqeKTxDBioLlQvZ1Ov3Cf+88A+c/Ycw4YAlZwoYhv/df/gAKThweU1fDCAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;      &quot; title=&quot;      &quot; src=&quot;/static/c0ae143fc5a9c6ae203e28936db48950/7c811/%EC%BA%90%EC%8B%9C%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8.png&quot; srcset=&quot;/static/c0ae143fc5a9c6ae203e28936db48950/103f2/%EC%BA%90%EC%8B%9C%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8.png 165w,
/static/c0ae143fc5a9c6ae203e28936db48950/748ba/%EC%BA%90%EC%8B%9C%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8.png 330w,
/static/c0ae143fc5a9c6ae203e28936db48950/7c811/%EC%BA%90%EC%8B%9C%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8.png 660w,
/static/c0ae143fc5a9c6ae203e28936db48950/2d7cc/%EC%BA%90%EC%8B%9C%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8.png 985w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;글을 읽다보면 그 당시에는 이해했다고 생각할 수 있지만 결국에 남는 건 ‘이미지’에 대한 이해와 그에 따른 ‘키워드’ 기억이라고 생각한다.&lt;/p&gt;
&lt;p&gt;위의 그림을 보면 스프링에서 제공하는 어노테이션은 총 5가지다. 이 글에서 필요한 어노테이션은 @cacheable, @cachePut 이다. 인베스팅뷰, 줌투자 서비스를 운영하면서 데이터를 주기적으로 삭제를 하고 빈 상태로 유지하는 경우의 수는 없었으며 항상 데이터는 있되 주기적으로 업데이트가 필요로 해서 해당 2개의 어노테이션만 쓰고 있다.&lt;/p&gt;
&lt;p&gt;그림에서도 볼 수 있듯이 좀 더 설명을 해보자면,&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;@Cacheable&lt;/code&gt;&lt;/strong&gt; 어노테이션은 메서드의 반환값을 캐시에 저장하는 데 사용되고 메서드가 호출될 때, Spring은 먼저 해당 메서드의 매개변수를 기반으로 캐시에서 결과를 검색한다. 캐시된 값이 있으면, 메서드를 실행하지 않고 캐시된 값을 반환한다. 즉, 캐시된 값이 없을 경우에만 메서드가 실행되고, 반환값이 캐시에 저장된다&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;@CachePut&lt;/code&gt;&lt;/strong&gt; 어노테이션은 메서드가 반환하는 값을 캐시에 강제로 추가하거나 업데이트하는 데 사용됩니다. 메서드가 호출될 때마다 실행되며, 반환값을 캐시에 저장한다.&lt;/p&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 45.45454545454545%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABKklEQVQoz3VSy27CMBDk/3+qUoV66qE3UNVULSgpojEOfsePTLULRkCDldE6jjMzO/ailAJCzhl1XjFNE69baxlze+6xeERI7+M4cj0ej1BKIZ9F+HvJswL/CKnS6LoO6/Wa14g4xoDgDc/ZfZkAeso0T3iNGCOcc+xqv99DaQslO7SfrxBCsqAbLVq5hY+eScnxDWFtrxKmlDAMEk3zgb7/hXMWgzywSEkFO/mD5fszDlaw0/rvooYvpYTWGmFMnJkxhvbBhYSYMouEEPhwUkwwTmMrNggxXHK9cSjEAVoNMP0KRiv4ELBqWjy9vGHXK25Ta8OkRECg8TBD7z1yTshRsxuC1gqb7y9ulzKlDqjWw2OUPE94sX3OgwROWZ6uDzmjSuvXLd5fmz9kAb8Qo6afWAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;          &quot; title=&quot;          &quot; src=&quot;/static/99bd5f64c35cf823a62d9edb0d75da3d/7c811/%EC%BA%90%EC%8B%9C%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98.png&quot; srcset=&quot;/static/99bd5f64c35cf823a62d9edb0d75da3d/103f2/%EC%BA%90%EC%8B%9C%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98.png 165w,
/static/99bd5f64c35cf823a62d9edb0d75da3d/748ba/%EC%BA%90%EC%8B%9C%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98.png 330w,
/static/99bd5f64c35cf823a62d9edb0d75da3d/7c811/%EC%BA%90%EC%8B%9C%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98.png 660w,
/static/99bd5f64c35cf823a62d9edb0d75da3d/d28e0/%EC%BA%90%EC%8B%9C%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98.png 990w,
/static/99bd5f64c35cf823a62d9edb0d75da3d/99dcf/%EC%BA%90%EC%8B%9C%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98.png 1118w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
 그림을 보면 첫 호출을 통해  @Cacheable 을 이용하여 JVM 에 캐싱처리를 하고 있다. 만약 이게 TTL 이 걸려있으면 히트를 치지 못하고
DB에서 다시 데이터를 가져와서 JVM에 저장한다. 
&lt;p&gt;또한, @CachePut 을 이용하여 주기적으로 DB에서 데이터를 가져와서 데이터를 갱신시켜준다.&lt;/p&gt;
&lt;br&gt;
&lt;h2 id=&quot;아키텍처와-코드로-알아보자&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98%EC%99%80-%EC%BD%94%EB%93%9C%EB%A1%9C-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90&quot; aria-label=&quot;아키텍처와 코드로 알아보자 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;아키텍처와 코드로 알아보자.&lt;/h2&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 66.06060606060606%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaElEQVQ4y41S207CQBDt/3+O+KaR+ADEQCCAJIAgF41KtxdI2+1t22NmYUqh0jjJZC8ze2bOmTXyPEfZ6JxlmXbaq0zhZd7BfauBRusO8++ZzuOcazfCROLNnOJr/wkhBIIgKB4w4Ie7xWTzisl2DOHtLopWAFOVwJUO/MiDlBJJkhQPeCUj4BOHC4DrXKOWckZ7hf6yh+bgCc/DJlbmsp7yrUAZcLwd4bH7gGb/CRuxqgekjsrO7Zc7JZOh1LSr+uXVDtM0hVKqcD6zUQ7rywVYT/b8pK0RxzEOh4OesG3bsCwLjuPA931QjKYuLKHjlm3B3bvHexlgtB5i8N5Hb9HFanfU1oiiSAMSEAGSu64Lz/POgKdiHGPA4XqAzrSNzqyN5c/iCFimWKZMznYdPxPO4QUeEhUTYT3Efw3lrxwqQmsYhse9ynSxyrehy7qvxGAsA62mMAtJaju8FaOi9JiGR86DJH1/AW+x8sQmT3+EAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;          3&quot; title=&quot;          3&quot; src=&quot;/static/0ca8b536c1f49e46b2d3bf229cdb71fd/7c811/%EC%BA%90%EC%8B%9C%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%983.png&quot; srcset=&quot;/static/0ca8b536c1f49e46b2d3bf229cdb71fd/103f2/%EC%BA%90%EC%8B%9C%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%983.png 165w,
/static/0ca8b536c1f49e46b2d3bf229cdb71fd/748ba/%EC%BA%90%EC%8B%9C%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%983.png 330w,
/static/0ca8b536c1f49e46b2d3bf229cdb71fd/7c811/%EC%BA%90%EC%8B%9C%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%983.png 660w,
/static/0ca8b536c1f49e46b2d3bf229cdb71fd/d28e0/%EC%BA%90%EC%8B%9C%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%983.png 990w,
/static/0ca8b536c1f49e46b2d3bf229cdb71fd/bb51b/%EC%BA%90%EC%8B%9C%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%983.png 1320w,
/static/0ca8b536c1f49e46b2d3bf229cdb71fd/51ef2/%EC%BA%90%EC%8B%9C%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%983.png 1601w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;위의 아키텍처는 어플리케이션 상의 코드를 이해하기 쉽게 도식화한 것이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Slf4j&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Service&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@RequiredArgsConstructor&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@CacheConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cacheNames &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TempEhcacheConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;TEMP_STORE_BOOK&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; cacheManager &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheManagerType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;EHCACHE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TempCacheService&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RefreshableService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Per30seconds&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@CachePut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TempEhcacheConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;TEMP_STORE_BOOK_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; unless &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;#result == null&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TempResponse&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;refresh&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// return getTempData();&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Exception&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;There is an error `{}.refresh()` processing : {}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Cacheable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TempEhcacheConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;TEMP_STORE_BOOK_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; unless &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;#result == null&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TempResponse&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getTempData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// return Dao Response&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다른 비지니스 서비스 계층에서 &lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;@Cacheable&lt;/code&gt;&lt;/strong&gt; 이 붙어있는 getTempDate() 를 호출한다. 첫 호출했을 경우, 캐싱이 되고 호출을 안하더라도 어플리케이션이 띄워지고
주기적으로 스케줄링으로 인해 &lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;@CachePut&lt;/code&gt;&lt;/strong&gt; 이 호출되고 업데이트 및 삽입이 된다.
&lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;@CacheConfig&lt;/code&gt;&lt;/strong&gt; 를 통해 클래스 레벨에서 전체적으로 설정을 해줬다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TempEhcacheConfig&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;TEMP_STORE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;TEMP:CACHE:STORE:&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;TEMP_STORE_BOOK&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;TEMP_STORE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;BOOK&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;TEMP_STORE_BOOK_&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&apos;&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;TEMP_STORE_BOOK&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&apos;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;addTempStoreCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;net&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sf&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ehcache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;Configuration&lt;/span&gt; config&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        config&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;tempStoreCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        config&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;tempStoreCacheWithTTL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheConfiguration&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;tempStoreCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheConfigurationFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createWithTTL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;TEMP_STORE_BOOK&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;200L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheConfiguration&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;tempStoreCacheWithTTL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheConfigurationFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createWithTTL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;TEMP_STORE_BOOK&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;200L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;예시를 들기위해 TempEhcacheConfig 라고 했지만 각 도메인 및 서비스에 필요한 캐싱이 필요할 때, 추가로 확장해주면 된다. 예를 들어, TempEhcacheConfig 가 아니라
CookEhcacheConfig 처럼 확장있게 추가해주면 된다. 추가된 EhcacheConfig 는 밑 아래 코드의 EhCacheCachingManagerConfig 에 구현으로 추가하여 확장성을 늘릴 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Slf4j&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@EnableCaching&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;proxyTargetClass &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EhCacheCachingManagerConfig&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;CachingConfigurer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;TempEhcacheConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;NewsEhcacheConfig&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 모듈 캐시 기본 설정&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Boolean&lt;/span&gt; moduleCacheCacheEternal &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; moduleCacheEvictionPolicy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;LFU&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; moduleCacheMaxEntriesLocalHeap &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;500L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;/**
     * 캐시 등록
     * @return CacheManager
     */&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;ehCacheSettingManager&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; destroyMethod &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;shutdown&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;net&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sf&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ehcache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;CacheManager&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ehCacheManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;net&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sf&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ehcache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;Configuration&lt;/span&gt; config &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;net&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sf&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ehcache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;Configuration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;addTempStoreCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;addNewsCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;net&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sf&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ehcache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;CacheManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;newInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheManagerType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;EHCACHE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;CacheManager&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;cacheManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EhCacheCacheManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ehCacheManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheResolver&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;cacheResolver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SimpleCacheResolver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cacheManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;KeyGenerator&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;keyGenerator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SimpleKeyGenerator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheErrorHandler&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;errorHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SimpleCacheErrorHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;/**
     * 모듈 캐시 기본 설정을 적용하는 메소드
     * @param name 캐시명
     * @return CacheConfiguration
     */&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheConfiguration&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getDefaultModuleCacheConfiguration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;CacheConfiguration&lt;/span&gt; cacheConfiguration &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheConfiguration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        cacheConfiguration&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        cacheConfiguration&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setEternal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;moduleCacheCacheEternal&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        cacheConfiguration&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setMemoryStoreEvictionPolicy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;moduleCacheEvictionPolicy&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        cacheConfiguration&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setMaxEntriesLocalHeap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;moduleCacheMaxEntriesLocalHeap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; cacheConfiguration&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위에 글을 쓴 것 처럼 추가한 각각의 인터페이스를 다중 구현하여 확장할 수 있고 각 인터페이스의 디폴트 메소드로 구현한 로직을 &lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;ehCacheManager&lt;/code&gt;&lt;/strong&gt; 에 추가할 수 있다.
( &lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;ehCacheManager&lt;/code&gt;&lt;/strong&gt; 는 캐시의 생명주기를 관리하고 여러 캐시를 보유할 수 있다. )
즉, 확장성과 유지보수성에 좋은 코드라고 생각할 수 있다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;cacheResolver()&lt;/strong&gt;: 캐시 해석 로직을 제공한다. 특정 캐시 작업에 사용할 캐시를 결정하는 데 사용된다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;keyGenerator()&lt;/strong&gt;: 캐시 키 생성 로직을 제공한다. 캐시할 때 사용될 키를 생성하는 기본 키 생성기를 반환함.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;errorHandler()&lt;/strong&gt;: 캐시 작업 중 발생할 수 있는 오류를 처리하는 로직을 제공한다. 캐시 관련 오류를 처리하는 기본 오류 핸들러를 반환.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getDefaultModuleCacheConfiguration()&lt;/strong&gt;: 모듈 캐시의 기본 구성을 설정. 캐시 이름, 영속성, 메모리 저장소 추방 정책, 힙 내 최대 항목 수 등 캐시의 기본 설정을 구성함.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Slf4j&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@RequiredArgsConstructor&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RefreshableCacheScheduler&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ApplicationListener&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ApplicationReadyEvent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Environment&lt;/span&gt; environment&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RefreshableService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Per30seconds&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; refreshableServicePer30sList&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RefreshableService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Per60seconds&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; refreshableServicePer60sList&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;onApplicationEvent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ApplicationReadyEvent&lt;/span&gt; event&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;refreshPer60s&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;refreshPer30s&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Exception&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;environment&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;acceptsProfiles&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Profiles&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SystemMode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;LOCAL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SystemMode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;LOCAL_API&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Scheduled&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cron &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;0/30 * * * * *&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;refreshPer30s&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RefreshableService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Per30seconds&lt;/span&gt; service &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; refreshableServicePer30sList&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                service&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;refresh&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Exception&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;{} per 30 seconds service refresh failure!&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; service&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Scheduled&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cron &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;0/60 * * * * *&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;refreshPer60s&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RefreshableService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Per60seconds&lt;/span&gt; service &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; refreshableServicePer60sList&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                service&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;refresh&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Exception&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;{} per 60 seconds service refresh failure!&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; service&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;private final List&amp;lt;RefreshableService.Per30seconds&gt; refreshableServicePer30sList&lt;/code&gt;&lt;/strong&gt; 를 통해 서브 인스턴스 Per30seconds 를 구현하여
생성된 Bean을 전부 주입한다. 주입된 Bean 들을 순차적으로 &lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;@Scheduled&lt;/code&gt;&lt;/strong&gt; 붙은 각 메소드에서 주입된 Bean을 순차적으로 돌려서 데이터를 업데이트한다.&lt;/p&gt;</content:encoded><author>a_l_b_bloomer@naver.com</author></item><item><title><![CDATA[[1] 서비스 캐싱 - Local, Global]]></title><description><![CDATA[줌인터넷을 다니면서 여러 서비스를 오픈했다. 서빙하는 과정에서 캐싱은 중요하다. 클라이언트 개발자에게도 좋은 퍼포먼스를 내기위해 중요하며 서비스를 사용하는 사용자에게도 어플리케이션의 좋은 성능을 경험시켜주기 위해 서빙 속도는 중요하다. 줌투자(PC)와 인베스팅뷰(APP…]]></description><link>https://gb-template.netlify.com/cachelocalglobal20230523/</link><guid isPermaLink="false">https://gb-template.netlify.com/cachelocalglobal20230523/</guid><category><![CDATA[spring]]></category><category><![CDATA[java]]></category><category><![CDATA[cache]]></category><pubDate>Tue, 23 May 2023 22:31:00 GMT</pubDate><content:encoded>&lt;p&gt;줌인터넷을 다니면서 여러 서비스를 오픈했다. 서빙하는 과정에서 캐싱은 중요하다. 클라이언트 개발자에게도 좋은 퍼포먼스를 내기위해 중요하며 서비스를 사용하는 사용자에게도 어플리케이션의 좋은 성능을 경험시켜주기 위해 서빙 속도는 중요하다. 줌투자(PC)와 인베스팅뷰(APP) 은 금융에 대한 서비스다. 캐싱에 대한 처리는 당연히 했으며 해당 부분을 포스팅하려고 한다.&lt;/p&gt;
&lt;h2 id=&quot;가보자고---로컬-캐시&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B0%80%EB%B3%B4%EC%9E%90%EA%B3%A0---%EB%A1%9C%EC%BB%AC-%EC%BA%90%EC%8B%9C&quot; aria-label=&quot;가보자고   로컬 캐시 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;가보자고 - 로컬 캐시&lt;/h2&gt;
&lt;p&gt;Local 하게 캐싱을 해야할 때,&lt;/p&gt;
&lt;p&gt;정답은 없다. 하지만 보편적으로 지역적으로 캐싱을 해야할 때는 동기화에 문제가 없는 경우에 로컬 캐싱을 한다. 예를 들어, 내가 서비스를 하고 있는 줌투자, 인베스팅뷰를 예를 들겠다.&lt;/p&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 28.484848484848484%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABEklEQVQY05WQO0vEQBSF8zv9C2snFlqIlQv2giKChTZaWYmgFq6FsJWQxZjH5mFYEpPNw6gxIcknmWy0UAsvfJw7F+acmStNHhSapvkX0Gld19R1s6AWM2k6NZnP58RxLDQMQ6IoEtrO0jQVfZIkQn3f5yXLCIOA30rKsoyiKMjzfJH+s7qXdFRVBU3D63uOrD/xaD+jOCET3SJ7y5E0TaNFlmVM08S2bXRdFzPLskTfhvVmwhAI45Th/gmHZzccX9yxtXuE5fpI7QXDMFBVVdCbtbRnRVFEiOu6OI4j8DyP2WzGYHWD5bVN1ofbLA1WGN/LSGVZfqV+L/3vL/fL/yhLTkdj9s6vObi6ZedyhO4HfAI6Z762BvuSPAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;     2023 11 22    6 53 16&quot; title=&quot;     2023 11 22    6 53 16&quot; src=&quot;/static/d0cc744d50e522e0532f76bf5d492820/7c811/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.16.png&quot; srcset=&quot;/static/d0cc744d50e522e0532f76bf5d492820/103f2/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.16.png 165w,
/static/d0cc744d50e522e0532f76bf5d492820/748ba/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.16.png 330w,
/static/d0cc744d50e522e0532f76bf5d492820/7c811/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.16.png 660w,
/static/d0cc744d50e522e0532f76bf5d492820/d28e0/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.16.png 990w,
/static/d0cc744d50e522e0532f76bf5d492820/bb51b/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.16.png 1320w,
/static/d0cc744d50e522e0532f76bf5d492820/e97a1/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.16.png 1966w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;위와 같이 투자노트라든지 또 뉴스와 같은 콘텐츠 기반의 데이터 서빙은 글로벌하게 캐싱을 하지 않아도 된다. 왜? 사용자 입장에서 콘텐츠와 같은 부분은 크게 동기화 이슈 지장이 없기 때문이다. 가령, 1초의 간격으로 A라는 사람은 새로운 투자노트를 보게 될수도 B라는 사람은 못보게 될수도 있다. 다만, 그 1초에 큰 의의를 두지 않는다.&lt;/p&gt;
&lt;p&gt;좀 더 요약하자면 애플리케이션의 각 인스턴스가 자체적인 캐시를 유지하며, 다른 인스턴스와 캐시를 공유하지 않는 경우에 적합하다. 그래서 제한 적인 부분이 &lt;strong&gt;스케일 아웃&lt;/strong&gt;에 대한 제한이 있다. 애플리케이션이 여러 서버에 분산될 경우, 각 서버의 캐시는 독립적이므로 캐시 데이터의 일관성을 유지하기 어렵다.&lt;/p&gt;
&lt;p&gt;물론, 특수한 경우가 있을 수 있다. 콘텐츠 기반의 데이터라 해도 동기화에 중요한 콘텐츠라면 로컬 캐시를 쓰면 안된다. 자, 이제 코드를 보자.&lt;/p&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 583px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 53.93939393939393%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABbElEQVQoz41Sy06DUBTk/7/DuHFjYuLGjdH4iCsXxtoCbaFQCrSltLwKhTFz8BKsbeJNJudyXnfOHLS6rqHQNA0Oh0MHfvfjhPIfx+ivqgqaZVmwbRu00+lU7gwmSQLTNGFbtvgY8zwP2+0W4/G4y1V1aZpKYy2KIgwGA4xGI0lcrVZdw8ViITHDMATr9VoaMod+XdcxHA7h+z6yLGsbsnC5XMpr8/lcisqyFKimjG02Gyki4jgWVq7rSj6/i6IQIhq78igdSH2324lVWvLOk+e5PKLGo448Sk/RsL+E/mLYlKw4XhAEoDRkkhdFm/NDoF8rDPvOfpCjOo4jok8mExnPmc2QZWnLrKnRHDU9yVDdwzAUsRWCwIc9c2E4EUwvheWnSLLiV81ZhgRF3u/3At75+su7icubJ1zdPuPi+gH3b18U8DzDY7bdT8vFNQ1MN8bdqy64ffzEh+HJUv418t8HWhslJcK4Enuq5hsNCEyp1QWYggAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;     2023 11 22    6 53 58&quot; title=&quot;     2023 11 22    6 53 58&quot; src=&quot;/static/6213bb39adf3d4cc9b4515d406ce0394/6d62d/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.58.png&quot; srcset=&quot;/static/6213bb39adf3d4cc9b4515d406ce0394/103f2/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.58.png 165w,
/static/6213bb39adf3d4cc9b4515d406ce0394/748ba/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.58.png 330w,
/static/6213bb39adf3d4cc9b4515d406ce0394/6d62d/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.58.png 583w&quot; sizes=&quot;(max-width: 583px) 100vw, 583px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;모듈화와 재사용성에 용이하도록 구현이 된 코드이다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;코드 분리&lt;/strong&gt;: 캐시 구성을 각각의 독립적인 모듈(인터페이스)로 분리함으로써, 각 캐시 설정의 관리가 편해진다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;재사용성&lt;/strong&gt;: 동일한 유형의 캐시 구성이 다른 곳에서 필요할 경우, 해당 인터페이스를 구현함으로써 재사용에 용이하다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;확장성&lt;/strong&gt;: 새로운 캐시 유형이 필요한 경우, 새로운 인터페이스를 추가하고 기존 클래스에 구현추가만 하면 되므로 확장에 용이하다.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Slf4j&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@EnableCaching&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;proxyTargetClass &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EhCacheCachingManagerConfig&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; 
        &lt;span class=&quot;token class-name&quot;&gt;CachingConfigurer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;MarketEhcacheConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;NewsEhcacheConfig&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 모듈 캐시 기본 설정&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Boolean&lt;/span&gt; moduleCacheCacheEternal &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; moduleCacheEvictionPolicy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;LFU&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; moduleCacheMaxEntriesLocalHeap &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;500L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;/**
     * 캐시 등록
     * @return CacheManager
     */&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;ehCacheSettingManager&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; destroyMethod &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;shutdown&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;net&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sf&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ehcache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;CacheManager&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ehCacheManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;net&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sf&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ehcache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;Configuration&lt;/span&gt; config &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;net&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sf&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ehcache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;Configuration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;addMarketCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;addNewsCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;net&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sf&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ehcache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;CacheManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;newInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheManagerType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;EHCACHE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;CacheManager&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;cacheManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EhCacheCacheManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ehCacheManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheResolver&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;cacheResolver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SimpleCacheResolver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cacheManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;KeyGenerator&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;keyGenerator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SimpleKeyGenerator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheErrorHandler&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;errorHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SimpleCacheErrorHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;/**
     * 모듈 캐시 기본 설정을 적용하는 메소드
     * @param name 캐시명
     * @return CacheConfiguration
     */&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheConfiguration&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getDefaultModuleCacheConfiguration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;CacheConfiguration&lt;/span&gt; cacheConfiguration &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheConfiguration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        cacheConfiguration&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        cacheConfiguration&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setEternal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;moduleCacheCacheEternal&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        cacheConfiguration&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setMemoryStoreEvictionPolicy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;moduleCacheEvictionPolicy&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        cacheConfiguration&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setMaxEntriesLocalHeap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;moduleCacheMaxEntriesLocalHeap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; cacheConfiguration&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;//&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NewsEhcacheConfig&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;CE_NEWS&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;NEWS:CACHE:&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;CE_LATEST_TOP_NEWS&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;CE_NEWS&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;LATEST:TOP_NEWS&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;CE_LATEST_TOP_NEWS_&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&apos;&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;CE_LATEST_TOP_NEWS&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&apos;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;CE_LATEST_TOP_NEWS_TTL&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;addNewsCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;net&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sf&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ehcache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;Configuration&lt;/span&gt; config&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        config&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;latestTopNewsCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheConfiguration&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;latestTopNewsCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;CacheConfiguration&lt;/span&gt; configuration &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EhCacheCachingManagerConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDefaultModuleCacheConfiguration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;CE_LATEST_TOP_NEWS&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        configuration&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setEternal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        configuration&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setTimeToLiveSeconds&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;CE_LATEST_TOP_NEWS_TTL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; configuration&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;//&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Cacheable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cacheNames &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NewsEhcacheConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;CE_LATEST_TOP_NEWS&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
key &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NewsEhcacheConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;CE_LATEST_TOP_NEWS_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
unless &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;#result == null&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
cacheManager &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheManagerType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;EHCACHE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;token comment&quot;&gt;// logic&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;가보자고---글로벌-캐시&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B0%80%EB%B3%B4%EC%9E%90%EA%B3%A0---%EA%B8%80%EB%A1%9C%EB%B2%8C-%EC%BA%90%EC%8B%9C&quot; aria-label=&quot;가보자고   글로벌 캐시 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;가보자고 - 글로벌 캐시&lt;/h2&gt;
&lt;p&gt;Global 하게 캐싱을 해야할 때,&lt;/p&gt;
&lt;p&gt;동기화에 문제가 있는 경우 보통 레디스에 캐싱처리를 한다. 즉, 스케일 아웃할 때 데이터 정합성, 일관성에 문제가 있는 경우 로컬캐시가 아닌 레디스를 이용하여 캐싱처리를 한다.&lt;/p&gt;
&lt;p&gt;인베스팅뷰 같은 경우, 메코차트라든지 여러 종목에 대한 정보같은 경우 각 인스턴스에 다른 데이터가 캐싱되면 안된다. 즉, 동기화에 민감한 도메인이므로 이런 경우 레디스를 이용하여 캐싱을 한다.&lt;/p&gt;
&lt;p&gt;레디스에 해당 key에 대한 value가 있는 경우, 레디스에서 가져오고 만약 없는 경우 DB( I/O ) 에 데이터를 조회해서 레디스에 다시 저장하고 Client에 데이터를 쏴준다.&lt;/p&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 29.09090909090909%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/ElEQVQY012Ry27DIBBF/f/fVKVddFNl3Uht02RTRTV+xTEYMOBTDa6tKEhHMMNwdWcoUkrEGDMhBJxzG957usEzjpZcN034SuGVwpclvmu3tyvFNE25eJ5nrLWssVDXNWV9pW1bzDjSVwq7f0PtnuhedrjDOzEmYmJBBJumyU6ym66j7/uM1prbbWAw4nTCeY/TGns+YU9H7PcX7nIhxEDSnyR9zB0WIrK2KE5WQWMMSinOPxX9bcBonXPaWsyGw+gr4+8zrnolBrc4lHZl3bcs9o3RMCfm/ziPQvYNGU3AdQfc9YOUIsXjp4joirgOd3ePH7DkI1E0UsrnP8UJ0KS26hynAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;     2023 11 22    6 53 52&quot; title=&quot;     2023 11 22    6 53 52&quot; src=&quot;/static/365213bb9d9a526f4471338ac9304d88/7c811/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.52.png&quot; srcset=&quot;/static/365213bb9d9a526f4471338ac9304d88/103f2/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.52.png 165w,
/static/365213bb9d9a526f4471338ac9304d88/748ba/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.52.png 330w,
/static/365213bb9d9a526f4471338ac9304d88/7c811/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.52.png 660w,
/static/365213bb9d9a526f4471338ac9304d88/bc563/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.52.png 736w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Slf4j&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@RequiredArgsConstructor&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@EnableCaching&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;proxyTargetClass &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RedisCachingManagerConfig&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; 
		&lt;span class=&quot;token class-name&quot;&gt;OverseasRedisConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;StockRedisConfig&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RedisConnectionFactory&lt;/span&gt; redisConnectionFactory&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheManagerType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;REDIS&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheManager&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;redisCacheManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;RedisCacheConfiguration&lt;/span&gt; config &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getRedisCacheConfiguration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RedisCacheConfiguration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; configMap &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;addOverSeasRedisCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; configMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;addStockCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; configMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RedisCacheManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// change search all from keys to scan&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;RedisCacheWriter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;nonLockingRedisCacheWriter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                redisConnectionFactory&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token class-name&quot;&gt;BatchStrategies&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;scan&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;CACHE_BATCH_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cacheDefaults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;withInitialCacheConfigurations&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;configMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RedisCacheConfiguration&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getRedisCacheConfiguration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ObjectMapper&lt;/span&gt; objectMapper &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ObjectMapper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        objectMapper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;disable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SerializationFeature&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;WRITE_DATES_AS_TIMESTAMPS&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        objectMapper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;activateDefaultTypingAsProperty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;LaissezFaireSubTypeValidator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instance&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;ObjectMapper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DefaultTyping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NON_FINAL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&quot;@class&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        objectMapper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;registerModules&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JavaTimeModule&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Jdk8Module&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RedisCacheConfiguration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;defaultCacheConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;disableCachingNullValues&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// null value 의 경우 캐시 X&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;serializeKeysWith&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;token class-name&quot;&gt;RedisSerializationContext
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SerializationPair&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fromSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StringRedisSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;serializeValuesWith&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;token class-name&quot;&gt;RedisSerializationContext
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SerializationPair&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fromSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GenericJackson2JsonRedisSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;objectMapper&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;disableKeyPrefix&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;overSeasCacheKeyGenerator&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;KeyGenerator&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;overSeasCacheKeyGenerator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;OverSeasRedisKeyGenerator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// &lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StockRedisConfig&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;CE_STOCK&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;STOCK:CACHE:&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;CE_STOCK_RELATED&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;CE_STOCK&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;RELATED&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;CE_STOCK_RELATED_&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&apos;&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;CE_STOCK_RELATED&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&apos;&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;CE_STOCK_STATEMENTS_TTL&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 하루&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;addStockCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RedisCacheConfiguration&lt;/span&gt; config&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RedisCacheConfiguration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; map&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;allStocksStatements&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; map&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;stockRelated&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; map&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;allStocksStatements&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RedisCacheConfiguration&lt;/span&gt; config&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RedisCacheConfiguration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; configMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        configMap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;CE_STOCK_STATEMENTS&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; config&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        configMap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;CE_STOCK_STATEMENTS&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; config&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;entryTtl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Duration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ofSeconds&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;CE_STOCK_STATEMENTS_TTL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;로컬캐시인 ehcache 와 같은 로직이다. 설정에 대한 부분은 RedisCachingManagerConfig 에 설정을 해놓고 해당 데이터에 대한 키값 설정과 TTL 은 인터페이스를 이용해서 구현한다.&lt;/p&gt;
&lt;p&gt;인베스팅뷰와 줌투자 같은 경우, 데이터파이프 라인을 이용하여 레디스에 데이터를 적재하고 그 레디스를 인베스팅뷰, 줌투자 각각 동일한 데이터로 서빙을 한다.&lt;/p&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 29.09090909090909%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABDUlEQVQY012R207DMBBE8//fAzwioQrEM0W80ObWJkRtMU7s1I4vGTRGBolIo81uNGcvKZxzmKWEEALzPMN7D2MMlsXCWAurNUYpMU0TrLXpG2MIAeu6/irGmGqFUgpKiATUWicja8uy4GoMjrt3NFWJsqpwPp+TidCscRyTOAyhBQF8mLATQQRKTqU0PsoSbV2jadtU49Q0E8K873t0XZfe6S+4YgwhdSaUQHZmbq3B0NQ4DT2GoYeaRsTIk1zTaSieLCtNmHfPQEbvI5wRkMcHiMMG1esd9tsb7Le3+Gzu4c0JIf5s9V9FhmVgTBGIboKXLwjTGy6HZwzVI7rdBpf2CdF9IUT+iD9v9n8DI/rNzygftLQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;     2023 11 22    6 53 30&quot; title=&quot;     2023 11 22    6 53 30&quot; src=&quot;/static/1d219a91d8db43c0d9993c5cf8e3009f/7c811/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.30.png&quot; srcset=&quot;/static/1d219a91d8db43c0d9993c5cf8e3009f/103f2/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.30.png 165w,
/static/1d219a91d8db43c0d9993c5cf8e3009f/748ba/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.30.png 330w,
/static/1d219a91d8db43c0d9993c5cf8e3009f/7c811/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.30.png 660w,
/static/1d219a91d8db43c0d9993c5cf8e3009f/8aec5/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-11-22%20%EC%98%A4%ED%9B%84%206.53.30.png 942w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FinanceRealTimeStockResponse&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getRealTimeStock&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; stockCode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token class-name&quot;&gt;HashOperations&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; hashOperations &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; financeRedisTemplate&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;opsForHash&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token class-name&quot;&gt;Optional&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;StockStandardCode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; optionalStockStandardCode &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getStockStandardCode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;stockCode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; standardCode &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; optionalStockStandardCode
          &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;orElseThrow&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getStandardCode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; entries &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; hashOperations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;StockRedisKey&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;StockKey&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;standardCode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

			&lt;span class=&quot;token comment&quot;&gt;// stock, stockTrading, stockIndicator&lt;/span&gt;
      &lt;span class=&quot;token class-name&quot;&gt;AStock&lt;/span&gt; aStock &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; objectMapper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;convertValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entries&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;StockRedisKey&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;STOCK_HASH_KEY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Stock&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token class-name&quot;&gt;AStockTrading&lt;/span&gt; aStockTrading &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; objectMapper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;convertValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entries&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;StockRedisKey&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;STOCK_TRADING_HASH_KEY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StockTrading&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token class-name&quot;&gt;AStockIndicator&lt;/span&gt; aStockIndicator &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; objectMapper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;convertValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entries&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;StockRedisKey&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;STOCK_INDICATOR_HASH_KEY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StockIndicator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AStockResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Stock&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; aStockTrading&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; aStockIndicator&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; logoImageUri&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Exception&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;getRealTimeStock error :: {}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AStockResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;//&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RedisConfig&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

  &lt;span class=&quot;token annotation punctuation&quot;&gt;@Value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;${spring.redis.host}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; redisHost&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token annotation punctuation&quot;&gt;@Value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;${spring.redis.port}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; redisPort&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LettuceConnectionFactory&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;redisConnectionFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;RedisStandaloneConfiguration&lt;/span&gt; redisStandaloneConfiguration &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RedisStandaloneConfiguration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    redisStandaloneConfiguration&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setHostName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;redisHost&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    redisStandaloneConfiguration&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setPort&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;redisPort&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LettuceConnectionFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;redisStandaloneConfiguration&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ObjectMapper&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;objectMapper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;ObjectMapper&lt;/span&gt; objectMapper &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ObjectMapper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    objectMapper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;disable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SerializationFeature&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;WRITE_DATES_AS_TIMESTAMPS&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    objectMapper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;registerModules&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JavaTimeModule&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Jdk8Module&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; objectMapper&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;ARedisTemplate&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RedisTemplate&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ARedisTemplate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ObjectMapper&lt;/span&gt; objectMapper&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;GenericJackson2JsonRedisSerializer&lt;/span&gt; serializer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GenericJackson2JsonRedisSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;objectMapper&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;RedisTemplate&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; redisTemplate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RedisTemplate&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    redisTemplate&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setConnectionFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;redisConnectionFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    redisTemplate&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setKeySerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StringRedisSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    redisTemplate&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setValueSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    redisTemplate&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setHashKeySerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StringRedisSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    redisTemplate&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setHashValueSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; redisTemplate&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;redisAsyncCommands&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RedisAsyncCommands&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;redisAsyncCommands&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ObjectMapper&lt;/span&gt; objectMapper&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;RedisURI&lt;/span&gt; redisURI &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RedisURI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;redisHost&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; redisPort&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;RedisClient&lt;/span&gt; redisClient &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RedisClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;redisURI&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; redisClient&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StringObjectRedisCodec&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;objectMapper&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;async&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded><author>a_l_b_bloomer@naver.com</author></item><item><title><![CDATA[객체 지향 설계 5원칙 - SOLID]]></title><description><![CDATA[시작 나는 과거에 '스프링 입문을 위한 자바 객체 지향의 원리와 이해'를 읽었다. '음 그렇군.' 하고 그냥 읽었다. 개발자 사이에서 얘기하는 개구리책이며 잘읽히는 '갓책'으로 유명하다. 나는 이 책을 다시 보려한다. 그 첫번째 시작점은 SOLID. 왜 SOLID…]]></description><link>https://gb-template.netlify.com/solid20220501/</link><guid isPermaLink="false">https://gb-template.netlify.com/solid20220501/</guid><category><![CDATA[theory]]></category><pubDate>Sun, 01 May 2022 22:31:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;시작&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%8B%9C%EC%9E%91&quot; aria-label=&quot;시작 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;시작&lt;/h2&gt;
&lt;p&gt;나는 과거에 &apos;스프링 입문을 위한 자바 객체 지향의 원리와 이해&apos;를 읽었다. &apos;음 그렇군.&apos; 하고 그냥 읽었다. 개발자 사이에서 얘기하는 개구리책이며 잘읽히는 &apos;갓책&apos;으로 유명하다. 나는 이 책을 다시 보려한다. 그 첫번째 시작점은 SOLID.&lt;/p&gt;
&lt;h2 id=&quot;왜-solid-를-공부-하는가-&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%99%9C-solid-%EB%A5%BC-%EA%B3%B5%EB%B6%80-%ED%95%98%EB%8A%94%EA%B0%80-&quot; aria-label=&quot;왜 solid 를 공부 하는가  permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;왜 SOLID 를 공부 하는가 ?&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;&apos;도구를 올바르게 사용하는 법이 있는 것처럼 객체 지향의 특성을 올바르게 사용하는 방법, 즉 객체 지향 언어를 이용해 객체 지향 프로그램을 올바르게 설계해 나가는 방법이나 원칙이 존재할까?&apos;&lt;/strong&gt; 결론은 응집도는 높이고 결합도는 낮추는 원칙이라 할 수 있다.
책의 일부분이다. 이 문장으로 부터 시작을 해야한다.&lt;/p&gt;
&lt;h2 id=&quot;응집도와-결합도가-뭔데---feat-의존성&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%9D%91%EC%A7%91%EB%8F%84%EC%99%80-%EA%B2%B0%ED%95%A9%EB%8F%84%EA%B0%80-%EB%AD%94%EB%8D%B0---feat-%EC%9D%98%EC%A1%B4%EC%84%B1&quot; aria-label=&quot;응집도와 결합도가 뭔데   feat 의존성 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;응집도와 결합도가 뭔데? - feat. 의존성&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;결합도&lt;/strong&gt; : 모듈(클래스) 간의 상호 의존 정도로서 결합도가 낮으면 모듈 간의 상호 의존성이 줄어들어 객체의 재사용이나 수정, 유지보수가 용이
&lt;strong&gt;응집도&lt;/strong&gt; : 하나의 모듈 내부에 존재하는 구성 요소들. 응집도가 높은 모듈은 하나의 책임에 집중하고 독립성인 높아져 재사용이나 기능, 유지보수가 용이&lt;/p&gt;
&lt;p&gt;너무 말이 어렵다. 코드를 보고 간단하게 생각하자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Requiredargsconstructor&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Service&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Service&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Repository&lt;/span&gt; repository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;코드를 보자. Service 라는 모듈은 Repository 라는 모듈을 &lt;strong&gt;의존&lt;/strong&gt;하고 있다. 즉, Service라는 모듈은 Repository라는 모듈이 없으면 안된다. Service는 Respository에 의존하고 있다는 것이다. 하지만 Repositroy는 Service가 있든 말든 상관이 없다. 이게 바로 의존성이다. 그럼 &lt;strong&gt;결합도&lt;/strong&gt;은?  그거나 그거다 ! 의존성은 결합도이라고도 이야기 하며, 모듈이나 함수간에 얼마나 밀접하게 연결되어 있는가를 표현하는 말일뿐!&lt;/p&gt;
&lt;p&gt;그럼 &lt;strong&gt;응집도&lt;/strong&gt;는? 이부분은 되게 애매 모호했다. 구글링을 해보니 클린코드 177page에 좋은 글이 있다는 것을 발견했고 곧바로  집에 있는 책을 보고 이해해버렸다. 누구든 이 글을 보면 쉽게 이해할 수 있을 것이라 생각한다.&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/50820ed1-a7c4-4330-bc57-b7c6c591bda7/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;h2 id=&quot;srp--single-responsibiliy-principle---단일-책임&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#srp--single-responsibiliy-principle---%EB%8B%A8%EC%9D%BC-%EC%B1%85%EC%9E%84&quot; aria-label=&quot;srp  single responsibiliy principle   단일 책임 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;SRP [ Single Responsibiliy Principle ] : 단일 책임&lt;/h2&gt;
&lt;p&gt;단일 책임. 말 변경해야 하는 이유가 오직 하나 뿐이어야한다. 무슨 말이냐면, 하나의 클래스 또는 하나의 메소드 등 역할과 책임이 많으면 안되고 단 하나! 의 역할과 책임이 있어야 한다는 말이다.
돌아가지 않고 쉽게 이해하기 위해서는 코드를 보는 것이 가장 좋다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Allargsconstructor&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; companyNumber&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; jobless &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; employee &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1010L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이게 어떤 의미인가? 백수에겐 회사 번호란 존재하지 않다. 즉, Person이라는 클래스에 책임을 전부 다 주지 않고 백수와 직장인의 클래스를 분리해야 하는 것이다. 그래야 &apos;단일 책임&apos;이다.&lt;/p&gt;
&lt;p&gt;다른 예를 보자. 이번에는 메소드다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Boolean&lt;/span&gt; jobless &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    	&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Boolean&lt;/span&gt; employee &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    	&lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        
    	&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sayJobState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    		&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            		&lt;span class=&quot;token function&quot;&gt;sout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;직장인입니다.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
               		&lt;span class=&quot;token function&quot;&gt;sout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;직장인이 아닙니다.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;메서드가 단일 책임 원칙을 지키지 않을 경우 나타나는 가장 대표적인 것이 분기처리를 위한 if문이다. 즉, 이러한 경우&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	abstart &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sayJobState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Jobless&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Employee&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;추상 클래스로 추상화를 하고 각 Jobless, Employee 클래스에서 상속을 받아 sayJobState를 if문이 아닌 각자 구현을 해주면서 단일 책임 원칙을 적용할 수 있다.&lt;/p&gt;
&lt;h2 id=&quot;ocp--open-closed-principle---개방-폐쇄&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#ocp--open-closed-principle---%EA%B0%9C%EB%B0%A9-%ED%8F%90%EC%87%84&quot; aria-label=&quot;ocp  open closed principle   개방 폐쇄 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;OCP [ Open Closed Principle ] : 개방 폐쇄&lt;/h2&gt;
&lt;p&gt;너무나 당연한 얘기. 확장에 대해서는 열리고, 변경에 대해서는 닫힌다. 자신의 확장에는 열려 있고, 주변의 변화에 대해서는 닫혀 있어야 한다. 너무 어렵다. 근데 이미 우리가 항상 코딩하는 스타일이다. 쉽게 보자.&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/7b162a9b-4a5c-41c6-9f7b-d5902f297994/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;Controller에서 ServiceInterface를 의존하고 있다. 그림을 보고 코드를 짜보자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Requiredargsconstructor&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Controller&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Controller&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ServiceInterface&lt;/span&gt; serviceinterface&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 Controller는 ServiceInterface를 주입받고 있다. 그리고 실제로 Controller에서 쓰는 Service는 Interface에 구현된 구현체 ServiceImplementation을 쓴다. 그럼 여기서 같은 Service하나가 추가 되어야하고 그 Service는 겉으로 보기에는 똑같은 기능이지만[ 물론 결과값은 비지니스로직마다 다름] 내부 비지니스 로직이 다른 구현체. 즉, ServiceImplementation2가 있을 때, 어떻게 되는가?
간단히 Controller의 Interface 주입되는 부분은 가만히 냅두고 ServiceImplementation2를 추가해주면 된다.&lt;/p&gt;
&lt;p&gt;간단히 요약하자. Service 입장에서는 자신이 &lt;strong&gt;확장&lt;/strong&gt;되는 것에 개방적이고 Controller 입장에서는 주변의 변화에 전혀 영향이 가지않는 &lt;strong&gt;폐쇄&lt;/strong&gt;돼있다고 말할 수 있다.&lt;/p&gt;
&lt;p&gt;이러한 원칙으로 &lt;strong&gt;유연성&lt;/strong&gt;, &lt;strong&gt;재사용성&lt;/strong&gt;, &lt;strong&gt;유지보수성&lt;/strong&gt; 을 얻을 수 있다.&lt;/p&gt;
&lt;h2 id=&quot;lsp--liskov-substituion-principle---리스코프-치환&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#lsp--liskov-substituion-principle---%EB%A6%AC%EC%8A%A4%EC%BD%94%ED%94%84-%EC%B9%98%ED%99%98&quot; aria-label=&quot;lsp  liskov substituion principle   리스코프 치환 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;LSP [ Liskov Substituion Principle ] : 리스코프 치환&lt;/h2&gt;
&lt;p&gt;내가 가장 어려워하는 부분이다. 이름부터가 이상하다. 리스코프.
쉽게 이해하기 위해서는 리스코프 치환 원리가 잘된 것과 안된 것을 보는 것이 가장 쉬울 것같다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token number&quot;&gt;1.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;MOTHER&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GGOM&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;ANIMAL&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;DURI&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DOG&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;1번의 예시를 보자. 아들을 낳고 곧바로 엄마의 역할을 주고 있다. 2번의 예시는 강아지가 태어나고 그 동물의 이름은 DURI이다. 직감적으로 1번은 이상하고 2번은 맞다는 것을 알수 있다. 1번은 원칙에 어긋나고 2번은 원칙에 맞다는 것.&lt;/p&gt;
&lt;p&gt;&apos;&lt;strong&gt;하위 클래스의 인스턴스는 상위형 객체 참조 변수에 대입해 상위 클래스의 인스턴스 역할을 하는데 문제가 없어야한다.&lt;/strong&gt;&apos;&lt;/p&gt;
&lt;p&gt;결국 리스코프 치환 원칙은 객체 지향의 상속이라는 특성을 올바르게 활용하면 자연스럽게 얻게 되는 것이다. 아마 여러 개발자들이 리스코프 치환이라는 개념을 모르지만 충분히 이 원칙을 지키면서 개발하고 있을 것이라고 생각한다.&lt;/p&gt;
&lt;h2 id=&quot;isp--interface-segregation-principle--인터페이스-분리&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#isp--interface-segregation-principle--%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4-%EB%B6%84%EB%A6%AC&quot; aria-label=&quot;isp  interface segregation principle  인터페이스 분리 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ISP [ Interface Segregation Principle ] :인터페이스 분리&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;클라이언트는 자신이 사용하지 않는 메서드에 의존 관계를 맺으면 안된다.&lt;/strong&gt;
만약, 한명의 남자가 어떤 여자에 남자친구고 어떤 부모의 아들이며 어떤 회사의 개발자라면 그 남자에 대한 역할이 너무 많다. 그래서 그 역할을 분리하는 목적으로 하나의 방법인 각 역할에 따른 남자친구, 아들, 개발자 각각의 클래스를 두어 역할을 분리하는 방법이 있다.&lt;/p&gt;
&lt;p&gt;근데 이 방법은 단일 책임 원칙에 적합하나 방법이 이것이 최선이었을까?&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/48edffa6-524e-4249-9f6b-aecf18ff9f33/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;인터페이스를 다중 상속하여 다중 인격화를 시키면 굳이 클래스를 분리하지않아도 가능하다.&lt;/p&gt;
&lt;h2 id=&quot;dip--dependency-inversion-principle---의존-역전&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#dip--dependency-inversion-principle---%EC%9D%98%EC%A1%B4-%EC%97%AD%EC%A0%84&quot; aria-label=&quot;dip  dependency inversion principle   의존 역전 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;DIP [ Dependency Inversion Principle ] : 의존 역전&lt;/h2&gt;
&lt;p&gt;DIP. 의존 역전에 대해서 공부를 해보니 SOLID의 O. 개방 폐쇄 원칙하고 비슷했다. 좀더 이해하기 쉽게 이부분 또한 그림으로 이해해보자.
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/2ac4e143-1f85-4ad6-879a-73aa8245c0ce/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
차는 스노우타이어에 의존적이다. 이 타이어가 있어야 돌아간다. 하지만 차는 겨울의 계절이 지나가면 의존적이지 않게 된다. 그래서 다른 타이어로 바꿔야한다. 즉, &lt;strong&gt;의존하기에 부서지기 쉬움&lt;/strong&gt;이라는 단점이 있다. 어떻게 개선해야할까?
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/91368965-373a-49e8-b2f5-332f47bbc12c/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;자신보다 변하기 쉬운 것에 의존하던 것을 추상화된 인터페이스나 상위클래스를 두어 변하기 쉬운 것의 변화에 영향받지 않게 하는것이 &lt;strong&gt;의존 역전 원칙&lt;/strong&gt;이다.&lt;/p&gt;
&lt;h2 id=&quot;누군가-물어-볼때&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%88%84%EA%B5%B0%EA%B0%80-%EB%AC%BC%EC%96%B4-%EB%B3%BC%EB%95%8C&quot; aria-label=&quot;누군가 물어 볼때 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;누군가 물어 볼때&lt;/h2&gt;
&lt;p&gt;누군가 : 객체 지향 설계 5법칙 말해보세요.&lt;/p&gt;
&lt;p&gt;급할 필요 없이. SOLID 부터 생각하고 곧바로 앞글자만 따고 차근차근 얘기하기.
하나하나 차근차근 &lt;strong&gt;S&lt;/strong&gt; : 싱글,&lt;strong&gt; O&lt;/strong&gt; : 오픈, 클로스 &lt;strong&gt;L&lt;/strong&gt; : 리스코프, &lt;strong&gt;I&lt;/strong&gt; : 인터페이스, &lt;strong&gt;D&lt;/strong&gt; : 의존&lt;/p&gt;
&lt;h2 id=&quot;끝내며&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%81%9D%EB%82%B4%EB%A9%B0&quot; aria-label=&quot;끝내며 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;끝내며&lt;/h2&gt;
&lt;p&gt;공부를 하면서 느낀 것은 원칙을 모르면서도 이미 개발을 할때 고려했던 부분이 많았다는 점이다.
그래서 이게 굳이 원리를 알아가면서까지 외울필요가 있을까? 싶기도 하다. 하지만 누군가에게 지식을 전파할 때는 꼭 필요하다고 생각한다. 나는 궁극적으로 이런 방향성을 갖고 있기에 오늘 투자한 시간이 굉장히 값지다.&lt;/p&gt;</content:encoded><author>a_l_b_bloomer@naver.com</author></item><item><title><![CDATA[JPA 영속성 관리]]></title><description><![CDATA[시작 JPA 영속성 관리에 대해서 한번 정리해볼 필요가 있었다.  🤔 EntityFactory EntityManager 이러한 팩토리는 비용이 많이 들기에 하나의 애플리케이션 전체에서 공유하도록 설계되어 있다. 하지만 매니저는 비용이 적기 때문에 많이 만들어도 무방하다. 그럼 여기서 생각해보자. 팩토리는…]]></description><link>https://gb-template.netlify.com/jpa120220421/</link><guid isPermaLink="false">https://gb-template.netlify.com/jpa120220421/</guid><category><![CDATA[java]]></category><category><![CDATA[spring]]></category><pubDate>Thu, 21 Apr 2022 22:31:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;시작&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%8B%9C%EC%9E%91&quot; aria-label=&quot;시작 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;시작&lt;/h2&gt;
&lt;p&gt;JPA 영속성 관리에 대해서 한번 정리해볼 필요가 있었다.  🤔&lt;/p&gt;
&lt;h2 id=&quot;entityfactory-entitymanager&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#entityfactory-entitymanager&quot; aria-label=&quot;entityfactory entitymanager permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;EntityFactory EntityManager&lt;/h2&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/9c293bdc-ff4c-4b5c-849f-9f80f009dbc7/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
우선 팩트부터 얘기하겠다. 엔티티 매니저 팩토리는 엔티티 매니저를 만든다.JPA 구현체들은 EntityManagerFactory를 생성할 때 커넥션 풀도 만든다. &lt;strong&gt;엔티티 매니저&lt;/strong&gt;는 트랜잭션을 시작할 때, 데이터베이스 연결에 꼭 필요한 &lt;strong&gt;커넥션을 획득&lt;/strong&gt;한다.
&lt;p&gt;이러한 팩토리는 비용이 많이 들기에 하나의 애플리케이션 전체에서 공유하도록 설계되어 있다. 하지만 매니저는 비용이 적기 때문에 많이 만들어도 무방하다.&lt;/p&gt;
&lt;p&gt;그럼 여기서 생각해보자. 팩토리는 1개고 매니저는 여러개다. 이러한 설계 구조에서 여러 스레드가 있다. 팩토리는 여러 스레드가 공유를 동시에 할 수 있고 매니저는 동시성 문제로 스레드 간에 &lt;strong&gt;절대&lt;/strong&gt; 공유를 할 수 없다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;그럼 너무나도 당연한게 여러 스레드가 1개의 팩토리에 동시에 접근해도 괜찮게 설계가 되어 있을 것이며 반대로 매니저는 여러 스레드가 한번에 공유를 하면 안되지 않는가? 또한 어떻게 보면 그게 당연하다. 비용이 적게 들기 때문에.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;나는 뭐.. 이렇게 외운다.  👀&lt;/p&gt;
&lt;p&gt;이제 여기서 &lt;strong&gt;엔티티 매니저&lt;/strong&gt;는 엔티티를 저장, 수정, 삭제 그리고 조회의 기능을 갖고 있고 이러한 엔티티관련 일들을 모두 처리한다. 즉, 엔티티를 관리하는 관리자라고 생각하면 된다. ( + 트랜잭션을 관리하는 트랜잭션 관리자도 따로 있다 )&lt;/p&gt;
&lt;p&gt;( + 추가 ) 커넥션풀은 하나의 기술일 뿐인데 이 커넥션을 관리하고 저장되는 부분을 WAS 메모리상에 있다고 알고 있다. 잘못 알고 있으면 댓글 부탁좀..&lt;/p&gt;
&lt;h2 id=&quot;영속성-컨텍스트&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8&quot; aria-label=&quot;영속성 컨텍스트 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;영속성 컨텍스트&lt;/h2&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/a0ffa309-4702-434e-ad71-ee96de55c7d7/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;그림을 보면 간단하게 이해할 수 있을 것 이다. 엔티티 매니저가 여러 엔티티를 &lt;strong&gt;영속성 컨텍스트&lt;/strong&gt;(엔티티를 영구 저장하는 환경) 라는 저장소에 persist라는 기술을 사용해서 저장하고 관리하는 것이 그림의 해석이다.&lt;/p&gt;
&lt;p&gt;이러한 영속성 컨텍스트는 엔티티 매니저와 1:1 관계다. 즉, 엔티티 매니저가 만들어지면 영속성 컨텍스트도 하나 만들어진다.&lt;/p&gt;
&lt;h2 id=&quot;엔티티의-생성-주기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%97%94%ED%8B%B0%ED%8B%B0%EC%9D%98-%EC%83%9D%EC%84%B1-%EC%A3%BC%EA%B8%B0&quot; aria-label=&quot;엔티티의 생성 주기 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;엔티티의 생성 주기&lt;/h2&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/a9932aec-90d2-49df-b80b-51ea3aa8a0d2/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;이것 또한 그림을 보면 간단하게 이해할 수 있다. 엔티티가 영속성 컨텍스트 안에 존재한다면 &lt;strong&gt;영속&lt;/strong&gt;, 만약 이 엔티티가 영속성 컨텍스트에서 나왔다면 &lt;strong&gt;준영속&lt;/strong&gt; 그리고 처음부터 아예 속해있지 않았다면 &lt;strong&gt;비영속&lt;/strong&gt;이다.&lt;/p&gt;
&lt;p&gt;그림에 없는 마지막 &lt;strong&gt;삭제&lt;/strong&gt;상태인 경우는 어디에도 없는 (데이터베이스도 포함) 상태인 경우를 삭제라고 한다.&lt;/p&gt;
&lt;h2 id=&quot;엔티티-식별자-그리고-1차-캐시&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%97%94%ED%8B%B0%ED%8B%B0-%EC%8B%9D%EB%B3%84%EC%9E%90-%EA%B7%B8%EB%A6%AC%EA%B3%A0-1%EC%B0%A8-%EC%BA%90%EC%8B%9C&quot; aria-label=&quot;엔티티 식별자 그리고 1차 캐시 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;엔티티 식별자 그리고 1차 캐시&lt;/h2&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/b11b4cf2-6e46-4166-8d2b-c2a2d51f88c1/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
이 그림 이전에는 각 엔티티가 어떤 엔티티인지 구분을 할 수 없었다. 좀 더 명확하게 그림을 그려보자면 영속성 컨텍스트 안에 있는 엔티티들은 각 키가 있고 그 &lt;strong&gt;식별자 값은 데이터베이스 기본 키와 매핑&lt;/strong&gt;이 되어있다. 즉, JPA 에서 @Id에 쓰이는 그 칼럼이 키라는 뜻이다.
&lt;p&gt;&lt;strong&gt;1차 캐시&lt;/strong&gt;는 굉장히 중요한 개념이다. 만약 Entity Manager를 통해서 ( em.find() ) 어떠한 특정한 엔티티를 찾고자 할 때, 1차 캐시에서 식별자 값으로 엔티티를 찾기 때문에 존재 한다면 &lt;strong&gt;데이터베이스&lt;/strong&gt;에 갈 필요가 없다. 즉, 조회 성능이 좋아진다는 뜻이다.  만약, 존재하지 않다면 데이터베이스에서 엔티티를 추출하고 1차캐시에 저장 후, 영속 상태의 엔티티를 반환한다.&lt;/p&gt;
&lt;h2 id=&quot;영속-엔티티의-동일성&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%98%81%EC%86%8D-%EC%97%94%ED%8B%B0%ED%8B%B0%EC%9D%98-%EB%8F%99%EC%9D%BC%EC%84%B1&quot; aria-label=&quot;영속 엔티티의 동일성 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;영속 엔티티의 동일성&lt;/h2&gt;
&lt;p&gt;em.find를 통해서 영속 엔티티를 반환하는 데 만약 2번의 호출로 두 개의 동일한 엔티티를 부른다면 과연 그 엔티티가 같은 엔티티 일까?&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; personA &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;emfind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;person1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; personB &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;emfind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;person1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

personA &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; personB &lt;span class=&quot;token comment&quot;&gt;// true &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이유를 묻는다면 간단하다. 영속성 컨텍스트는 1차 캐시에 있는 &lt;strong&gt;같은 엔티티 인스턴스&lt;/strong&gt;를 반환한다고 말하면 된다. 그 이상 묻는다면 뭐....👀&lt;/p&gt;
&lt;h2 id=&quot;쓰기-지연-sql-저장소&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%93%B0%EA%B8%B0-%EC%A7%80%EC%97%B0-sql-%EC%A0%80%EC%9E%A5%EC%86%8C&quot; aria-label=&quot;쓰기 지연 sql 저장소 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;쓰기 지연 SQL 저장소&lt;/h2&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/1bb17198-fc9f-4ff0-a339-f4c96d7070b4/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
가장 중요한 문장이 있다. &lt;strong&gt;엔티티 매니저는 트랜잭션을 커밋하기 직전까지 데이터베이스에 엔티티를 저장하지 않고 내부 쿼리 저장소에 INSERT SQL을 모아둔다. 그리고 트랜잭션을 커밋할 때, 모아둔 쿼리를 데이터베이스에 보내는데 이것을 트랜잭셔을 지원하는 쓰기 지연이라고 한다.&lt;/strong&gt;
&lt;p&gt;이 두문장이 굉장히 중요하다. 우선 여기서 커밋이라는 것을 알아야 한다. ( flush와 헷갈릴 수 있으니 같이 정리 )&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;커밋&lt;/strong&gt; : 트랜잭션 작업이 성공적으로 끝났고 데이터베이스가 일관된 상태가 있을 때 트랜잭션 관리자에게 알리는 것.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;프러쉬&lt;/strong&gt; : 영속성 컨텍스트에 있는 엔티티 정보를 DB에 동기화하는 것.&lt;/p&gt;
&lt;p&gt;즉, 엔티티 매니저가 데이터베이스가 &lt;strong&gt;&apos;이제 일관된 상태에 있어요!&apos;&lt;/strong&gt;(프러쉬) 라고 말하기 전까지 영속성 컨텍스트는 &lt;strong&gt;쓰기 지연 SQL 저장소&lt;/strong&gt;에 있는 여러 SQL을 모아두고 있는다. 그리고 이제 엔티티 매니저가 &lt;strong&gt;Flush&lt;/strong&gt;를 하여 이 저장소에 있는 SQL을 전부 데이터베이스에 적용을 시키고 엔티티 정보를 동기화하였을 때 그제서야 엔티티 매니저는 &lt;strong&gt;커밋&lt;/strong&gt;을 한다. 그러니까 무조건 커밋하기 전에 Flush를 해야하는 게 맞는거다. 엔티티 매니저는 우선 트랜잭션을 커밋하면 영속성 컨텍스트를 &lt;strong&gt;Flush&lt;/strong&gt; 한다. 이 문장은 매우 옳다.&lt;/p&gt;
&lt;h2 id=&quot;엔티티-수정&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%97%94%ED%8B%B0%ED%8B%B0-%EC%88%98%EC%A0%95&quot; aria-label=&quot;엔티티 수정 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;엔티티 수정&lt;/h2&gt;
&lt;p&gt;우선 우리는 어떻게 테이블의 row를 수정하는가? 만약 Member라는 테이블에 id가 1인 row의 name을 수정하고자할 때, 우리는 &apos;update member set name = ? where id = 1&apos; 라는 쿼리문을 작성할 것이다. 만약 한개가 아니라 두개면 ? &apos;update member set name = ?, age = ? where id = 1&apos; 라는 쿼리문을 작성할 것이다.&lt;/p&gt;
&lt;p&gt;왜? 한번에 다 하면 되는거 아닌가? 라는 의문을 품을 수 있는데. &lt;strong&gt;실수로&lt;/strong&gt; 그 필드를 입력을 안할 수 있기 때문에 쿼리문을 여러개 만들어서 관리를 한다. 이 &apos;실수&apos;라는 것이 막상 겪어보지 못하면 느낌이 안올 수 있다. 하나의 예를 들면 Builder에 대한 필요성을 못느끼는 것과 같달까... 무튼 이러한 여러 쿼리를 만들기 때문에 우리는 SQL에 의존하게 된다.&lt;/p&gt;
&lt;p&gt;그럼 어떻게 해야하는가 ??&lt;/p&gt;
&lt;h2 id=&quot;dirty-checking---변경-감지&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#dirty-checking---%EB%B3%80%EA%B2%BD-%EA%B0%90%EC%A7%80&quot; aria-label=&quot;dirty checking   변경 감지 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Dirty Checking - 변경 감지&lt;/h2&gt;
&lt;p&gt;우선 팩트부터 얘기하자면 JPA의 기본 전략 즉, default는 엔티티의 모든 필드를 업데이트한다는 것이다. 쿼리가 여러개가 아니라 우리가 &lt;strong&gt;실수&lt;/strong&gt;할 수도있다는 그 모든 필드에 대한 하나의 쿼리만 존재한다는 것이다. 다만, 엔티티를 수정하는 것이므로 SQL 처럼 실수할 가능성은 현저히 줄어든다.&lt;/p&gt;
&lt;p&gt;나는 개인적으로 dirty checking 이라는 말을 좋아하지는 않는다. 그냥 변경하는 것을 감지해준다. 누가 ? JPA가 엔티티를 영속성 컨텍스트에 보관할 때, 최초 상태를 복사해서 저장( 스냅샷 )해두고 그리고 플러시 시점에 스냅샷과 엔티티를 비교해서 변경된 엔티티를 찾는다.&lt;/p&gt;
&lt;p&gt;그러니까 영속성 컨텍스트에 @id, Entity 뿐만 아니라 &lt;strong&gt;스냅샷&lt;/strong&gt; 이라는 필드도 있다는 것이다. 당연히 그러면 이 엔티티가 영속 상태의 엔티티만 해당이 되는 것이다.&lt;/p&gt;
&lt;p&gt;그럼 엔티티 수정에 대한 결론을 내보자. 모든 필드를 업데이트 하기 때문에 전송량에 있어서 증간하는 단점은 있지만 애플리케이션 로딩 시점에 수정 쿼리를 미리 생성하며 수정 쿼리가 1개이고 항상 같다는 것과 재사용의 장점이 있다.&lt;/p&gt;
&lt;p&gt;추가적으로 더 말하자면, 이건 default 기본 전략이며 DynamicUpdate 와 같이 동적으로 Update를 할 수 있는 방법도 있다.&lt;/p&gt;
&lt;h2 id=&quot;flush---프러쉬&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#flush---%ED%94%84%EB%9F%AC%EC%89%AC&quot; aria-label=&quot;flush   프러쉬 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;FLUSH - 프러쉬&lt;/h2&gt;
&lt;p&gt;여기서 다시 한번 개념을 바로잡고자 한다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;커밋&lt;/strong&gt; : 트랜잭션 작업이 성공적으로 끝났고 데이터베이스가 일관된 상태가 있을 때 트랜잭션 관리자에게 알리는 것.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;프러쉬&lt;/strong&gt; : 영속성 컨텍스트에 있는 엔티티 정보를 DB에 동기화하는 것.&lt;/p&gt;
&lt;p&gt;즉, 간단하게 생각하면 영속성 컨텍스트라는 공간안에 엔티티가 수정이 됬으며 또 새로운 엔티티가 들어왔으면 이 영속성 컨텍스트 뿐아니라 &lt;strong&gt;Data base&lt;/strong&gt; 공간에도 똑같이 영속성 컨텍스트와 &lt;strong&gt;동기화&lt;/strong&gt;를 해줘야 한다.&lt;/p&gt;
&lt;p&gt;플러시 하는 방법은 &lt;strong&gt;3&lt;/strong&gt;가지가 있다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;em.flush()&lt;/li&gt;
&lt;li&gt;트랜잭션 커밋 시 플러시가 자동 호출&lt;/li&gt;
&lt;li&gt;JPQL 쿼리 실행 시 플러시가 자동 호출
( JPQL : JPA의 일부로 정의된 플래폿. 독립적인 객체지향 쿼리 언어 )&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;근데 여기서 의문이 드는 것은 왜 &lt;strong&gt;자동&lt;/strong&gt;일까? 너무나도 당연한게 만약 &lt;strong&gt;동기화&lt;/strong&gt;를 해주지 않았다면 당연히 DB에서 Entity를 갖고올 때 그 값이 과연 조회가 될까? 당연히 안되겠지.&lt;/p&gt;
&lt;h2 id=&quot;간단-정리&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B0%84%EB%8B%A8-%EC%A0%95%EB%A6%AC&quot; aria-label=&quot;간단 정리 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;간단 정리&lt;/h2&gt;
&lt;p&gt;우선 팩트만 하나 말하고 가자면, &lt;strong&gt;지연로딩&lt;/strong&gt;이라는 것은 실제 객체 대신 프록시 객체를 로딩해두고 해당 객체를 실제 사용할 때 영속성 컨텍스트를 통해 데이터를 불러오는 방법.&lt;/p&gt;
&lt;p&gt;영속성 컨텍스트는 애플리케이션과 데이터베이스 사이에서 객체를 보관하는 가상의 데이터베이스 같은 역할을 한다. 이러면 좋은 점은 &lt;strong&gt;1차 캐시, 동일성 보장, 트랜잭션을 지원하는 쓰기 지연, 변경 감지, 지연 로딩 기능(프록시)&lt;/strong&gt;을 사용할 수 있다는 것이다.&lt;/p&gt;
&lt;p&gt;이러한 기능들은 꼭 ! &lt;strong&gt;영속상태&lt;/strong&gt;여야만 한다.&lt;/p&gt;
&lt;p&gt;일반적으로 트랜잭션을 커밋할 때 영속성 컨텍스트가 플러시 된다.&lt;/p&gt;
&lt;h2 id=&quot;-flush-후-db-반영-결과&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#-flush-%ED%9B%84-db-%EB%B0%98%EC%98%81-%EA%B2%B0%EA%B3%BC&quot; aria-label=&quot; flush 후 db 반영 결과 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;++ Flush 후, DB 반영 결과&lt;/h2&gt;
&lt;p&gt;flush를 하고 난 후, 영속성 컨텍스트에 있는 SQL을 모두 날렸다. 하지만, DB에 보면 반영이 되지 않았다. 이유는 Commit 이다.
Commit에 대한 내용을 좀 더 추가하자면 &lt;strong&gt;모든 부분작업이 정상적으로 완료하면 이 변경사항을 한꺼번에 DB에 반영합니다.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&apos;&lt;strong&gt;스터디가 끝난 후, 알아보고 다시 단톡에 뿌린 내용.&lt;/strong&gt;&apos;
Flush를 했고 Commit을 안한상태에서 DB에 봤을 때 반영이 되지 않은 이유는
Commit에 대한 정의가 조금 부족했다 생각하는데 좀 더 내용을 추가하자면
Commit : 모든 부분작업이 정상적으로 완료하면 이 변경사항을 한꺼번에 DB에 반영합니다.
그리고 아는 DBA분께 여쭤보니 &apos;디비블록에다가 디스크에 써도 된다고 표시해주는 행위&apos; 그게 곧 Commit이다. 라고 하시는 거보니까
Flush 는 동기화를 위해 DB에 우선적으로 SQL을 날려주는 것이고 그 SQL을 반영을 하면 동기화가 되는 것이며, 반영은 아직 하지 않은 상태.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;참고&lt;/strong&gt; : 자바 ORM 표준 JPA 프로그래밍 - 김영한&lt;/p&gt;</content:encoded><author>a_l_b_bloomer@naver.com</author></item><item><title><![CDATA[Collect, Collector, Collectors 정리]]></title><description><![CDATA[시작 모던 자바 인액션 '6장' 을 읽고 Collect, Collector, Collectors 에 대해서 정리봤다. 알아야하는 정의 Collect : Collector를 매개변수로 하는 스트림의 최종 연산 
Collector : Collect에서 필요한 메서드를 정의해놓은 인터페이스 
Collectors…]]></description><link>https://gb-template.netlify.com/collector20220303/</link><guid isPermaLink="false">https://gb-template.netlify.com/collector20220303/</guid><category><![CDATA[java]]></category><pubDate>Thu, 03 Mar 2022 22:31:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;시작&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%8B%9C%EC%9E%91&quot; aria-label=&quot;시작 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;시작&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;모던 자바 인액션 &apos;6장&apos;&lt;/strong&gt; 을 읽고 Collect, Collector, Collectors 에 대해서 정리봤다.&lt;/p&gt;
&lt;h2 id=&quot;알아야하는-정의&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%95%8C%EC%95%84%EC%95%BC%ED%95%98%EB%8A%94-%EC%A0%95%EC%9D%98&quot; aria-label=&quot;알아야하는 정의 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;알아야하는 정의&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Collect&lt;/strong&gt; : Collector를 매개변수로 하는 스트림의 최종 연산 &lt;br&gt;
&lt;strong&gt;Collector&lt;/strong&gt; : Collect에서 필요한 메서드를 정의해놓은 인터페이스 &lt;br&gt;
&lt;strong&gt;Collectors&lt;/strong&gt; : 다양한 기능의 Collector를 구현한 클래스 제공 &lt;br&gt;&lt;/p&gt;
&lt;p&gt;Collect는 최종연산이며 스트림의 요소를 소비해서 최종 결과를 도출한다.&lt;/p&gt;
&lt;h2 id=&quot;collect-collectors-collector-구조&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#collect-collectors-collector-%EA%B5%AC%EC%A1%B0&quot; aria-label=&quot;collect collectors collector 구조 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Collect, Collectors, Collector 구조&lt;/h2&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/813c5d48-4f6b-4399-9672-7476d676be8f/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/db5aea27-710f-455e-8df2-8e2f49e7c285/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/6e163298-4658-4981-8a11-7853acbdc981/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;이러한 구조를 알면, Collector 인터페이스에 정의된 메서드를 구현해서 커스텀 컬렉터를 개발할 수있다는 장점이있음.&lt;/p&gt;
&lt;h2 id=&quot;왜-우리는-collector를-공부해야-하는가&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%99%9C-%EC%9A%B0%EB%A6%AC%EB%8A%94-collector%EB%A5%BC-%EA%B3%B5%EB%B6%80%ED%95%B4%EC%95%BC-%ED%95%98%EB%8A%94%EA%B0%80&quot; aria-label=&quot;왜 우리는 collector를 공부해야 하는가 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;왜 우리는 Collector를 공부해야 하는가?&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Currency&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Transaction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; transactionByCurrencies &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
  &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Transaction&lt;/span&gt; transaction &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; transactions&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;token class-name&quot;&gt;Currency&lt;/span&gt; currency &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; transaction&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getCurrency&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Transaction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; transactionsForCurrency &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; transactionsByCurrencies&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;currency&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;transactionsForCurrency &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
       transactionsForCurrency &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ArrayList&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
       transactionByCurrencies&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;currency&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; transactionsForCurrency&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
     &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; 
     transactionsForCurrency&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;transaction&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Collector&lt;/strong&gt;를 쓰지 않고 쌩 코드.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Currency&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Transaction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; transactionsByCurrencies &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; 
  transactions&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;groupingBy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Transaction&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getCurrency&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Collector&lt;/strong&gt;를 쓰고 간결하고 명료하게. 함수형프로그래밍에서는 &lt;strong&gt;무엇&lt;/strong&gt;을 원하는지 직접 명시할 수 있어서 어떤 방법으로 이를 얻을 수 있는지는 신경 쓸 필요가없다.
즉, Collector 인터페이스 구현은 스트림의 요소를 어떤 식으로 도출할지 지정한다.
또한, Collect로 결과를 수집하는 과정을 간단하면서도 유연한 방식으로 정의할 수 있다는 점이 최대 강점.&lt;/p&gt;
&lt;h2 id=&quot;collectors메서드&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#collectors%EB%A9%94%EC%84%9C%EB%93%9C&quot; aria-label=&quot;collectors메서드 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Collectors.메서드&lt;/h2&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/5ff201c0-3b2c-4f6e-8488-35a2c75e2421/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;h3 id=&quot;스트림-요소를-하나의-값으로-리듀스하고-요약&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%8A%A4%ED%8A%B8%EB%A6%BC-%EC%9A%94%EC%86%8C%EB%A5%BC-%ED%95%98%EB%82%98%EC%9D%98-%EA%B0%92%EC%9C%BC%EB%A1%9C-%EB%A6%AC%EB%93%80%EC%8A%A4%ED%95%98%EA%B3%A0-%EC%9A%94%EC%95%BD&quot; aria-label=&quot;스트림 요소를 하나의 값으로 리듀스하고 요약 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;스트림 요소를 하나의 값으로 리듀스하고 요약&lt;/h3&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/1d0f5b03-cac1-4c48-a4c5-65a5bcbb8e3e/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;스트림에 있는 객체의 숫자 필드의 &lt;strong&gt;합계&lt;/strong&gt;, &lt;strong&gt;평균&lt;/strong&gt; 등을 반환하는 연산&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; totalCalories &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; menu&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;summingInt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Dish&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getCalories&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/881d692e-3ae8-487c-83dc-759c3aa9ab1f/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;h3 id=&quot;요소-그룹화&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%9A%94%EC%86%8C-%EA%B7%B8%EB%A3%B9%ED%99%94&quot; aria-label=&quot;요소 그룹화 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;요소 그룹화&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Dish&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Dish&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; dishesByType &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; 
          menu&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;groupingBy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Dish&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 결과드아.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;FISH&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;prawns&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; salmon&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;OTHER&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;french fries&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; rice&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; season fruit&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; pizza&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token constant&quot;&gt;MEAT&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;pork&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; beef&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; chicken&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/1c5de941-6b6b-489d-a272-9236354e531c/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/67f0c60b-1217-42f0-8842-8cbca62a98a6/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;groupingBy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;callsifier&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; downstream&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;으로 들어가 좀 더 깊숙히 들어갈 수 있으나 나는 여기서 멈춘다. &lt;strong&gt;classifier&lt;/strong&gt;를 통해서 요소에 대한 키값을 매핑하고 &lt;strong&gt;downstream&lt;/strong&gt;을 이용하여 GroupBy 다음 그다음 컬렉션인 &lt;strong&gt;toList&lt;/strong&gt;로  !!! &lt;img src=&quot;https://images.velog.io/images/ggomjae/post/14034d94-89f4-4b61-931f-6bf13d702c5e/image.png&quot; alt=&quot;&quot;&gt;
그룹화 같은 경우 &lt;strong&gt;여러가지 조합&lt;/strong&gt;을 효과적으로 할 수 있다는 것이 장점이다.
예를 들면,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Dish&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; totalCaloriesByType &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; 
      menu&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;groupingBy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Dish&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;summingInt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Dish&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getCalories&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;각 타입별로 칼로리 합계를 통계내는 코드이다.&lt;/p&gt;
&lt;h3 id=&quot;요소-분할&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%9A%94%EC%86%8C-%EB%B6%84%ED%95%A0&quot; aria-label=&quot;요소 분할 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;요소 분할&lt;/h3&gt;
&lt;p&gt;분할은 &lt;strong&gt;분할 함수&lt;/strong&gt;라 불리는 &lt;code class=&quot;language-text&quot;&gt;프레디케이스&lt;/code&gt;를 분류 함수로 사용하는 특수한 그룹화 기능.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Boolean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Dish&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; partitionedMenu &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; 
          menu&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;partitioningBy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Dish&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isVegetarian&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 결과드아.          &lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;pork&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; beef&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; chicken&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prawns&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; salmon&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
 &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;french fries&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; rice&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; season fruit&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; pizza&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/e3beb727-4a26-4116-aef1-03e309544076/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
분할 함수가 반환하는 &lt;strong&gt;참, 거짓 두 가지 요소의 스트림 리스트를 모두 유지한다는 것&lt;/strong&gt;이 분할의 장점
&lt;h2 id=&quot;collector-인터페이스&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#collector-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4&quot; aria-label=&quot;collector 인터페이스 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Collector 인터페이스&lt;/h2&gt;
&lt;p&gt;Collector 인터페이스는 리듀싱 연산을 어떻게 구현할지 제공하는 메서드 집합으로 구성된다.
&lt;strong&gt;Collector의 생성자 부분&lt;/strong&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/c9534556-2f3d-483f-9396-83be8dc39e58/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;public interface Collector&amp;lt;T, A, R&gt; { 
	Supplier&amp;lt;A&gt; supplier(); 
	BiConsumer&amp;lt;A, T&gt; accumulator(); 
	Function&amp;lt;A, R&gt; finisher(); 
	BinaryOperator&amp;lt;A&gt; Combiner(); 
	Set&amp;lt;Characteristics&gt; characteristics(); 
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;T : 수집될 스트림 항목의 제네릭 형식&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;A : 누적자, 즉 수집 과정에서 중간 결과를 누적하는 객체의 형식
R : 수집 연산 결과 객체의 형식 [ 대다수가 컬렌션 ]&lt;/p&gt;
&lt;h3 id=&quot;supplier--새로운-결과-컨테이너-만들기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#supplier--%EC%83%88%EB%A1%9C%EC%9A%B4-%EA%B2%B0%EA%B3%BC-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EB%A7%8C%EB%93%A4%EA%B8%B0&quot; aria-label=&quot;supplier  새로운 결과 컨테이너 만들기 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;supplier : 새로운 결과 컨테이너 만들기&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Supplier&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;supplier&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
 	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ArrayList&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;accumlator--결과-컨테이너에-요소-추가하기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#accumlator--%EA%B2%B0%EA%B3%BC-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EC%97%90-%EC%9A%94%EC%86%8C-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0&quot; aria-label=&quot;accumlator  결과 컨테이너에 요소 추가하기 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;accumlator : 결과 컨테이너에 요소 추가하기&lt;/h3&gt;
&lt;p&gt;리듀싱 연산을 수행하는 함수를 반환한다. 각 요소를 처리하는 계산 로직. 각 요소가 올 때마다 중간 결과를 생성하는 로직&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BiConsumer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;accumulator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;list&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; time&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;finisher--최종-변환값을-결과-컨테이너로-적용&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#finisher--%EC%B5%9C%EC%A2%85-%EB%B3%80%ED%99%98%EA%B0%92%EC%9D%84-%EA%B2%B0%EA%B3%BC-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EB%A1%9C-%EC%A0%81%EC%9A%A9&quot; aria-label=&quot;finisher  최종 변환값을 결과 컨테이너로 적용 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;finisher : 최종 변환값을 결과 컨테이너로 적용&lt;/h3&gt;
&lt;p&gt;스트림 탐색을 끝내고 누적자 객체를 최종 결과로 반환하면서 누적 과정을 끝낼 때 호출할 함수를 반환해야한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;finisher&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;identity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/730ccbe2-2efd-4f40-9a64-37b52b80c299/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;h3 id=&quot;combiner--두-결과-컨테이너-병합&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#combiner--%EB%91%90-%EA%B2%B0%EA%B3%BC-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EB%B3%91%ED%95%A9&quot; aria-label=&quot;combiner  두 결과 컨테이너 병합 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;combiner : 두 결과 컨테이너 병합&lt;/h3&gt;
&lt;p&gt;스트림의 서로 다른 서브파트를 병렬로 처리할 때 누적자가 이 결과를 어떻게 처리할 지 정의한다. 즉, combiner의 역할을 identity[초기값]와 accumulator[중간 로직]를 가지고 여러스레드에서 나눠 계산할 결과를 합치는 역할&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BinaryOperator&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;combiner&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;list1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; list2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    	list1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;list2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; list1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/3d4ac634-a8d8-4da6-8dfd-7798d0b5242b/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/1e9480d9-7d60-4457-b345-502d6b246dea/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;h3 id=&quot;charateristics&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#charateristics&quot; aria-label=&quot;charateristics permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;charateristics&lt;/h3&gt;
&lt;p&gt;컬렉터의 연산을 정의하는 Charateristices 형식의 불변 집합을 반환한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Characteristics&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;charateristics&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Collections&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unmodifiableSet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;EnumSet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    	&lt;span class=&quot;token constant&quot;&gt;IDENTITY_FINISH&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;CONCURRENT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/6e663faf-2f55-4972-a811-4bbb8e637a2e/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;h2 id=&quot;컬렉터-성능-비교&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%BB%AC%EB%A0%89%ED%84%B0-%EC%84%B1%EB%8A%A5-%EB%B9%84%EA%B5%90&quot; aria-label=&quot;컬렉터 성능 비교 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;컬렉터 성능 비교&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/albbloomer&quot;&gt;A_L_B_Bloomer_GITHUB&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;collect-vs-reduce&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#collect-vs-reduce&quot; aria-label=&quot;collect vs reduce permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Collect vs Reduce&lt;/h2&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/a633307a-bb19-41a3-bc17-745b6537291f/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/63fde077-20da-4b96-b00e-a66d42f26e56/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;h2 id=&quot;collectors의-정적-팩토리-메소드&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#collectors%EC%9D%98-%EC%A0%95%EC%A0%81-%ED%8C%A9%ED%86%A0%EB%A6%AC-%EB%A9%94%EC%86%8C%EB%93%9C&quot; aria-label=&quot;collectors의 정적 팩토리 메소드 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Collectors의 정적 팩토리 메소드&lt;/h2&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/78b721be-033a-4a87-9370-cdee8356dfbf/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
GoF 디자인 패턴 중 팩토리 패턴에서 유래한 이 단어는 객체를 생성하는 역할을 분리하겠다는 목적이 있다. &lt;strong&gt;&quot;생성자 대신 정적 팩토리 메서드를 고려하라&quot;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;이름을 가질 수 있다.&lt;/li&gt;
&lt;li&gt;호출될 때마다 인스턴스를 새로 생성하지는 않아도 된다.&lt;/li&gt;
&lt;li&gt;반환 타입의 하위타입 객체를 반환할 수 있는 능력이 있다.&lt;/li&gt;
&lt;li&gt;입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다.&lt;/li&gt;
&lt;li&gt;정적 팩터리 메서드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 된다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;정적-팩토리-메소드로&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%A0%95%EC%A0%81-%ED%8C%A9%ED%86%A0%EB%A6%AC-%EB%A9%94%EC%86%8C%EB%93%9C%EB%A1%9C&quot; aria-label=&quot;정적 팩토리 메소드로 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;정적 팩토리 메소드로&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;age &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ofAge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded><author>a_l_b_bloomer@naver.com</author></item><item><title><![CDATA[GIT 에 대한 그림 이해]]></title><description><![CDATA[Git 4가지 영역 말보다는 직접 보는 것이 이해하기 쉽습니다. 직접그렸습니다.
 Git이 어려운 이유는 머리에 이 4가지 영역의 그림이 그려지지 않기 때문에 어려운 것입니다.
항상 기본적으로 GitHub에 저장소를 만들고 Intellij 또는 이클립스를 통해 코드를 짠 폴더에 들어가서 git init…]]></description><link>https://gb-template.netlify.com/gitbasic20220218/</link><guid isPermaLink="false">https://gb-template.netlify.com/gitbasic20220218/</guid><category><![CDATA[git]]></category><pubDate>Fri, 18 Feb 2022 22:31:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;git-4가지-영역&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#git-4%EA%B0%80%EC%A7%80-%EC%98%81%EC%97%AD&quot; aria-label=&quot;git 4가지 영역 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Git 4가지 영역&lt;/h2&gt;
&lt;p&gt;말보다는 직접 보는 것이 이해하기 쉽습니다. 직접그렸습니다.
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/e88d1437-f081-41db-abb9-16a4799a301b/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;Git이 어려운 이유는 머리에 이 4가지 영역의 그림이 그려지지 않기 때문에 어려운 것입니다.
항상 기본적으로 GitHub에 저장소를 만들고 Intellij 또는 이클립스를 통해 코드를 짠 폴더에 들어가서 git init(안하면 그냥 일반 폴더, 하면 깃 명령어를 사용할 수 있는 폴더)을 해서 초기화를 시켜주고 Git Hub Repository에 연결하여 add . -&gt; commit -&gt; push 를 기계마냥 합니다.&lt;/p&gt;
&lt;p&gt;그림을 보고 이해하면 그 과정이 훨씬 더 쉽게 다가올 수 있습니다.
&lt;strong&gt;작업공간&lt;/strong&gt; 은 우리가 그 IDE 프로젝트 폴더가 있는 그 공간을 뜻합니다. IDE에서 작업을 하고 저장을 하면 그 폴더에 저장이 되고 유지가 됩니다. 그리고 Git Add 를 하는 순간 &lt;strong&gt;곧 커밋 될 작업 저장 공간(Staging Area)&lt;/strong&gt;에 저장이 됩니다.&lt;/p&gt;
&lt;p&gt;여러 파일들을 Staging Area에 올렸고 이번 Version (Commit)에 더 이상 파일을 올릴 필요가 없을 때, Commit을 하고 &lt;strong&gt;내 컴퓨터에 커밋된 저장 공간(Local Repository)&lt;/strong&gt; 에 올립니다.&lt;/p&gt;
&lt;p&gt;마지막으로 여러 Version(Commit)을 나의 컴퓨터가 아닌 Git Hub Respository(Remote)에 &lt;strong&gt;Push&lt;/strong&gt;를 하고 &lt;strong&gt;저장시켜줍니다.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;이 4가지 영역만 잘 이해하면 전부 다 안다고 해도 무방하다고 말은 못하지만 앞으로의 명령어들이 이해하기가 쉬울겁니다.&lt;/p&gt;
&lt;h2 id=&quot;곧-커밋-될-작업-저장-공간---staging-area&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B3%A7-%EC%BB%A4%EB%B0%8B-%EB%90%A0-%EC%9E%91%EC%97%85-%EC%A0%80%EC%9E%A5-%EA%B3%B5%EA%B0%84---staging-area&quot; aria-label=&quot;곧 커밋 될 작업 저장 공간   staging area permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;곧 커밋 될 작업 저장 공간 ?  (Staging Area)&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;잠깐 ! 곧 커밋 될 작업 저장 공간 ?&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;처음에 접하면 의아할 것이다. 곧바로 작업 공간에서 작업을 하고 Commit을 하면 될텐데 왜 이렇게 중간에 임시 저장 공간이 필요할까?&lt;/p&gt;
&lt;p&gt;저도 궁금해서 찾아보았습니다. 여러 글을 읽어보면 간단하게 결론은 하나입니다.
&lt;strong&gt; 작업 공간에서 작업한 모든 파일을 Commit하고 싶지 않다.&lt;/strong&gt; 간단 명료하다. 좀 더 얘기를 해보자면 Commit을 하면서 Version 관리를 하는 데 &lt;strong&gt;어떠한 파일&lt;/strong&gt;은 이 Version에 넣기 싫은 것. 그럼 그 작업 내용만 냅두고 당장의 Version에 올릴 파일들만 &lt;strong&gt;곧 커밋 될 작업 저장 공간&lt;/strong&gt;에 넣는 것 입니다.&lt;/p&gt;
&lt;h2 id=&quot;origin-upstream에-대한-이해&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#origin-upstream%EC%97%90-%EB%8C%80%ED%95%9C-%EC%9D%B4%ED%95%B4&quot; aria-label=&quot;origin upstream에 대한 이해 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;origin, upstream에 대한 이해&lt;/h2&gt;
&lt;img src=&quot;https://images.velog.io/images/minyul/post/a45862f6-ef69-4f12-acdf-d955e719f465/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&apos;git remote&apos;명령어를 통해 원격 저장소를 관리할 수 있습니다. 캡처된 사진을 보면 **upstream**과 **origin**이 있습니다. 이 둘에 대한 개념이 애매모호하며 이해가 잘 되지않습니다. 🤔
&lt;img src=&quot;https://images.velog.io/images/minyul/post/3f9b3cad-c73f-4133-b724-54d373a28c9a/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
다른 예입니다. 저의 하나의 프로젝트입니다. 여기에는 git remote 를 이용하여 저장소를 확인해보니 upstream은 없고 origin 밖에 없습니다. 🧐
&lt;p&gt;자, upstream을 알기 전에 origin 부터 설명하겠습니다. origin 은 즉, remote 입니다. 여기서 &lt;strong&gt;remote&lt;/strong&gt;는 우리 컴퓨터의 local이 아닌 실제 git hub에 &lt;strong&gt;프로젝트의 저장 공간&lt;/strong&gt;을 뜻합니다. origin은 remote입니다. ( 그림으로 직관하기 위해서는 맨 위에 구름의 빨간 박스 라고 생각하시면 쉽습니다. )&lt;/p&gt;
&lt;p&gt;이제 origin은 무엇인지 알았는데.. &lt;strong&gt;upstream은 무엇일까요?&lt;/strong&gt; upstream에 대한 것을 느끼기 위해 그림을 봅시다.&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/minyul/post/23f50d50-caca-4619-8302-c657d0d5f502/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
우선 **upstream**을 직관적으로 생각해봅시다. 말 그대로 &apos;**상류**&apos;로 해석이 됩니다. 상대적인 개념입니다. 예를 들어보겠습니다. 우리는 git을 사용할 때 **fork**라는 것을 합니다. 말 그대로 복제입니다. 다시 한번 그림을 볼까요?
&lt;img src=&quot;https://images.velog.io/images/minyul/post/e1dbcc6c-4196-4c24-8de9-38527795021b/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
저는 every-moment라는 소유의 Tech_Interview_Preparation 저장소를 fork를 하였고 fork를 한 결과 minyul 소유의 Tech_Interview_Preparation 저장소가 생겼습니다.
&lt;p&gt;자, 느낌이 오시나요? 🤭 &lt;strong&gt;local - origin(local의 remote) - upstream(origin의 remote)&lt;/strong&gt; 느낌입니다. 혼란스러운 이유는 딱 한가지입니다. origin 처럼 다른 이름으로 명명하면 되는데 upstream이라는 상대적인 이름을 아예 박아버렸기에 헷갈리는 겁니다. 차라리 A - B - C 하고 각 관계에서 upstream downstream으로 했으면 얼마나 편했을까요?&lt;/p&gt;
&lt;h2 id=&quot;branch에-대한-이해-origin-remote-update&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#branch%EC%97%90-%EB%8C%80%ED%95%9C-%EC%9D%B4%ED%95%B4-origin-remote-update&quot; aria-label=&quot;branch에 대한 이해 origin remote update permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;branch에 대한 이해 (origin, remote update)&lt;/h2&gt;
&lt;p&gt;이제 branch에 대해 공부하도록 하겠습니다. 음.. 정말 간단히 얘기하면 복사를 당한 또 다른 코드라고 생각하면 됩니다. 즉슨, 코드인데 branch라는 것은 &lt;strong&gt;그 코드에 대한 복제&lt;/strong&gt;라고 생각하면 됩니다. 그럼 원래의 원본과 복제가 여러개 있겠죠? 복제를 만드는 이유는 원본 코드에 영향을 가지않기 위해 독립적으로 개발하기 위해 branch 라는 개념이 생겼습니다. 현재의 branch에서 복제를 하기 위해서는 &apos;&lt;strong&gt;git branch 복제이름&lt;/strong&gt;&apos;으로 복제를 하면 됩니다.  ( 복제본에 대한 복제를 또 만들 수 있겠죠? 즉, 상대적인 개념입니다. 🤭) 상대적으로 원본과 복제가 있지만 뿌리 그 자체는 main, master 로 생각하시면 될 것 같습니다. git init 을 통해 초기화를 할 때 제일 먼저 생기는 branch 니깐요.&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/minyul/post/9b5f02f9-076a-48ed-ba9f-490c74be4557/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;&lt;strong&gt;+&lt;/strong&gt;) -a option을 통해서 모든 branch를 볼 수 있습니다.&lt;/p&gt;
&lt;p&gt;여기서 조금 궁금한 부분이 생겼습니다.  &lt;strong&gt;remotes/origin/HEAD -&gt; origin/main&lt;/strong&gt; 라는 부분입니다.
다른 두개의 빨간 branch는 origin, upstream에 대한 branch 라서 이해는 합니다만, &lt;strong&gt;HEAD&lt;/strong&gt;라는 부분이 이해가 어려울 수 있습니다. HEAD라는 것은 &lt;strong&gt;현재 상태의 포인터를 나타내는 것&lt;/strong&gt;이며 사진에 있는 것은 현재 origin 저장소에서의 &lt;strong&gt;포인터&lt;/strong&gt;는 origin/main branch 라는 것입니다. 즉슨, 이 포인터를 이용해서 clone할 때 다른 branch를 지정해줄 수 있겠지요?&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/minyul/post/3a1a5502-d857-4665-a9e0-e40551fda67c/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
한번 실습을 해보겠습니다. git branch -a를 통해서 현재 branch 를 보았고 직접 해당 프로젝트에 대해서 git hub에 들어가서 **new_branch**라는 브랜치를 만들었습니다. 그리고 **git remote update**를 통해 orgin에 있는 branch들을 update 시켜줬습니다. 🤭 (upstream 같은 경우에는 git fetch upstream을 해줘야합니다. )
&lt;img src=&quot;https://images.velog.io/images/minyul/post/4e7e8513-5f2b-4990-962d-2b1a5da3e352/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
하나의 실습을 더 해보겠습니다. origin에서 새로운 branch 만들었고 그와 같이 local에서 똑같이 new_branch라는 복제를 만들었을 때 ! git pull을 이용하면 변경된 데이터를 갖고 올 수 잇을까요?
If you wish to set tracking information for this branch you can do so with !!
**왼쪽 그림을 보면 추적할 수 없다고 나옵니다. 셋팅을 해줘야겠군요.**
&lt;p&gt;git branch --set-upstream-to=origin/new_branch new_branch 의 명령어를 이용하여 추적이 가능하게끔 했습니다. 다시 pull을 해보면 오른쪽 그림처럼 잘 갖고와서 데이터를 병합해줍니다. 🤭&lt;/p&gt;
&lt;p&gt;이렇게 각 local, origin 에 branch(복제)가 여러 개가 있고 local에서 origin의 branch를 사용할 때 추적이 가능하게 셋팅을 해줘야합니다!&lt;/p&gt;
&lt;h2 id=&quot;clone에-대한-이해-non-default-branch-single-branch&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#clone%EC%97%90-%EB%8C%80%ED%95%9C-%EC%9D%B4%ED%95%B4-non-default-branch-single-branch&quot; aria-label=&quot;clone에 대한 이해 non default branch single branch permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;clone에 대한 이해 (non default branch, single branch)&lt;/h2&gt;
&lt;p&gt;협업을 할 때 제일 먼저 하는 것은 &lt;strong&gt;clone&lt;/strong&gt;입니다. clone에 대해서 공부해보겠습니다.
&lt;a href=&quot;https://github.com/a_l_b_bloomer&quot;&gt;git repository&lt;/a&gt;를 clone을 해봤습니다.&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/minyul/post/e547e380-d5bf-4ebe-b1c3-7fa1e657ec82/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
해당 폴더에 clone한 저장소가 들어왔습니다. 🤭
clone을 한 후, branch에 대한 부분을 확인하고 싶습니다. origin에 있는 모든 branch를 갖고 왔을까요?
&lt;img src=&quot;https://images.velog.io/images/minyul/post/6b0b0504-021f-40f8-8313-1421b9c48024/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
현재 origin 에는 main branch, test branch가 있습니다. 명령어 git clone 을 하였을 때는 그 저장소의 주축이 되는 branch(default branch)만 갖고 옵니다. 즉슨,
&lt;p&gt;그럼 !? main branch가 아닌 test branch만 갖고오려면 어떻게 해야할까요?
&lt;strong&gt;git clone -b {origin_branch_name} --single-branch {origin_url}&lt;/strong&gt; 🧐🧐
&lt;img src=&quot;https://images.velog.io/images/minyul/post/93f882b9-1b62-4324-9ce4-eaa886e5bf5c/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
실습을 해보니 현재 tracking 되고 있는 branch가 아닌 test branch 라는 단 하나의 branch를 갖고 오게 됩니다.&lt;/p&gt;
&lt;h2 id=&quot;fetch에-대한-이해&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#fetch%EC%97%90-%EB%8C%80%ED%95%9C-%EC%9D%B4%ED%95%B4&quot; aria-label=&quot;fetch에 대한 이해 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;fetch에 대한 이해&lt;/h2&gt;
&lt;p&gt;git fetch에 대해서 공부를 해보겠습니다. 우리는 &lt;strong&gt;Add 명령어&lt;/strong&gt;를 통해 스테이징 영역에 보관을 해놓고 &lt;strong&gt;Push&lt;/strong&gt;를 통해 Remote(Origin)에 저장합니다. 근데 만약 ! ! 그 Remote(Origin)에 있는 저장된 데이터들이 우리(Local)에서는 모르고 있으면 어떻게 될까요? 즉슨, 협업을 통해서 하나의 저장소에 동기화를 시켜주고 서로 데이터를 저장해야하는 데 &lt;strong&gt;동기화&lt;/strong&gt;가 되어있지않다면 밑에 사진과 같이 &lt;strong&gt;Push&lt;/strong&gt;가 먹히지 않습니다.
&lt;img src=&quot;https://images.velog.io/images/minyul/post/1cdc0d9f-911e-4a3f-bedb-bb971e551df8/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;경고창에 보면 보통은 &lt;strong&gt;Pull&lt;/strong&gt;을 사용합니다. ( + Pull = Fetch + Merge )
😁😁 맞습니다. Pull을 쓰면 됩니다. 하지만 Pull을 알고 쓰기 위해서는 Fetch를 알아야겠죠? Fetch를 잘쓰지않지만 Fetch를 공부해봅시다.&lt;/p&gt;
&lt;p&gt;Fetch는 단순하게 &lt;strong&gt;&apos;변경된 내용을 알고 싶을 때, 로컬에 임시로 갖고 온다.&apos;&lt;/strong&gt; 그러면 Pull이라는 것은 Fetch + Merge 기에 해석을 하자면 &lt;strong&gt;변경된 내용을 알고 합친다 !&lt;/strong&gt; 라고 해석이 되겠죠?
&lt;img src=&quot;https://images.velog.io/images/minyul/post/06a7d712-4480-45d0-b238-902fb5268e0c/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;곧바로 실습해보겠습니다! &lt;strong&gt;git fetch origin&lt;/strong&gt;을 통해 우선 변경된 내용을 로컬로 갖고옵니다. 그리고 &lt;strong&gt;git checkout FETCH_HEAD&lt;/strong&gt;로 이동한다음 ! ! 이력을 확인해봅시다.
&lt;img src=&quot;https://images.velog.io/images/minyul/post/9cb9d37a-03ec-470e-9cb9-e9af4c75957b/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;변경된 내용을 갖고와서 확인을 할 수 있습니다. 자! 이제 마무리를 하겠습니다.
&lt;img src=&quot;https://images.velog.io/images/minyul/post/df95062d-d819-43a6-9d14-6fc32a3347a4/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
Push가 안되던 Branch로 다시 돌아가서 Merge를 시켜줬습니다. 물론 Pull만 해도 됩니다. 👏👏&lt;/p&gt;
&lt;h2 id=&quot;merge-대한-이해&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#merge-%EB%8C%80%ED%95%9C-%EC%9D%B4%ED%95%B4&quot; aria-label=&quot;merge 대한 이해 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Merge 대한 이해&lt;/h2&gt;
&lt;p&gt;Merge 같은 경우에는 영어의 뜻 처럼 하나의 브랜치에서 다른 브랜치를 합치는 겁니다.
&lt;img src=&quot;https://images.velog.io/images/minyul/post/b7c30b05-a09e-468c-878f-0ad6ed205023/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
자 ! 우리는 상대적인 개념으로 원본이라는 브랜치가 존재한다고 가정해봅시다. 그리고 이 원본 브랜치를 복제한 브랜치가 있구요! 그 복제브랜치에서 하나 하나 코드를 고치거나 추가하면서 Commit 을 합니다 ! 이 수정, 추가된 코드를 원본에 Merge ! 합쳐버리면 어떤 상황이 일어날까요 ?&lt;/p&gt;
&lt;p&gt;당연히 아무 이상없이 잘 합쳐질 겁니다. 충돌이 나는 경우를 만들어봅시다. 🤔🤔
&lt;img src=&quot;https://images.velog.io/images/minyul/post/edf5de52-5e4a-43ac-8ddf-12b141e67a60/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;img src=&quot;https://images.velog.io/images/minyul/post/ed25d724-d3ed-4e18-bb58-c96d8a401fb7/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;충돌이 납니다. 두 개의 브랜치가 같은 부분을 수정하고 merge를 했기 때문에 충돌이 난 것입니다. 하지만 먼저 merge를 실행한 issue1_branch는 Fast-forward가 나오면서 원본 브랜치에 자동으로 merge가 되었습니다. 이 &lt;strong&gt;Fast-forward&lt;/strong&gt;는 무엇일까요?  원본은 그대로 있습니다. 딱히 무엇을 하지 않았어요. 그냥 바라만 볼뿐. 원본 브랜치에서 복제브랜치가 그대~로 앞으로 간 것 뿐입니다. 딱히 어떠한 Merge Commit을 할 필요없이 빠르게 Merge가 된것을 뜻합니다.&lt;/p&gt;
&lt;p&gt;자. 그럼 우선 충돌된 부분을 고쳐보도록 하겠습니다.
&lt;img src=&quot;https://images.velog.io/images/minyul/post/b96669be-fe6b-4c52-873d-9cab16ab6e5a/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;현재 충돌난 파일을 확인하고 어느 부분에서 충돌이 나는 지 확인해봤습니다.  &amp;#x3C;&amp;#x3C;&amp;#x3C;&amp;#x3C;, &gt;&gt;&gt;&gt;&gt; 이 부분이 충돌난 부분 입니다. 이 부분을 수동으로 GUI로 수정했고 다시 스테이징에 넣어 Commit을 해봤습니다.
main|MERGING 상태에서 main으로 변했습니다. 🙏
&lt;img src=&quot;https://images.velog.io/images/minyul/post/fcac11e1-84bb-4c6f-8cf1-b326a2769b06/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;Log를 보면 issue 브랜치 2 수정에 대한 이력과 충돌 해결한 부분에 대한 이력이 같이 올라가있습니다.&lt;/p&gt;
&lt;h2 id=&quot;origin을-fork하고-upstream에-업데이트를-했을-때&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#origin%EC%9D%84-fork%ED%95%98%EA%B3%A0-upstream%EC%97%90-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EB%A5%BC-%ED%96%88%EC%9D%84-%EB%95%8C&quot; aria-label=&quot;origin을 fork하고 upstream에 업데이트를 했을 때 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;origin을 fork하고 upstream에 업데이트를 했을 때&lt;/h2&gt;
&lt;p&gt;기존 저장소에서 fork를 하고 나서 그 fork 한 저장소로 clone을 합니다. 이제 local에서 코드를 수정하고 orgin에 push를 한다음 upstream에 PR을 날리는데요 ! 🤔🤔&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;만약 !!&lt;/strong&gt; Upstream에 누군가 PR을 날려서 우리의 Orgin 버전과 Upstream이 다르면 어떻게 할까요?
동기화를 시켜줘야합니다. 하지만 우리 Local에서는 Orgin에 대한 Clone만 했을 뿐. Upstream 에 대한 정보가 없는데요.&lt;/p&gt;
&lt;p&gt;이럴 때 우리는 Upstream을 셋팅해줘야합니다.
** git remote add upstream [ 브랜치 명 ]** 을 해주면 됩니다. 반대로 !? 만약 orgin이 었다면 ** git remote add orgin [ 브랜치명 ]** 을 해주면 됩니다.&lt;/p&gt;
&lt;p&gt;밑에 실습입니다.  추가를 시켜줬고 ! &lt;strong&gt;git remote -v&lt;/strong&gt; 을 통해서 확인해본 결과 upstream 또한 추가 된 것을 볼 수 있습니다.&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/minyul/post/ea8e25de-1fd8-4ddc-ae94-831fc8e6468e/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
이제 우리는 **git pull upstream main** 을 통해서 upstream에 있는 최신 버전의 코드를 갖고와서 pull( Fetch + Merge ) 를 시켜줍니다. 이상입니다. 👏👏
&lt;h2 id=&quot;orgin-에서-single-branch-clone-했을-때-다른-branch를-못갖고온다--remote-update-not-working--&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#orgin-%EC%97%90%EC%84%9C-single-branch-clone-%ED%96%88%EC%9D%84-%EB%95%8C-%EB%8B%A4%EB%A5%B8-branch%EB%A5%BC-%EB%AA%BB%EA%B0%96%EA%B3%A0%EC%98%A8%EB%8B%A4--remote-update-not-working--&quot; aria-label=&quot;orgin 에서 single branch clone 했을 때 다른 branch를 못갖고온다  remote update not working   permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;orgin 에서 single branch clone 했을 때, 다른 branch를 못갖고온다! ( remote update not working ! )&lt;/h2&gt;
&lt;p&gt;회사에서 겪었던 일이다 ! 보통은 git clone 하고 갖고 온다. 그리고 협업을 할 때 팀원 아무나 origin에 branch 을 새로 팠을 때 나는 이 branch 를 갖고 와야한다. git remote update 를 해보자. 어? 안되네..
&lt;img src=&quot;https://images.velog.io/images/minyul/post/6d590954-f0ed-4208-b83d-ee0b63b1ac52/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
뚜둥 !! 되지않는다. 🧐🧐 ( 그냥 git clone 으로 모든 브랜치를 갖고 왔다면 git remote update로 가능하다 ! )&lt;/p&gt;
&lt;p&gt;자 ! 이제 해결해보자. 나는 origin의 main branch를 갖고 오고 싶다!
&lt;strong&gt;git remote set-branches --add origin main&lt;/strong&gt; 으로 먼저 ! 지정해주자.
아무일도 일어나지 않는다. 하지만 이미 셋팅이 되어있는 것.
&lt;img src=&quot;https://images.velog.io/images/minyul/post/eb863f0a-e0e2-4113-a666-ea03b1b2462e/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
짜잔 ! 그리고 **git fetch orgin main : main ** 해주면 ? 새로운 브랜치를 갖고 올 수 있다.&lt;/p&gt;
&lt;h2 id=&quot;rebase-에-대한-이해&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#rebase-%EC%97%90-%EB%8C%80%ED%95%9C-%EC%9D%B4%ED%95%B4&quot; aria-label=&quot;rebase 에 대한 이해 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Rebase 에 대한 이해&lt;/h2&gt;
&lt;h2 id=&quot;git-pull-안될-때--init-당시-히스토리를-서로-모를-때-&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#git-pull-%EC%95%88%EB%90%A0-%EB%95%8C--init-%EB%8B%B9%EC%8B%9C-%ED%9E%88%EC%8A%A4%ED%86%A0%EB%A6%AC%EB%A5%BC-%EC%84%9C%EB%A1%9C-%EB%AA%A8%EB%A5%BC-%EB%95%8C-&quot; aria-label=&quot;git pull 안될 때  init 당시 히스토리를 서로 모를 때  permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;git pull 안될 때 ( init 당시 히스토리를 서로 모를 때 )&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;git pull origin 브런치명 &lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;allow&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;unrelated&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;histories&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded><author>a_l_b_bloomer@naver.com</author></item><item><title><![CDATA[Builder Pattern - @Builder error : Final, @Builder.default (초기화, @Builder will ignore the initializing expression entirely) ]]></title><description><![CDATA[회사에서 금융 프로젝트를 하면서 Jenkins를 통해 빌드를 할 때 간헐적으로 에러가 발생했다. 즉슨, 어쩔때는 빌드가 성공하여 배포도 잘되었다는 것. 찾아보니 @Builder 어노테이션을 썼을 때 필드를 초기화하면 에러가 날수도 있단다. @Builder will ignore the initializing…]]></description><link>https://gb-template.netlify.com/builderdefault20220103/</link><guid isPermaLink="false">https://gb-template.netlify.com/builderdefault20220103/</guid><category><![CDATA[spring]]></category><category><![CDATA[java]]></category><pubDate>Mon, 03 Jan 2022 22:31:00 GMT</pubDate><content:encoded>&lt;p&gt;회사에서 금융 프로젝트를 하면서 Jenkins를 통해 빌드를 할 때 간헐적으로 에러가 발생했다. 즉슨, 어쩔때는 빌드가 성공하여 배포도 잘되었다는 것.&lt;/p&gt;
&lt;p&gt;찾아보니 @Builder 어노테이션을 썼을 때 필드를 초기화하면 에러가 날수도 있단다. &lt;strong&gt;@Builder will ignore the initializing expression entirely&lt;/strong&gt; version 이 올라감에 따라 이제는 필수로 써야한다고는 하는데.. 이게 오락가락 한가보다.&lt;/p&gt;
&lt;p&gt;요즘 커뮤니케이션을 하면서 &lt;strong&gt;두괄식&lt;/strong&gt;이 굉장히 중요하다고 느끼고 있다. 결론만 우선 말하면 된다. 부가적인 설명은 필요없다. 나는 우선 해결 방법을 먼저 말하고 공부한 내용을 뒤에 쓰려한다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;해결 방법&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;1.&lt;/strong&gt; fianl 키워드 붙이기
&lt;strong&gt;2.&lt;/strong&gt; @Builder.default 붙이기&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/minyul/post/ce349f71-4025-4e9c-81e4-b8dc8ef73211/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;img src=&quot;https://images.velog.io/images/minyul/post/5fd1fc2c-795c-48dd-b4b2-5741dd0467ed/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;부연 설명&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;때마침 나는 학교 동기들과 &lt;strong&gt;백기선님의 디자인패턴&lt;/strong&gt;을 공부하고 있었고 빌더패턴을 공부했기 때문에 빌더패턴을 우선 구현해보고자 한다. 되게 간단한 구현이기에 간단히 실시간 코딩과 캡처로 구현을 끝내려한다. 그리고 이 구현 연습으로 @Builder 어노테이션을 쓸 때, 잔상이라도 이 구현이 머리에 남아있으면 된다.&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/minyul/post/52137551-2ed3-4f7e-90c1-a8bab1c669b2/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;img src=&quot;https://images.velog.io/images/minyul/post/3fec6c39-dc6a-41a9-ab19-98168589878b/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;img src=&quot;https://images.velog.io/images/minyul/post/5b92db59-81dd-4b82-9693-605dd633cdf5/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;img src=&quot;https://images.velog.io/images/minyul/post/817cb122-257c-4c07-8947-f11aa5b36391/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;&lt;strong&gt;Builder 를 사용하면 우리가 생각하는 방법으로는 초기화가 되지 않는다.&lt;/strong&gt;&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/minyul/post/ef8bc43f-030c-42a8-95f1-bc530a54a6b2/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;img src=&quot;https://images.velog.io/images/minyul/post/0fb07be4-1c94-41bf-9a50-8afb13257492/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;자, 그냥 내가 만약 builder build method에 초기화를 시켰다면 ? null 이 아닌 값이 잘 나올 것이다. 그럼 왜? 이유가 뭐지? Docs 를 보자. 기본적으로 0, null, false 가 나오게 구현이 되어있다. &lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;img src=&quot;https://images.velog.io/images/minyul/post/81f5d9a7-93d2-4dc4-826e-0fa02cecd3be/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;</content:encoded><author>a_l_b_bloomer@naver.com</author></item><item><title><![CDATA[Mysql Query Between 과 >=, <= 성능 차이 비교 ( 더미데이터 50만 )]]></title><description><![CDATA[현재 친절한 SQL 튜닝을 읽고 있습니다. 그러던 중 Between And 과 Where 부등호 사이의 성능 차이가 있다는 말을 들었고 직접 Test를 진행했습니다. 2021-04-20 Stack Over flow…]]></description><link>https://gb-template.netlify.com/between20210729/</link><guid isPermaLink="false">https://gb-template.netlify.com/between20210729/</guid><category><![CDATA[mysql]]></category><category><![CDATA[db]]></category><pubDate>Thu, 29 Jul 2021 20:31:00 GMT</pubDate><content:encoded>&lt;p&gt;현재 친절한 SQL 튜닝을 읽고 있습니다. 그러던 중 Between And 과 Where 부등호 사이의 성능 차이가 있다는 말을 들었고 직접 Test를 진행했습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;2021-04-20&lt;/strong&gt; Stack Over flow, 선배님의 의견 그리고 나의 생각으로 다시 생각을 해보았을 때, 실험에 대한 실행 수가 매우 적었으며, 단지 문법만 다른 것일 뿐 explain도 같고 근거가 없기 때문에 서로 같은 것이라고 결론을 내린다. 또한, 부등호 같은 경우에는 DBMS에 종속적이지 않다는 장점이 있다는 것과 DBMS별로 성능에 대한 미세한 차이가 있을 수 있다는 결론을 내리고 글을 끝낸다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;시작&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%8B%9C%EC%9E%91&quot; aria-label=&quot;시작 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;시작&lt;/h2&gt;
&lt;p&gt;현재 친절한 SQL 튜닝을 읽고 있다. 책을 보고 있는 도중에 between, where, in 등의 의문이 들었고 많이 질문을 하면서 얘기하는 도중에 between and 과  &gt;=, &amp;#x3C;= 의 성능차이가 있다는 것을 들었다. 책에도 나오지 않았기에 의아했고 50만개의 더미데이터를 이용해서 직접 테스트를 하려한다. 과거 1년 동안은 &lt;strong&gt;그렇구나&lt;/strong&gt; 하고 끝냈다면 이제는 귀찮더라도... 해봐야지&lt;/p&gt;
&lt;h2 id=&quot;multi-module---db-entity-setting&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#multi-module---db-entity-setting&quot; aria-label=&quot;multi module   db entity setting permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Multi Module - DB Entity Setting&lt;/h2&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/f02c079b-be3d-4463-a465-3ec6b130c828/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;더미데이터를 넣기전에 테스트를 할 Entity를 설정했다. 여기서 AccessLeve, GenerationType 같은 경우는 따로 포스팅을 할 계획이다.&lt;/p&gt;
&lt;h2 id=&quot;약-50만개-데이터-생성&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%95%BD-50%EB%A7%8C%EA%B0%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%83%9D%EC%84%B1&quot; aria-label=&quot;약 50만개 데이터 생성 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;약 50만개 데이터 생성&lt;/h2&gt;
&lt;p&gt;딱히 없다. 어느 정도의 Data를 만들고 2018년부터 현재까지 데이터를 하루 단위로 넣어주었다.&lt;br&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/1d1cd465-1ca2-4728-bef2-a5b4c5ef4919/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;test---explain&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#test---explain&quot; aria-label=&quot;test   explain permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;TEST - Explain&lt;/h2&gt;
&lt;p&gt;첫 번째로 해볼 것은 Explain 이다. Explain을 우선적으로보고 차이점이 있는지 확인을 하자.
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/798cf05b-d650-4e6e-a8c5-9a6f995ee46e/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Between Explain&lt;/li&gt;
&lt;/ul&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/6f3fb711-fd9c-4df5-98c0-187819ea4fbc/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;ul&gt;
&lt;li&gt;where 부등호 Explain&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;test---성능-테스트&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#test---%EC%84%B1%EB%8A%A5-%ED%85%8C%EC%8A%A4%ED%8A%B8&quot; aria-label=&quot;test   성능 테스트 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;TEST - 성능 테스트&lt;/h2&gt;
&lt;p&gt;우선 전제로 두어야할 것은 인덱스와 Where절에 DATE TYPE을 고려하지 않고 모든 조건에 맞게끔 TEST를 하였다. 우선 부등호 부터 성능조사를 해보자.
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/77df79b3-0004-4eb6-8531-996495eaedeb/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;where 부등호&lt;/li&gt;
&lt;/ul&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/0c3e5bac-0f5f-4751-979f-4b9a3d378794/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
혹여나 캐시를 확인하자. 캐시가 없다는 것을 확인했다. 곧바로 Between으로 성능을 테스트하자
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/fe230757-0e9d-415f-9ae9-099869b4a945/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;ul&gt;
&lt;li&gt;Between&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;결과적으로 확실히 Between 보다는 Where 을 이용하여 부등호를 사용해서 조회하는 것이 빠르다. 왜이럴까?&lt;/p&gt;
&lt;h2 id=&quot;왜-이런-결과가-나오는-것일까&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%99%9C-%EC%9D%B4%EB%9F%B0-%EA%B2%B0%EA%B3%BC%EA%B0%80-%EB%82%98%EC%98%A4%EB%8A%94-%EA%B2%83%EC%9D%BC%EA%B9%8C&quot; aria-label=&quot;왜 이런 결과가 나오는 것일까 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;왜 이런 결과가 나오는 것일까?&lt;/h2&gt;
&lt;p&gt;우선 구글링에 검색해보면 CPU Cycle일 것이라는 답변이 있다. 근데 최근 친절한 SQL 튜닝에서 이런 부분에 대해서 좀 세세하게 나온것이 있어서 확인해봤다.&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/7129f0a0-cfed-4c59-a022-1ce3dcf7f9f9/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;ul&gt;
&lt;li&gt;where 부등호&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;물론 이게 정확한 예시가 아닐 수 있다. 정확하게 부등호만 나온 부분을 못찾았기에. 스캔 범위만 우선적으로 확인해봤다.&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/4da5e7d5-ae8d-4c59-a490-db6dba426a01/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;ul&gt;
&lt;li&gt;Between&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;두 사진의 공통점은 범위 스캔하는 부분이 같다는 것이다. 어찌보면 당연하다. Explain 결과도 같으니까.
눈에 보이지 않은 내부적인 부분이라 생각한다. 그게 CPU Cycle때문이라는 것이다.&lt;/p&gt;
&lt;h2 id=&quot;끝내며&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%81%9D%EB%82%B4%EB%A9%B0&quot; aria-label=&quot;끝내며 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;끝내며&lt;/h2&gt;
&lt;p&gt;결과론적으로는 Between 보다는 Where 부등호가 좀 더 좋은 선택지라는 것이다. 그리고 그 이유는 CPU Cycle이라는 확신을 내리지 못하는 답이다. 이부분에 대해서는 좀더 찾아보고 포스팅을 좀 더 추가를 해야할 것같다. 그래도 값진 경험인 것은 직접 더미데이터를 만들었으며, Explain을 통해 결과를 확인했고 CPU Cycle이라는 결과가 정말 맞는지 직접 책을 찾아보고 Scan 범위를 확인했다는 점에서 이미 나는 점차 성장하고 있다는 것을 느끼며 마무리한다.&lt;/p&gt;</content:encoded><author>a_l_b_bloomer@naver.com</author></item><item><title><![CDATA[스토리지 엔진 레벨에서의 접근법]]></title><description><![CDATA[시작 책에 있는 순서로 보면 '스토리지 엔진 레벨에서의 접근법'은 맨 마지막에 있는 목차이다. 그럼에도 불구하고 이 마지막 부분을 먼저 공부하는 이유는 페이지 수가 적기 때문이다.  오늘은 충전도 같이 해줘야하는 날이기에 타협을 봤다. InnoDB 가 짱? 다른 스토리지 엔진은? 무조건 InnoDB…]]></description><link>https://gb-template.netlify.com/index20210721/</link><guid isPermaLink="false">https://gb-template.netlify.com/index20210721/</guid><category><![CDATA[mysql]]></category><category><![CDATA[db]]></category><pubDate>Wed, 21 Jul 2021 22:31:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;시작&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%8B%9C%EC%9E%91&quot; aria-label=&quot;시작 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;시작&lt;/h2&gt;
&lt;p&gt;책에 있는 순서로 보면 &apos;스토리지 엔진 레벨에서의 접근법&apos;은 맨 마지막에 있는 목차이다. 그럼에도 불구하고 이 마지막 부분을 먼저 공부하는 이유는 페이지 수가 적기 때문이다.  오늘은 충전도 같이 해줘야하는 날이기에 타협을 봤다.&lt;/p&gt;
&lt;h2 id=&quot;innodb-가-짱-다른-스토리지-엔진은&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#innodb-%EA%B0%80-%EC%A7%B1-%EB%8B%A4%EB%A5%B8-%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%EC%97%94%EC%A7%84%EC%9D%80&quot; aria-label=&quot;innodb 가 짱 다른 스토리지 엔진은 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;InnoDB 가 짱? 다른 스토리지 엔진은?&lt;/h2&gt;
&lt;p&gt;무조건 InnoDB가 짱일까? 책을 보며 확인해보자. InnoDB는 행단위 잠금으로 데이터를 처리한다.
우선 여기서 말하는 &lt;strong&gt;&apos;잠금&apos;&lt;/strong&gt;이라는 것은 여러 트랜잭션이 동시에 동일한 Data에 접근하는 경우에 서로의 연산들이 동시성에 문제가 될 수 있으므로 간섭하지 않게 제어하는 기법이다.&lt;/p&gt;
&lt;p&gt;MySQL InnoDB 같은 경우에는 행단위 잠금이므로 여러 세션의 동시 쓰기 엑세를 지원하고 그러므로 다중 사용자, 동시성이 높은 OLTP 애플리케이션에 적합하다고 할 수 있다.&lt;/p&gt;
&lt;p&gt;여기서 또 &lt;strong&gt;&apos;OLTP&apos;&lt;/strong&gt;는 여러 사용자가 실시간으로 DB Data를 갱신, 조회하는 단위 작업 처리하는 방식이다.&lt;/p&gt;
&lt;p&gt;더 나아가 InnoDB 같은 경우에는 &lt;strong&gt;인덱스와 더불어 데이터까지 버퍼풀에 저장하기 때문에 모든 데이터가 메모리에 있으면 디스크를 읽지 않아도 되므로 강력한 성능&lt;/strong&gt;을 발휘한다.&lt;/p&gt;
&lt;p&gt;뭐 아무튼.. InnoDB가 이러한 장점이 있다면 &lt;strong&gt;단점&lt;/strong&gt; 또한 존재하는데 그 단점을 말하고자 한다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;1.&lt;/strong&gt; 인덱스와 데이터 모두 메모리에 적재되므로 메모리 사용 효율에 좋지 않다.&lt;br&gt;
&lt;strong&gt;2.&lt;/strong&gt; 보조 인덱스 같은 경우도 데이터를 찾아가는 Key를 갖고 있기에 인덱스 사이즈 자체가 커질 수 있으므로 메모리 사용 효율에 좋지 않다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;즉, 단점의 결론은 &lt;strong&gt;메모리&lt;/strong&gt; 때문에 &lt;strong&gt;로그 수집&lt;/strong&gt;에 대한 용도로 InnoDB를 쓰는 것은 바보같은 짓이다.&lt;/p&gt;
&lt;p&gt;그럼 로그를 수집하는 프로젝트에서 어떤 스토리지엔진을 쓰면 좋을까? 전에 쓰던 글에도 써있지만 &lt;strong&gt;Archive 스토리지 엔진&lt;/strong&gt;은 행 단위 잠금이며 데이터를 압축하며 디스크에 저장하기 때문에 적합한 스토리지 엔진이다. 다만, 인덱스를 생성할 수 없으며 UPDATE/DELETE를 사용할 수없기에 이런 부분에서의 기능이 필요하다면 &lt;strong&gt;MyISAM&lt;/strong&gt;을 쓰는 것을 권장한다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;MyISAM&lt;/strong&gt;같은 경우는 행단위 잠금이 아니라 테이블 단위 잠금이기에 동시성에 문제가 생기므로 동시 서비스에는 적합하지 않지만, 저사양 서버에서 사용하기 위해 고안된 스토리지 엔진이기에 &lt;strong&gt;메모리&lt;/strong&gt; 측면에서 좋은 선택지가 될 수 있다.&lt;/p&gt;
&lt;p&gt;즉, 정리해보자.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;MyISAM vs Archive&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;정말 로그 수집만을 위한 프로젝트인 경우 ( UPDATE/DELETE  가 필요로 없는 경우 ) &lt;strong&gt;Archive 스토리지 엔진&lt;/strong&gt;을 쓰고 만약, 로그 수집이지만 UPDATE/DELETE가 필요하다면 &lt;strong&gt;MyISAM 스토리지 엔진&lt;/strong&gt;을 쓰는 것이 좋은 선택지다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;InnoDB vs MyISAM &lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;로그 수집이 목적이 아니며 읽기 전용이면 &lt;strong&gt;MyISAM 스토리지 엔진&lt;/strong&gt;을 쓰고 그것이 아니라면 &lt;strong&gt;동시처리, 트랜잭션&lt;/strong&gt;을 고려해야 하는 경우 &lt;strong&gt;InnoDB&lt;/strong&gt;. 그것이 아니라면 &lt;strong&gt;MyISAM&lt;/strong&gt;을 쓰면 된다.&lt;/p&gt;
&lt;h2 id=&quot;innodb를-사용한다면-barracuda-파일-포맷-고려해보자&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#innodb%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C%EB%8B%A4%EB%A9%B4-barracuda-%ED%8C%8C%EC%9D%BC-%ED%8F%AC%EB%A7%B7-%EA%B3%A0%EB%A0%A4%ED%95%B4%EB%B3%B4%EC%9E%90&quot; aria-label=&quot;innodb를 사용한다면 barracuda 파일 포맷 고려해보자 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;InnoDB를 사용한다면 Barracuda 파일 포맷 고려해보자.&lt;/h2&gt;
&lt;p&gt;우선 전제는 MySQL 5.5 버전이상이여야한다. InnoDB 파일 포맷인 &lt;strong&gt;Barracuda을 사용한다면 데이터 저장 공간을 크게 절약&lt;/strong&gt;할 수 있다. Dynamic, Compressed 로 저장할 수 있는 형식이 있는데 이 부분은 깊게 다루지 않겠다. 간단하게 말하자면 데이터를 압축하며 저장 공간을 절약할 수 있는 느낌만 알고 가자. &lt;strong&gt;EX.&lt;/strong&gt; 버퍼풀이 24GB지만 내부적으로 40GB처럼 사용할 수있다는 것.&lt;/p&gt;
&lt;p&gt;책에 나와있는 필자의 경험에는 Amazon RDS에서 Barracuda Format을 이용하여 디스크 사용 효율을 높인 경험이 있다고 한다. 즉, 메모리가 무궁무진하며 되게 크다면 사용할 일이 없겠지만, &lt;strong&gt;제한된 메모리 크기를 극복하고자 한다면 Barracuda&lt;/strong&gt;를 고려해볼만 하다.&lt;/p&gt;
&lt;h2 id=&quot;마치며&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%A7%88%EC%B9%98%EB%A9%B0&quot; aria-label=&quot;마치며 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;마치며&lt;/h2&gt;
&lt;p&gt;항상 우리는 공부하면서 MySQL은 곧 InnoDB와 같은 느낌으로 공부를 했다. 너무나도 당연시되는 느낌이랄까. 아무 문제 없는 평범한 일상속에서의 실력이 아닌 예상하지 못한 상황에서 실력을 발휘하는 것이 진정한 개발자라고 생각한다. 지금 나의 기준 그리고 나의 위치에서 성능에 있어서 문제가 생겼을 때, &lt;strong&gt;InnoDB가 아닌 다른 스토리지 엔진을 쓰면 되지않을까? &lt;/strong&gt; 하는 생각이 나게끔 공부를 하는 것은 좋은 방향성이라고 생각한다.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;참고&lt;/strong&gt; : 실무 예제로 다가가는 MySQL 쿼리작성 MySQL 퍼포먼스 최적화 - 성동찬, 한빛미디어&lt;/p&gt;</content:encoded><author>a_l_b_bloomer@naver.com</author></item><item><title><![CDATA[MySQL TimeZone 설정 - serverTimezone=Asia/Seoul 로 수정할 때]]></title><description><![CDATA[시작 회사 신입과제를 할 때, 의외로 TimeZone에서 많은 시간을 보냈습니다. 회사 코드, DB에는 설정을 하고 계속 개발을 시작하였지만, 제가 정리하는 개인 프로젝트에는 설정이 안되어있기에 설정을 하려고 합니다. UTC(Coordinated Universal Time:세계 협정시)는 예전의 GMT(Greenwich…]]></description><link>https://gb-template.netlify.com/timezone20210719/</link><guid isPermaLink="false">https://gb-template.netlify.com/timezone20210719/</guid><category><![CDATA[mysql]]></category><category><![CDATA[db]]></category><pubDate>Mon, 19 Jul 2021 22:31:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;시작&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%8B%9C%EC%9E%91&quot; aria-label=&quot;시작 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;시작&lt;/h2&gt;
&lt;p&gt;회사 신입과제를 할 때, 의외로 TimeZone에서 많은 시간을 보냈습니다. 회사 코드, DB에는 설정을 하고 계속 개발을 시작하였지만, 제가 정리하는 개인 프로젝트에는 설정이 안되어있기에 설정을 하려고 합니다.&lt;/p&gt;
&lt;p&gt;UTC(Coordinated Universal Time:세계 협정시)는 예전의 GMT(Greenwich Mean Time)가 표준화 된 것입니다. KST(대한민국)는 UTC +9:00 인 값입니다.&lt;/p&gt;
&lt;p&gt;이제 해야할 것은 Intellij에서 JDBC URL의 ServiceTimeZone과 Mysql DB 서버와 TimeZone을 일치시켜 UTC가 아닌 KST로 수정하려합니다.&lt;/p&gt;
&lt;h2 id=&quot;intellij-설정&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#intellij-%EC%84%A4%EC%A0%95&quot; aria-label=&quot;intellij 설정 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Intellij 설정&lt;/h2&gt;
&lt;p&gt;DB를 연결하는 yml 에서 Timezone을 수정합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;url&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; jdbc&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;mysql&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;localhost&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3306&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;basic&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;serverTimezone&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;UTC&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;characterEncoding&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;UTF&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;기존에 Timezone이 UTC 였다면,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;url&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; jdbc&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;mysql&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;localhost&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3306&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;basic&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;serverTimezone&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Asia&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Seoul&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;characterEncoding&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;UTF&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Asia / Seoul 로 변경해줍니다.
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/d7e972b8-0722-47ab-a36b-88a809d8f051/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;mysql-asiaseoul-set&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#mysql-asiaseoul-set&quot; aria-label=&quot;mysql asiaseoul set permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;MySQL Asia/Seoul Set&lt;/h2&gt;
&lt;p&gt;만약 JDBC URL만 KST로 수정하고 MySQL에는 UTC로 그대로 냅두면, 계속 UTC로 남아있거나, 에러가 났을 겁니다. 그 부분을 방지하고자 같이 동기화를 시켜줍니다.&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/39a22014-2501-4d18-9656-0a067ebd3e77/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;Mysql WorkBench를 이용합니다. 우선 사진과 같이 현재 global.time_zone 과 session.time_zone을 확인합니다. 설정이 아닌 default 값으로 SYSTEM 으로 설정이 되어있습니다. 그럼 Set을 통해 변경해보겠습니다.&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/fa701b6f-fcc9-4905-98eb-e9ae4d9e4b25/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;여기서 만약 에러가 아닌 곧바로 셋팅이 된다면, 끝난거지만 보편적으로는 안될겁니다.&lt;/p&gt;
&lt;p&gt;그 다음 단계는 Asia/Seoul을 셋팅하기위해 URL에 접속합니다.
&lt;a href=&quot;https://dev.mysql.com/downloads/timezones.html&quot;&gt;https://dev.mysql.com/downloads/timezones.html&lt;/a&gt;&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/2340faf0-24cf-4996-bea0-82d1e18f4270/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
접속 후에, Window OS인 유저분들은 해당 빨간 네모칸에 있는 부분을 다운로드하면 됩니다. ( 5.7+ 이라는 것은 Mysql Version 입니다. )
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/9d00f39c-fabc-4c45-85db-2ab5ac42ce83/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;다운로드 후, 클릭을 하면 사진과 같은 압출 풀기가 나오고 더블클릭 후, Mysql Bench를 곧바로 열어주면 됩니다.&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/919f2636-ff32-4f24-9315-39cda1aa4d00/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;use mysql를 우선적으로 실행을 시킵니다. 만약 mysql Cli인 경우 password를 치면 곧바로 복붙하면 됩니다.&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/286a9916-22a8-4cb3-be84-83615f02a00d/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;이제 마지막 단계입니다. 아까와는 다르게 TimeZone이 설정이 잘됩니다.
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/05e52f96-fc73-49c6-b9be-c4c67bcfa56e/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;mysql-server-myini-설정&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#mysql-server-myini-%EC%84%A4%EC%A0%95&quot; aria-label=&quot;mysql server myini 설정 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Mysql Server my.ini 설정&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;\&lt;span class=&quot;token class-name&quot;&gt;ProgramData&lt;/span&gt;\&lt;span class=&quot;token class-name&quot;&gt;MySQL&lt;/span&gt;\&lt;span class=&quot;token class-name&quot;&gt;MySQL&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Server&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8.0&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;해당 경로를 찾아들어가서 my.ini를 찾고 설정을 해줍니다. txt 마지막 줄에&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;time&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;zone&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Asia&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Seoul&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;를 추가해주시면 됩니다. 하지만 분명히 경고창이 뜰겁니다.
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/8cb3927d-fa87-45ba-9440-05d7b3f51ee1/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/dcd0c5fb-959f-489c-a87e-2d45c3176495/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;my.ini의 오른쪽 마우스 클릭을 하고 보안 탭에 들어가서 권한을 변경해줍니다. 그리고 다시한번 변경해주면 됩니다.&lt;/p&gt;
&lt;h2 id=&quot;서버-재구동&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%84%9C%EB%B2%84-%EC%9E%AC%EA%B5%AC%EB%8F%99&quot; aria-label=&quot;서버 재구동 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;서버 재구동&lt;/h2&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/b2e72390-bd61-44ca-97c5-b0f9eab9be4c/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;밑에 &apos;검색하려면 여기에 입력하시오.&apos; 부분에 &lt;strong&gt;서비스&lt;/strong&gt;을 입력하여 서비스를 실행시키고 MySQL80을 찾아 서버 재구동을 시킵니다.&lt;/p&gt;
&lt;h2 id=&quot;결과&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B2%B0%EA%B3%BC&quot; aria-label=&quot;결과 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;결과&lt;/h2&gt;
&lt;p&gt;다시 한번 TimeZone을 확인하면 짜잔! 제대로 나오는 것을 볼수있습니다.
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/48ab99b5-fb96-4558-bacf-23d94d3e665f/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;&lt;/p&gt;</content:encoded><author>a_l_b_bloomer@naver.com</author></item><item><title><![CDATA[MySQL의 데이터 흐름 및 특징  - 답이 아닌 책을 읽으면서 나의 머리에 있는 흐름을 정리한 글]]></title><description><![CDATA[시작 나는 최근 DB에 대해 관심이 많다. 그래서 재밌게 공부하면서 나의 무기처럼 쓰기 위해 조금 깊게 팔 생각이다. 여러 책을 고민하면서 고른 책 4권 중에 MySQL…]]></description><link>https://gb-template.netlify.com/dataflow20210719/</link><guid isPermaLink="false">https://gb-template.netlify.com/dataflow20210719/</guid><category><![CDATA[mysql]]></category><category><![CDATA[db]]></category><pubDate>Mon, 19 Jul 2021 22:19:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;시작&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%8B%9C%EC%9E%91&quot; aria-label=&quot;시작 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;시작&lt;/h2&gt;
&lt;p&gt;나는 최근 DB에 대해 관심이 많다. 그래서 재밌게 공부하면서 나의 무기처럼 쓰기 위해 조금 깊게 팔 생각이다. 여러 책을 고민하면서 고른 책 4권 중에 &lt;strong&gt;MySQL 퍼포먼스 최적화&lt;/strong&gt;에 공부를 시작해볼 것이다.&lt;/p&gt;
&lt;h2 id=&quot;책을-보기-전-나는-지금-어떻게-생각하고-있는가&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%B1%85%EC%9D%84-%EB%B3%B4%EA%B8%B0-%EC%A0%84-%EB%82%98%EB%8A%94-%EC%A7%80%EA%B8%88-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%83%9D%EA%B0%81%ED%95%98%EA%B3%A0-%EC%9E%88%EB%8A%94%EA%B0%80&quot; aria-label=&quot;책을 보기 전 나는 지금 어떻게 생각하고 있는가 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;책을 보기 전 나는 지금 어떻게 생각하고 있는가?&lt;/h2&gt;
&lt;p&gt;나는 최근에 쿼리 최적화를 하면서 계속 의문이 들었다. 최적화는 최적화인데 대체 어떻게 쿼리가 DB서버까지 가서 실행이 되고 쿼리가 실행이 되면 어떻게 이게 왜 최적화인지 궁금했다. 솔직히 아직까지는 잘모르겠다.
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/82848ff1-f2ae-4d4a-b5b9-5de5ae41a80b/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;그림에는 없지만 Web Application Server 왼쪽 부분에는 WebServer가 있으며 이 Web Server와 그림에 있는 Web Application Server, Db Server까지가 Server Side쪽이고 그 Web Server와 연결된 Http 로 통신하는 부분. 즉, 사용자쪽이 또 따로 있다. Client Side라 생각하면 된다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/4b3deef6-1191-4b0a-a0da-c56b457bc1fa/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;최근 생각날 때 마다 고민하면서 그린건데 솔직히 맞는지는 잘모르겠다. 서버엔진에서 그 받은 쿼리를 파싱하고 나서 스토리지 엔진은 &lt;strong&gt;인터페이스&lt;/strong&gt;와 같은 역할로 DISK에 통신을 하는 것으로 알고 있다.&lt;/p&gt;
&lt;p&gt;즉, 나는 왜 이런 고민을 하냐면 인덱스에 대한 최적화를 공부하면서 최대한 DB에 적게 접근을 해야한다고 배웠고 그게 과연 Web Application Server에서 DB Server의 네트워크를 말하는건지 아니면 DB Server에서의 서버엔진에서 DISK로 가는 그러한 접근을 말하는 건지 이해를 할 수가 없었다.&lt;/p&gt;
&lt;p&gt;또 좀더 얘기를 해보자면 어떻게 보면 우리가 보는 쿼리는 고급언어이다. 이 고급언어를 TCP/IP로 통신을 하고 packet으로 오버헤드를 붙인 다음 프록시에 들렸다가 다시 DB Server로 쏘고 이제 여기서 MySQL 시스템이 있으며 여기에 서버엔진, 스토리지엔진이 있다고 생각하며 여기에 또한 데이터가 있는 DISK가 있다고 생각한다.&lt;/p&gt;
&lt;p&gt;그럼 이제 좀 더 나아가면 클러스터 인덱스 같은 경우에는 leaf 부분에 데이터가 이미 있기 때문에 이 DISK에 가지 않고 그렇기에 이 성능이 좋아진다는 것으로 이해하고 있다.&lt;/p&gt;
&lt;p&gt;즉, 지금 나의 머리가 복잡한 이유가 이 과정이다. 아니 이게 과연 인덱스가 필요로 한다고? 겨우 이걸로? 라는 생각으로 부터 지금 내가 생각하는 이 데이터 흐름이 과연 맞는지. 나는 이러한 생각들로 이 원론적인 부분에 들어가려한다. 물론 아직 책을 읽기 전이지만 답이 나올 것 같지는 않다. 답을 내려고 하는 것은 아니다. 물론 답이 나온다면 좋다. 이 포스팅은 나의 머리에 있는 지금 여러 흐름들을 정리하고자 쓰는 글이라고 생각하면 좋다.&lt;/p&gt;
&lt;h2 id=&quot;mysql은-전체적으로-어떻게-생겼나&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#mysql%EC%9D%80-%EC%A0%84%EC%B2%B4%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%83%9D%EA%B2%BC%EB%82%98&quot; aria-label=&quot;mysql은 전체적으로 어떻게 생겼나 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;MySQL은 전체적으로 어떻게 생겼나?&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;서버엔진&lt;/strong&gt;, &lt;strong&gt; 스토리지 엔진&lt;/strong&gt; 이 두가지를 알아야한다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;서버엔진 : 클라이언트의 요청을 받아 SQL을 처리하는 DB 자체의 기능적인 역할&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;스토리지 엔진 : 서버 엔진이 필요한 데이터를 물리 장치에서 가져오는 역할을 한다.&lt;/p&gt;
&lt;p&gt;자. 책에서 읽어보고 이해를 했을 때, 스토리지 엔진에서 DISK(물리 장치)에서 실제 데이터를 갖고 오는 것이 맞다.&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/bdf47a05-b5e3-4577-9cea-b36a086da38b/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;우선 여기까지는 내가 생각했던 것과 같다. 이 &lt;strong&gt;서버엔진&lt;/strong&gt;은 DB가 SQL을 이해할 수 있도록 쿼리를 재구성하는 쿼리 파싱, 디스크나 메모리 같은 물리적인 저장장치와 통신하는 스토리지 엔진에 데이터를 요청하는 업무를 담당한다. 즉, 이 말을 조금 더 풀어서 생각하자면 &lt;strong&gt;스토리지 엔진&lt;/strong&gt;이 데이터를 통신하기 위한 API 역할을 한다고 생각하면 쉬울 것 같다. 이것 또한 내가 생각했던 것과 같다.&lt;/p&gt;
&lt;p&gt;이제 여기서 가장 중요한 말을 하고 싶다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;스토리지 엔진에서 받아온 데이터를 사용자 요청에 맞게 처리하고 접근 제어, 쿼리 캐시, 옵티마이저 등의 역할을 수행한다. 사용자와 MySQL 사이에서 발생하는 데이터 처리 프로세스를 전부 담당한다고 생각하면 된다. &lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;이해가 되는가? 조금 더 이해하기 쉽도록 예를 보여주자면 Jojn, Group By, Order By, Function/Procedure, Trigger 와 같은 것 또한 &lt;strong&gt;서버엔진&lt;/strong&gt;에서 모두 맡아서 한다고 생각하면 된다.&lt;/p&gt;
&lt;p&gt;이제 서버엔진을 봤으니 &lt;strong&gt;스토리지 엔진&lt;/strong&gt;을 볼 차례다. 이 스토리지 엔진은 &lt;strong&gt;물리적인 저장장치에서 테이터를 읽어오는 역할&lt;/strong&gt;을 한다. 이게 되게 웃긴 것은 다른 DBMS와는 다르게 플러그인 처럼 작동하기 때문에 여러 종류의 스토리지 엔진을 간단하게 설치하여 바로 사용할 수 있다. 예를 들면 InnoDB, MyISAM과 같은 엔진이 있다.&lt;/p&gt;
&lt;h2 id=&quot;mysql에서-스토리지-엔진이란-무엇인가&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#mysql%EC%97%90%EC%84%9C-%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%EC%97%94%EC%A7%84%EC%9D%B4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80&quot; aria-label=&quot;mysql에서 스토리지 엔진이란 무엇인가 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;MySQL에서 스토리지 엔진이란 무엇인가?&lt;/h2&gt;
&lt;p&gt;MySQL은 이러한 다양한 엔진으로 부터 다른 DBMS보다도 강력하다고 할 수 있다. 확장성과 유연함에서 말이다. 우리는 다른 엔진보다도 InnoDB를 엔진을 많이쓴다. 이유는 무엇일까?&lt;/p&gt;
&lt;p&gt;InnoDB는 &lt;strong&gt;MySQL에서 유일하게 트랜잭션을 지원하는 스토리지 엔진이다.&lt;/strong&gt; 그렇기에 많이 쓴다. 또한 그 경쟁자 MyISAM 같은 경우는 인덱스만 메모리에 올리지만 &lt;strong&gt;InnoDB는 인덱스와 데이터를 모두 올린다는 것이 가장 성능에 차이가 있다는 것&lt;/strong&gt;. 즉, InnoDB_Buffer_Pool_Size가 DB성능에 큰 영향을 주기도 한다.&lt;/p&gt;
&lt;p&gt;그럼 너무나도 당연한게 InnoDB에서는 클러스터 인덱스를 사용할 수 있지만 MyISAM같은 경우는 클러스터 인덱스를 지원하지 않는다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Archive 스토리지 엔진&lt;/strong&gt;??
나는 이 책을 읽으면서 처음으로 들어본 엔진이다. 책을 읽으면서 너무 쓸데없는 부분이 있거나 쓰지 않는 엔진같은 경우 정리를 하지 않지만 이 엔진 같은 경우에는 나중에라도 한번은 쓸 수 있을 것같아서 정리를 한다. 이 엔진 같은 경우에는 &lt;strong&gt;로그 수집에 적합한 스토리지 엔진&lt;/strong&gt;이다.  데이터가 메모리상에서 압축되고 !! 이 상태로 디스크에 저장되기에 행 단위 잠금이 가능하고 UPDATE, DELETE를 사용할 수 없기 때문에 굉장히 로그와 같은 통계 프로젝트에 적합하다. 즉, 압축을 하므로 디스크에 대한 용량 또한 많이 줄일 수 있어서 좋다.&lt;/p&gt;
&lt;h2 id=&quot;mysql은-데이터를-어떻게-처리-할까&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#mysql%EC%9D%80-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%B2%98%EB%A6%AC-%ED%95%A0%EA%B9%8C&quot; aria-label=&quot;mysql은 데이터를 어떻게 처리 할까 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;MYSQL은 데이터를 어떻게 처리 할까?&lt;/h2&gt;
&lt;p&gt;MySQL은 SQL을 병렬 처리하지 않는다... 음.. 우선 병렬처리는 하지 않는다. 모든 SQL을 단일 코어에서 처리한다.&lt;/p&gt;
&lt;p&gt;우선 팩트만 말하면 &lt;strong&gt;MySQL 입장에서는 CPU 코어 개수를 늘리는 Scale-Out 보다는 단위 처리량이 좋은 CPU로 Scale-Up 하는 것이 훨씬 좋다.&lt;/strong&gt; 이게 팩트다.&lt;/p&gt;
&lt;p&gt;MySQL의 Join은 항상 &lt;strong&gt;Nested Loop Join&lt;/strong&gt; 알고리즘으로 처리한다.
이러한 Nested Loop Join 같은 경우에는 처리할 데이터가 적어지면 수행 속도가 빠르지만 테이블 A나 테이블 B 중 하나라도 연산해야 할 데이터가 많아지면 쿼리 효율이 기하급수적으로 떨어진다.&lt;/p&gt;
&lt;p&gt;이제 여기서 내가 알고 있던 지식은 드라이빙 테이블에서 드라이븐 테이블로 접근할 때, 드라이븐 테이블에서 인덱스가 없으면 풀스캔이 난다는 지식만 알고 있었고 만약 그렇지 않으면 풀스캔을 한다는 것만 알고 있었다. 이 책을 읽어보고 여기서 조금 더 추가를 하자면 3개의 for 반복문이 있고 하나의 테이블이 더 생성되며, 만약 드라이븐 테이블에서 마땅한 index가 없으면 3번째 테이블을 이용한 풀스캔을 한다는 것을 알았다.&lt;/p&gt;
&lt;p&gt;그리고 조금 더 나아가자면 &lt;strong&gt;Block Nested Loop Join&lt;/strong&gt;을 알았다. 즉, DB 내부에서 조금 더 성능을 높이기 위해서 테이블 조인 시 필요한 데이터를 일시적으로 메모리에 저장하여 효율적으로 데이터에 접근하는 것!&lt;/p&gt;
&lt;p&gt;우선 이 부분은 읽어봐도 이해가 되지는 않지만, 드라이븐 테이블에 접근하는 빈도수를 더 적게 해주면서 성능이 좋아지는 것같다.&lt;/p&gt;
&lt;h2 id=&quot;마치며&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%A7%88%EC%B9%98%EB%A9%B0&quot; aria-label=&quot;마치며 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;마치며&lt;/h2&gt;
&lt;p&gt;오늘 쉬는 날이기도 해서 가볍게 DB에 대한 책을 읽어보기 시작했다. 이 책은 작다. 그리고 페이지수도 적다. 출, 퇴근 시간에 버스에서 읽으려고 했는데 멀미가 나서 그 동안 읽지 못했다. 무튼.. 결론은 굉장히 작은 책이지만 재밌었다.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;참고&lt;/strong&gt; : 실무 예제로 다가가는 MySQL 쿼리작성 MySQL 퍼포먼스 최적화 - 성동찬, 한빛미디어&lt;/p&gt;</content:encoded><author>a_l_b_bloomer@naver.com</author></item><item><title><![CDATA[Where 조건에 대한 이해]]></title><description><![CDATA[시작 where…]]></description><link>https://gb-template.netlify.com/lke20210630/</link><guid isPermaLink="false">https://gb-template.netlify.com/lke20210630/</guid><category><![CDATA[mysql]]></category><category><![CDATA[db]]></category><pubDate>Wed, 30 Jun 2021 22:31:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;시작&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%8B%9C%EC%9E%91&quot; aria-label=&quot;시작 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;시작&lt;/h2&gt;
&lt;p&gt;where 조건문을 그냥 쓰지말자. 알고 쓰자.&lt;/p&gt;
&lt;h2 id=&quot;묵시적-형변환-함정에-빠지지-말기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%AC%B5%EC%8B%9C%EC%A0%81-%ED%98%95%EB%B3%80%ED%99%98-%ED%95%A8%EC%A0%95%EC%97%90-%EB%B9%A0%EC%A7%80%EC%A7%80-%EB%A7%90%EA%B8%B0&quot; aria-label=&quot;묵시적 형변환 함정에 빠지지 말기 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;묵시적 형변환 함정에 빠지지 말기&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;묵시적 형변환&lt;/strong&gt;. 조건절의 데이터 타입이 다를 때, 우선 순위가 높은 타입으로 형이 내부적으로 변환되는 것을 말하는 데 이게 개발자들이 모르면서 그냥 넘어가는 경우가 많다. 묵시적으로 변환을 해주기 때문에.&lt;/p&gt;
&lt;p&gt;예를 들어, 문자열과 정수값을 비교한다고 하면 당연히 두 타입을 똑같은 형으로 변환을 시키고 비교를 해야하므로 문자열이 정수로 또는 정수가 문자열로 변환이 되어야한다. 현재 우선순위로는 정수 타입이 문자열보다 높으므로 자연스럽게 문자열 타입이 정수 타입으로 묵시적으로 변환이 된다.&lt;/p&gt;
&lt;p&gt;우리는 &lt;strong&gt;인덱스&lt;/strong&gt;라는 것을 쓰면서 풀스캔을 방지한다. &apos;친절한 SQL 튜닝&apos;이라는 책에서도 나왔지만 이 &lt;strong&gt;인덱스에 대한 필드가 형변환이 내부적으로 일어나면 범위를 좁히지 못하고 풀스캔을 하는 경우가 발생&lt;/strong&gt;한다.&lt;/p&gt;
&lt;p&gt;자. 생각해보자. 그럼 우선 순위가 정수 타입이 높으므로 문자열을 넣는다 해도 정수형이 필요하면 묵시적으로 정수형으로 형변환이 되기 때문에 귀찮음이 많은 개발자라면 &apos;문자열&apos;을 넣어주면 괜찮다.&lt;/p&gt;
&lt;p&gt;다만, whitespace라던가 예기치못한 상황이 올수도 있으므로 생각하며 형에 맞춰서 질의를 해주자.&lt;/p&gt;
&lt;p&gt;( + 성능 테스트하는 법 : 28 page 참고 )&lt;/p&gt;
&lt;h2 id=&quot;편리한-함수-잘못-쓰면-성능에-독이-된다&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%8E%B8%EB%A6%AC%ED%95%9C-%ED%95%A8%EC%88%98-%EC%9E%98%EB%AA%BB-%EC%93%B0%EB%A9%B4-%EC%84%B1%EB%8A%A5%EC%97%90-%EB%8F%85%EC%9D%B4-%EB%90%9C%EB%8B%A4&quot; aria-label=&quot;편리한 함수 잘못 쓰면 성능에 독이 된다 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;편리한 함수, 잘못 쓰면 성능에 독이 된다&lt;/h2&gt;
&lt;p&gt;각 DBMS는 내장된 함수를 제공하고 사용자 정의함수도 제공하기에 빈번하게 사용한다. 하지만 이러한 함수가 시스템 부하를 야기한다. 우리의 DB튜닝 목표 중 하나 DBMS가 이해하기 쉽게 SQL을 작성하는 것도 포함이 된다.&lt;/p&gt;
&lt;p&gt;우리는 적절한 인덱스, 테이블 파티셔닝을 통해 데이터를 빨리 찾을 수 있다는 팩트를 알고 있다.&lt;/p&gt;
&lt;p&gt;예를 들어보자. DATE_FORMAT 이라는 내장 함수가 있다. 그리고 우리는 cumlative_time 이라는 필드로 인덱스를 걸었다. 과연, 이 DATE_FORMAT을 쓰면 옵티마이저가 cumlative_time의 데이터 분포도를 알 수 있을까? &lt;strong&gt;알지 못한다.&lt;/strong&gt; 이게 문제다. DATE_FORMAT &lt;strong&gt;내장 함수로 인해 변경될 결과값을 옵티마이저가 예상하지 못하기 때문이다.( 데이터 분포도 )&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;또한, 이러한 상황이 아니더라도 이 내장 함수를 한 쿼리에 여러번 사용하다보면 시스템적으로 부하가 일어난다 . ( 직관적으로 생각했을 때, 느낌이 오죵? )&lt;/p&gt;
&lt;p&gt;즉, 나의 결론을 말하자면 이 함수는 고급언어라고 생각한다. 무슨 말이냐면 DBMS가 이해하기 쉬운 언어가 아니라 개발자, 사용자가 사용하기 쉬운 언어라는 것이다. &lt;strong&gt;우리는 성능이 좋게 튜닝하는 것이 목적이기에 우리가 보기 좋은 것보다는 DBMS가 읽기 쉬운 언어로 쿼리를 짜야한다.&lt;/strong&gt; DB 입장에서 SQL을 작성하자.&lt;/p&gt;
&lt;h2 id=&quot;like-검색을-아무-때나-써야-하나&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#like-%EA%B2%80%EC%83%89%EC%9D%84-%EC%95%84%EB%AC%B4-%EB%95%8C%EB%82%98-%EC%8D%A8%EC%95%BC-%ED%95%98%EB%82%98&quot; aria-label=&quot;like 검색을 아무 때나 써야 하나 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;LIKE 검색을 아무 때나 써야 하나?&lt;/h2&gt;
&lt;p&gt;데이터를 조회할 때 특정 단어가 들어 있는 데이터를 검색하기 위해 LIKE 를 쓴다. 우선 팩트부터 말하자면 &lt;strong&gt;대용량 테이블일 경우 위험.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;또 정말 중요한 팩트부터 얘기하자면 인덱스는 데이터가 위치한 곳을 지칭한다. ( + 커버링, 클러스터 같은 경우 지칭을 떠나 그 자체로 데이터가 됨)  또한, 실 데이터에 대한 데이터를 다시 읽어야 하기 때문에 중복된 데이터 처리 비용보다는 테이블 풀스캔으로 접근하는 것이 훨씬 빠르다고 옵티마이저가 상황에 따라 판단한다.&lt;/p&gt;
&lt;p&gt;또한 &lt;strong&gt;인덱스는 메모리도 차지하며 디스크를 소모하고 CPU 연산이 필요한 데이터이다. 즉, 장점만 있는 것이 아니라는 것을 알자.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;중요 !&lt;/strong&gt;
이 LIKE 같은 경우도 만약 필드가 인덱스에 걸려있다면, &apos;%&apos;위치에 따라서 의미가 있을 수도 또는 없을 수도 있다. 즉, 아이디인 &quot;ggomjae&quot; 를 예를 들어보면 이 아이디 필드가 &quot;ggom%&quot;일 경우에는 인덱스를 탄다. 왜? g 부터 데이터의 시작점을 찾으니까. 근데 만약 &quot;%omjae&quot; 일 경우에는 아무리 아이디 필드가 인덱스여도 타지 않는다. 그 기준점이 모호하기 때문이다. 즉, 인덱스임에도 불구하고 풀스캔을 때린다.&lt;/p&gt;
&lt;p&gt;여기까지는 익히 알고 있었던 지식인데 책을 읽으면서 &apos;아! &apos; 했던 부분이 아무리 앞부분이 살아있다고 하더라도 옵티마이저가 데이터 분포도를 확인했을 때, 전체 데이터의 &lt;strong&gt;20%이상&lt;/strong&gt;이 분포되어있다고 판단했을 때, 인덱스가 아닌 &lt;strong&gt;풀스캔&lt;/strong&gt;을 때려버린다.&lt;/p&gt;
&lt;p&gt;이유는 20% 이상이 넘어가면 인덱스를 읽고 다시 데이터 파일로 갈게 아니라 처음 부터 데이터 파일을 읽는게 빠르다고 생각하기 때문이다.&lt;/p&gt;
&lt;p&gt;책의 LIKE 부분 마지막 챕터에 중요한 결론이 나오는 데 정리하자면, &lt;strong&gt;LIKE 조건이 &apos;검색어%&apos;와 같은 경우 데이터 분포도에 따라 옵티마이저가 판단하며 보편적으로 20%가 넘어가면 풀스캔을 때린다.&lt;/strong&gt; 만약, 앞부분이 아니라 뒷부분 &lt;strong&gt;&apos;%검색어&apos;와 같다면 LIKE가 아닌 다른 조건도 더 붙여서 데이터 범위를 최대한 줄이도록 해보자.&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;마치며&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%A7%88%EC%B9%98%EB%A9%B0&quot; aria-label=&quot;마치며 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;마치며&lt;/h2&gt;
&lt;p&gt;이 책은 나에게 굉장히 좋은 점이다. &apos;친절한 SQL 튜닝&apos;을 아직 다 읽지는 않았지만 어느 정도 읽은 상태에서 이 책을 보니까 굉장히 조각처럼 있는 지식들이 한곳에 뭉쳐서 정확한 지식이 되는 느낌이다. 조금의 물질적인 것과 접착제같은 느낌이랄까. 즉, DBMS에 대해서 처음 공부를 하는 사람이면 좋다고 생각하지 못할 것이다. 얇은 만큼 설명이 굉장히 축소되어있기 때문이다. 무튼, 이번 챕터도 굉장히 얻어가는 게 많은 챕터였다. 좋다!!&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;참고&lt;/strong&gt; : 실무 예제로 다가가는 MySQL 쿼리작성 MySQL 퍼포먼스 최적화 - 성동찬, 한빛미디어&lt;/p&gt;</content:encoded><author>a_l_b_bloomer@naver.com</author></item><item><title><![CDATA[Cluster Index vs Non-Cluster Index 이론 및 성능 비교 ( JPA + MYSQL )]]></title><description><![CDATA[시작 나는 항상 Auto-Increment를 이용해서 PK를 넣었다. 하지만 이번에 통계 프로젝트를 하면서 Auto_Increment가 아닌 PK에 Time, name을 PK로 설정을 했다. 그 이유는 명료하다. Auto_Increment 로 PK를 설정하는 것보다 Cluster Index…]]></description><link>https://gb-template.netlify.com/clusterindex20210629/</link><guid isPermaLink="false">https://gb-template.netlify.com/clusterindex20210629/</guid><category><![CDATA[mysql]]></category><category><![CDATA[db]]></category><pubDate>Mon, 28 Jun 2021 20:31:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;시작&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%8B%9C%EC%9E%91&quot; aria-label=&quot;시작 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;시작&lt;/h2&gt;
&lt;p&gt;나는 항상 Auto-Increment를 이용해서 PK를 넣었다. 하지만 이번에 통계 프로젝트를 하면서 Auto_Increment가 아닌 PK에 Time, name을 PK로 설정을 했다. 그 이유는 명료하다. Auto_Increment 로 PK를 설정하는 것보다 Cluster Index로 설정을 하는 것이 성능에 좋다는 것을. 물론 무조건 장점만 있다면 무엇이든 Cluster Index로 설정을 하겠지만 여러가지 경우의 수를 생각해야하며 Auto_Increment가 아닌 유동적인 Column을 이용한 PK로 설정하면 나중 생각지도 못한 경우로 DB 스키마 자체를 뜯어내야하기 때문에 좀 더 신경써서 설정을 해야한다. 간단하게 설명하고 싶다. 이해하기 어려웠기에.&lt;/p&gt;
&lt;h2 id=&quot;non-cluster-index&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#non-cluster-index&quot; aria-label=&quot;non cluster index permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Non Cluster Index&lt;/h2&gt;
&lt;p&gt;Non Cluster Index는 우리가 흔히 쓰는 인덱스다. 보통은 Auto-Increment로 PK를 설정하고 데이터를 찾고자 할 때, 빨리 찾기 위해 정렬을 위한 Index를 설정 하는 것이 Non Cluster Index이다. 이 인덱스는 여러개 생성을 할 수 있다.&lt;/p&gt;
&lt;p&gt;생각해보자. 우리는 인덱스가 무엇인지 알고 있다. 흔히 설명하는 색인 또는 찾아보기목록. 그렇다. 우리가 책을 읽고 맨 앞 그리고 맨 뒤에 &lt;strong&gt;찾아보기&lt;/strong&gt; 이게 바로 Non Cluster Index다. 우리가 매일 말하는 인덱스는 어떻게보면 항상 자연스럽게 Non Cluster Index를 얘기하고 있는 것.&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/418b68ec-88e6-40e0-840b-8dd208d805d9/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;그림을 보면 이해하기가 쉽다. 현재 8을 찾고자한다. Index가 있다는 것은 무조건 그 기준으로 정렬이 되있다는 뜻이다. 즉, 인덱스 테이블이 여러개 있다. 그림을 보면 그 중간이 임시 테이블이며 인덱스 테이블이다. 인덱스 테이블을 보면 그 값이 있는 것이 아니라 또 &lt;strong&gt;3페이지 -2&lt;/strong&gt; 라는 주소값을 갖게 된다. 그리고 그 주소값을 향해 찾아가면 데이터가 있다. 현재 중간에 있는 것이 Leaf 인덱스다. 그리고 그 Leaf 인덱스 값에는 그 데이터 값 자체가 있는 것이 아닌 데이터가 있는 주소값을 갖고있다.&lt;/p&gt;
&lt;p&gt;현재 Dept 이 1밖에 안되서 그렇지 좀 더 Dept이 있다고 가정해보면 이 왼쪽에서 오른쪽으로 가는 과정들이 각 각의 값들이 주소값이며 이것을 수직적 탐색이라고 한다.&lt;/p&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/4e29caab-13b6-4a20-8125-3b4d0277bad5/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;친절한 SQL에 있는 하나의 예시다. 오른쪽 그림을 보면 인덱스라는 dept에 수직적으로 스캔을 하고 마지막으로 수평 스캔을 한다음 각 ROWID를 얻고 데이터 테이블에 랜덤엑세스를 한다.&lt;/p&gt;
&lt;p&gt;책의 내용에 이런 문장이 있다. &lt;strong&gt;수평적인 스캔을 하는 이유 ?&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;첫째, 조건절을 만족하는 데이터를 모두 찾기 위해&lt;/li&gt;
&lt;li&gt;둘째, ROWID를 얻기 위해&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이 ROWID란, 데이터가 있는 테이블에 주소값이라고 생각하면 된다.
이게 바로 우리가 매일 사용하고 있는 인덱스며 Non Cluster Index 이다.&lt;/p&gt;
&lt;h2 id=&quot;cluster-index&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#cluster-index&quot; aria-label=&quot;cluster index permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Cluster Index&lt;/h2&gt;
&lt;p&gt;Non Cluster Index를 이해했으면 쉽게 Cluster Index를 이해할 수 있을 것이다. 그 이유는
테이블 자체가 클러스터드 인덱스의 리프 노드(leaf node)로서 기능하기 때문에 쉽다. 즉, Non Cluster Index의 leaf node는 이 데이터를 찾기 위해 ROWID를 갖고 데이터를 찾아야했다.
하지만 Cluster Index는 이 leaf node에 데이터 값이 있기 때문에 시간이 절약되며 훨씬 빠르게 찾을 수 있다는 것이 장점이다.&lt;/p&gt;
&lt;p&gt;물론 단점도 있다. Insert Data 를 할 때 단점이 있다. 이유는 Non Cluster Index처럼 따로 인덱스를 관리하는 것이 아닌 Cluster Index는 물리적인 즉, 그 자체로 정렬을 하기 때문에 Insert Data를 할 때, 정렬에 맞게 끔 insert를 해야하므로 이부분에서는 Non Cluster Index보다 성능이 좋지 않다.&lt;/p&gt;
&lt;p&gt;그럼 여기서 결론을 내릴 수 있다. Cluster Index는 insert Data 보다는 Read를 하는 프로젝트일 때 좋은 선택지다. 예를 들자면 Batch Module로 통계에 대한 값들을 주기적으로 DB에 넣고 API Module로 그 값들을 읽어 드리는 프로젝트 일 경우는 적합하다.&lt;/p&gt;
&lt;h2 id=&quot;직접-확인하기-cluster-index-vs-non-cluster-index---1-jpa에-대한-구현&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%A7%81%EC%A0%91-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0-cluster-index-vs-non-cluster-index---1-jpa%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B5%AC%ED%98%84&quot; aria-label=&quot;직접 확인하기 cluster index vs non cluster index   1 jpa에 대한 구현 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;직접 확인하기 Cluster Index vs Non Cluster Index - 1 JPA에 대한 구현&lt;/h2&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/ede1d587-3185-471e-9d48-d016bb23e173/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;NonClusterIndex 같은 경우에는 보통 우리가 했던 GenerationType.IDENTITY를 이용하여 구현하였고 ClusterIndex 같은 경우에는 @EmbeddedId를 이용하여 구현하였다.&lt;a href=&quot;https://albbloomer.github.io/generationtype20210404/&quot;&gt;AUTO를 쓰지 않은 이유&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;직접-확인하기-cluster-index-vs-non-cluster-index---2-10만개-더미데이터를-이용한-성능-확인&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%A7%81%EC%A0%91-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0-cluster-index-vs-non-cluster-index---2-10%EB%A7%8C%EA%B0%9C-%EB%8D%94%EB%AF%B8%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%84%B1%EB%8A%A5-%ED%99%95%EC%9D%B8&quot; aria-label=&quot;직접 확인하기 cluster index vs non cluster index   2 10만개 더미데이터를 이용한 성능 확인 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;직접 확인하기 Cluster Index vs Non Cluster Index - 2 10만개 더미데이터를 이용한 성능 확인&lt;/h2&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/0fb9db4d-5411-4410-b256-834e170aae6a/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;p&gt;각 차이점은 cluster_index_entity는 pk 즉, cluster index를 이용하여 값을 구하고 non_clusterindex_entity는 non cluster index를 이용하여 값을 구한다는 것이다.
그리고 결과적으로 Query Cost에 대한 차이가 있다.&lt;/p&gt;
&lt;h2 id=&quot;index에-대한-우리가-가져가야할-생각&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#index%EC%97%90-%EB%8C%80%ED%95%9C-%EC%9A%B0%EB%A6%AC%EA%B0%80-%EA%B0%80%EC%A0%B8%EA%B0%80%EC%95%BC%ED%95%A0-%EC%83%9D%EA%B0%81&quot; aria-label=&quot;index에 대한 우리가 가져가야할 생각 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Index에 대한 우리가 가져가야할 생각&lt;/h2&gt;
&lt;p&gt;친절한 SQL책을 읽어보면서 좋은 표현이라고 해야하나.. 좋은 문장이 많다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;인덱스를 정상적으로 사용한다
인덱스를 정상적으로 사용한다는 것은 &lt;strong&gt;리프 블록에서 스캔 시작점을 찾아 거기서부터 스캔을 하다가 중간에 멈추는 것&lt;/strong&gt; 이라고 한다. 즉, 나의 생각은 수직적인 스캔을 하고 ROWID를 찾는 과정 또는 데이터를 찾는 과정에서 적절하게 범위를 조절하는 것이 인덱스를 제대로, 정상적으로 사용한다고 하는 말 같다. 만약, 이 적절한 범위를 찾지 못하거나 인덱스를 잘못걸어준다면 우리가 가장 꺼려하는 (물론 손익분기점에 따른 예외도 있지만) Index FullScan방식으로 작동을 하게 된다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;인덱스를 사용하는 이유는 &lt;strong&gt;정렬&lt;/strong&gt;이다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;인덱스 스캔을 하는 이유는 &lt;strong&gt; 소량의 데이터를 빨리 찾고 ROWID를 얻기 위해&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;수직적 탐색은 &lt;strong&gt;인덱스 스캔 시작지점을 찾는 과정&lt;/strong&gt;
수평적 탐색은 &lt;strong&gt;데이터를 찾는 과정&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Table Full Scan은 시퀀셜 액세스인 반면, 인덱스 ROWID를 이용한 테이블 액세스는 랜덤 액세스&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Table Full Scan은 Multiblock I/O인 반면, 인덱스 ROWID를 이용한 테이블 액세스는 Single Block I/O&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;인덱스 손익분기점 이 그래프의 5% ~ 20%는 10만에서 100만건정도의 수치고 1000만건 등의 큰 수치일 수록 이 손익분기점은 내려간다.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/578ed161-bc43-45b0-9577-bbefd30c2345/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;h2 id=&quot;끝내며&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%81%9D%EB%82%B4%EB%A9%B0&quot; aria-label=&quot;끝내며 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;끝내며&lt;/h2&gt;
&lt;p&gt;나는 이번 신입 사원 프로젝트로 후후 통계 프로젝트를 했다. Spring Batch를 이용하여 통계낸 것을 Api Module에서 통계값을 가져와 통계 그래프와 결과를 보여주는 프로젝트다. 이러한 프로젝트를 통해서 Non Cluster Index, Cluster Index를 알았고 그 과정속에서 Index에 대한 깊이를 조금은 들어왔다고 생각한다. 굉장히 배울점이 많아서 좋았던 프로젝트였고 더 나아가 Group By에 대한 이슈가 있었으므로 그 부분또한 추후에 포스팅을 할 예정이다.&lt;/p&gt;
&lt;p&gt;2021-05-11 : 커버링 vs 클러스터 차이 추가
&lt;img src=&quot;https://images.velog.io/images/ggomjae/post/7f4a834f-689f-4cdd-be10-9b563d130503/image.png&quot; width=&quot;100%&quot; alt=&quot;&quot;&gt;&lt;/p&gt;</content:encoded><author>a_l_b_bloomer@naver.com</author></item><item><title><![CDATA[GenerationType.AUTO Insert into table values Error -> GenerationType.IDENTITY]]></title><description><![CDATA[시작 오늘 Entity 하나를 만들 때 낯선 오류를 발견했다. 최근에 복합키를 이용한 Entity를 만들어서 그런지 Auto-Increment를 이용한 Entity를 만들고자했들고자 했을 때, insert into Table values 가 먹히지 않은 것이었다. 그래서 한번 찾아보고 공부해봤다. 사건 Entity…]]></description><link>https://gb-template.netlify.com/generationtype20210404/</link><guid isPermaLink="false">https://gb-template.netlify.com/generationtype20210404/</guid><category><![CDATA[java]]></category><category><![CDATA[spring]]></category><pubDate>Sun, 04 Apr 2021 22:31:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;strong&gt;시작&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;오늘 Entity 하나를 만들 때 낯선 오류를 발견했다. 최근에 복합키를 이용한 Entity를 만들어서 그런지 Auto-Increment를 이용한 Entity를 만들고자했들고자 했을 때, insert into Table values 가 먹히지 않은 것이었다. 그래서 한번 찾아보고 공부해봤다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;사건&lt;/strong&gt;&lt;/p&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 419px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 90.3030303030303%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACZklEQVQ4y41U2ZLbIBD01wjEYRkw4hAg23ukdpPKQ9ab//+TToFk7+XaykPXUAMaTdPTbM7njOAJUuJIE0OMDFOsUcKHCTEVWDtCaYMQE2LKCFOGCxGj9ohjhjM1JgghsHl9LciJIHgOIRik5FcIKSHlth3kvObkFUtOQPBlj69x8/o3IwYCN3L0PQNjC+q67/uGS+5/sHl5mhF3FFYJFMPhtWx0plQQpoTRB+yUaodrB6LGG7jkN4dS0FMCUSkJ3iIXAkLIRvlCtx6mnKP7BnV/k1KB1gRT5Ohr2/wrjVaMMYyU4th1OBCCQ40r5q7DqevgKV0K2j3B6cgRw6JwyaytQ7RwYcKUMkyc8If2OLuAZ+vwywX8tCN++4jHQeNla3HuyFJwbwjmwpFTj5gc8jxD6x2UHmCchtnvoJzFiTE8EYIHQvBIKR4JwY++xwOheO5I63KTcoGSFMUKHEcGawzyfIIxe6hhCy74Ar7cIWFvkVzjuq53WEoBJQSyKcjf1FwFYpdR6hl4zxbR2r3ym2o3ykoRTIkjxh4+Okx5xjAMkIOAsgMGLVtU+wHKKEghrj/+jEZZbykOo8CdY/CjRSrHZQaNQxgneBubtUZjGvX64fuC79dXymKl3KisNmuzuNprwUrzU1cfClbKxhCUmbeHwe7ZBwsu+N6C74teKZ+8wGQ4lFJNYa0NtNZtDuur43zE6Hx7aXycEOuL40Nj8oVyTykGKZCal7cY9xG+wkaEMUGppXAV6wLnXBPnC+Wcc/Ns8y9ni5+bl1fwN0Wbt1d/17G6Sfnu7h6kirKOwnd3dCv/ucN/xG4w9KEbsYsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;jpa1&quot; title=&quot;jpa1&quot; src=&quot;/static/0fbad8b9dc66d6b7e4ede9a511dde146/96e9b/jpa1.png&quot; srcset=&quot;/static/0fbad8b9dc66d6b7e4ede9a511dde146/103f2/jpa1.png 165w,
/static/0fbad8b9dc66d6b7e4ede9a511dde146/748ba/jpa1.png 330w,
/static/0fbad8b9dc66d6b7e4ede9a511dde146/96e9b/jpa1.png 419w&quot; sizes=&quot;(max-width: 419px) 100vw, 419px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;ul&gt;
&lt;li&gt;Entity&lt;/li&gt;
&lt;/ul&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 511px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 25.454545454545457%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9ElEQVQY0z2Ouw6CYAyF/0UUlMjNAAZjAibAysplgAmURFAQJibf/xGOaRMcvpz2nDatWJYFVVXh8Xigrmu0bYumaXC/31GWJfI8R1EUyLLsr+SRpmn6r1dEHMc4Ho+MoiislmVB13Xsdjtst1uoqgrDMFg1TWM1TfPv0Sz5sixDJEmCy+WC8/nMA7Zt43q9MqfTiRcpv91ucF0XURRxFoYhfN+H53mck+c4DgQN0NL61X6/Z6Xl9fLhcOBD9C3V9EkQBNxvNhsIIRhJkiC+3y/e7zc+nw/mecY4jhiGAdM0sUdQvvJ8PvF6vTjv+57rrusYyn5JT5VHBGCcGgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;jpa2&quot; title=&quot;jpa2&quot; src=&quot;/static/3339f050f2bca22add894f5ba48d5efa/40f84/jpa2.png&quot; srcset=&quot;/static/3339f050f2bca22add894f5ba48d5efa/103f2/jpa2.png 165w,
/static/3339f050f2bca22add894f5ba48d5efa/748ba/jpa2.png 330w,
/static/3339f050f2bca22add894f5ba48d5efa/40f84/jpa2.png 511w&quot; sizes=&quot;(max-width: 511px) 100vw, 511px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;ul&gt;
&lt;li&gt;스키마&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;위의 코드처럼 Entity를 만들었고 GenerationType을 AUTO로 넣어주었다.
MySQL Bench를 열어 Insert를 해준결과..&lt;/p&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 13.939393939393941%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAe0lEQVQI133GzQqDMBBFYd//BV3Y2q31J5OJMcVk4iniqhS88HFPIyGwpg9hS2jcCKez14j3eivoimr40Qxty9x1SN/jnj3yeuG6B3F4k4ux7/lPzoWUEuM44r1HRFBVxAnN4RxlnrHlUpcFmyaOGLnfgVmh1opVu96ML9jW5v+ZojryAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;jpa3&quot; title=&quot;jpa3&quot; src=&quot;/static/d722d7815e2b219cb9ca4d99a106afbd/7c811/jpa3.png&quot; srcset=&quot;/static/d722d7815e2b219cb9ca4d99a106afbd/103f2/jpa3.png 165w,
/static/d722d7815e2b219cb9ca4d99a106afbd/748ba/jpa3.png 330w,
/static/d722d7815e2b219cb9ca4d99a106afbd/7c811/jpa3.png 660w,
/static/d722d7815e2b219cb9ca4d99a106afbd/a3e85/jpa3.png 779w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;p&gt;짜잔 ! insert가 되지 않고 에러를 뿜어냈다. 이유가 무엇일까?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Insert into table values 가 먹히지 않은 이유&lt;/strong&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 529px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 119.3939393939394%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAAC60lEQVQ4y5WU2W7kNhBF/f+/lQRB8upxGzHsttS7lhYl7hIlnoBse9LOjNsJgdIG6YhV91bdGSlY399zePqL5vWV4/MTD3/+webhMT8vv33DiJ60Yow5bq27ZfTY9RqzXmOLAl+WqJeXHDo9f3lh6jrCPBOX5Tv4U2B60fgRM45MccHPC26esMGjvUc5hzIWIQRTCF8D08EGTdM0nE4Vm01BU3v2u8AyXwC8Ad5Tjlf3PwV27sy2ain3J4rDiapWDP14s1af7TIDh3FgngOHU00res5tTd93VFXNMAycuzN1XdO2DV13Rmt9e4fCi1z0o9CUVcd+t6OqKpRS+aNlWT7EzZTjEmlNy7zMHDpFIwY60aG0YprC/0/5GrhrJcWxoSwL9rs9u+2Oc9d92NHXosRI70UGzsuC9hPaGLxzSCkJV1b5ytQZOM9zLrLRGusco/c455im6cv0PgUaYy5hLeM4ZqD3F9ssy3uaH1O+vr/+aU5ZBs1gHZtjzdN6zeGwpW1PVO2JEHzCvu/1WpafZnC3zAti7FnignUj5X7P6vGJ1WpHUTQoBcZEtI5ICUpFrI0oDc4FYvzY33fJV/3YE4lvLRaZZ/LHxqTzBZCgCaYzKKINeD//CEwXKijCErJpv17xdsrJFkpJrLU5ktrGWKyxWajkAK00UirGcbqy0CeiZNsYjRgU3aAQ/cAwSIToM9hZ9x0epnAFumHsYZQ87lu2jaTYaI5HTVH2tOcp1yoJk2qa6pdqGsJyu5fPrmO1qynrnnWpOB4lr68dTeNRMiL7BSEuoqQI0/xDK77HBWg7HrY1RdWzLgzbreL5VVKLSK+gk9AJkAMIAdP0uXhZZR9GTkLRa0fbjkg1c94J+ucDetui1ydk69AmYvScp1ByRKr/v8faXRoCVXWiSQO0rmnqiqY7Ix9XDL//hn64R//6C7os6OSAlAND39O/xSBlnptpECfH/DMc3nrZe5/VndMsdA6svcR/8ij8DaXHTfWBMdiGAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;jpa4&quot; title=&quot;jpa4&quot; src=&quot;/static/f7e9e33aeffdc2e4d8b2694c091fa810/3e20f/jpa4.png&quot; srcset=&quot;/static/f7e9e33aeffdc2e4d8b2694c091fa810/103f2/jpa4.png 165w,
/static/f7e9e33aeffdc2e4d8b2694c091fa810/748ba/jpa4.png 330w,
/static/f7e9e33aeffdc2e4d8b2694c091fa810/3e20f/jpa4.png 529w&quot; sizes=&quot;(max-width: 529px) 100vw, 529px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hibernate 5 버전의 전&lt;/li&gt;
&lt;/ul&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 550px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 84.84848484848484%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACWklEQVQ4y42Ua2+bMBiF8///1LRq0r5Oqtqu60ICBnM1F9uYS4BnirdmbZdttXQwRuLhHL+v2VlreNp/R2Y5Ik1Jsox+HHnv2Lbt1Xp36lra21u6hwfa+3u6uzumOGZZll9aWdf1sn57/wx95u7mcWQylslahrOM8er7HqMNo3OcU3SdRmuD1tqrqVt65/4Eni967gnKFpnnpGmKLCqyPKfuLJ2bmE/L+yOzQeVq7uOcQxgShiGHY8j+GJKWFUVjLsC3L/929tLhBvXQEhQ1IpEkSYLIK6IkRZUlzrkL6Cfgtd5+yAOVa3hISsJIeIfHMCISglR1yNoyTKerDq+N3bauFLpinysiEXuHUVoQRAmqyH1RLrD3ATdKq3hMK0IRI4TwcROZkqmOtHnt8F9xLw5LUxHkijiJkVIQy4SjEKhaYVzPxvpchpcluerYA3NdcicyvoUZ34OcY1TwFGQkcU7TOMYBhmHjfIDmeWM5nTxru+pwWams4lDWZMohs5kiH0ikQ6mJtoOmhrbd0Bqs3ZjG8bKnPv6L7fDATBd8CSWPQvEUtERhzf5QI1NN3Sx07eaBxmw4tzKOw9UW8sAzXo+GffHTYSJnsnRAJANVNdM0eJetBmPBnWMvp79XeRxHjNY412ONxtreN7M5n2f/zGA/f8bcfMTc3Hh1H29oP3zAfvqEVQpjLbrr/LxrdcchjJCpJI4T34e+F6PIz1JK5LcnxONXrzqOqaKILAioowhVlKiqplQVpdbs1m1jXBbOTqdpYpon/6cZhoHBOeZ5xo0T03JimKb/NvYPMGUf8W3FuK8AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;jpa5&quot; title=&quot;jpa5&quot; src=&quot;/static/a6de903af04164326cbd4ec45c471226/8c3ad/jpa5.png&quot; srcset=&quot;/static/a6de903af04164326cbd4ec45c471226/103f2/jpa5.png 165w,
/static/a6de903af04164326cbd4ec45c471226/748ba/jpa5.png 330w,
/static/a6de903af04164326cbd4ec45c471226/8c3ad/jpa5.png 550w&quot; sizes=&quot;(max-width: 550px) 100vw, 550px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;
&lt;ul&gt;
&lt;li&gt;Hibernate 5 버전의 후&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;결론 - GenerationType.IDENTITY 를 쓰자&lt;/strong&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 608px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 93.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACk0lEQVQ4y5WUy3LbNhiF9RRdtqZlS8QdJHgVJTvpbTKTdTaV3GTRRaYzLRU/Snfty34ZgJRs5zJ1FmeIHwQOzvl5wMV///7D/Yc/ub+/ZxyPjOMHxnFkHP/meDzO4wmx/j8s3r9/g1Lf4f0SIS6Q4geklEhluL5eobRBKY2QCrFWqNyQrwRZln0Ri+Nfv9OEJX3jqIKjbipCCHhfYK3Fe5/gnMdah7MuzRtjvojFH2/vWC8zgtWU1lJWXdoo8hwhREKexlO9loI8QSKUQiU3CjVj8dv+DmsvqOt4gsCaFdZqXFToHMZYiqJMdVT9k1T8Ig2/5pIqHjSTngkP+zsKn/HiVrPblQxDSVUXtENP3TaUIRCqmjLEVlS81oZXyvFaKPp8Tf4Z4eGAWmfcNJq2qWm6LdZojFUoPS062U32o1UpEF+zHAlXq4xQacpysqWNxHiNtgrrLVrrJ5vOOJE9Vrg/HDAi47bTdG1N2w9UoaatO9qqxXuXFsrTJjkTzPj0oEnhdUZVapyzczzi8yEeJzL5SMnXsNjvD1iV8eOgGTYt25uXhKqi63rapqEoi2cRPVF4fZURiklh6qHWkzptk8VvVmhUxu1G0/ct/WZHqAJVXaVb8S3qHnp4lVEXBqNVCnGE1Q4T77DIp7stxTk6pxjJR+NTnRR6k/FiZwjBoqJdZ7He4YuCogzpQ0XEcPuiTEGP79JcDH0Z5tvkZ4XLjCEY2lDQNVuGbkfb9Gy2N9y+/Jlhu6M4kftiJi5SEuJcUZbnAxLh9xcZfanZVp5NfUNfDdShoes3ibSp67NlKR6sx1aIJ7VgcXc4sFxeEbwhOIO3008hRufcKyme/XEWb9+94/LyEq1Nup9yRiT6dPFzYvMR6yFeqq9ATjUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;jpa6&quot; title=&quot;jpa6&quot; src=&quot;/static/a48ed82c20f0f393ee2d129de5d69f3e/5db90/jpa6.png&quot; srcset=&quot;/static/a48ed82c20f0f393ee2d129de5d69f3e/103f2/jpa6.png 165w,
/static/a48ed82c20f0f393ee2d129de5d69f3e/748ba/jpa6.png 330w,
/static/a48ed82c20f0f393ee2d129de5d69f3e/5db90/jpa6.png 608w&quot; sizes=&quot;(max-width: 608px) 100vw, 608px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Entity
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 21.21212121212121%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA30lEQVQY02WPQY9DYBiEXUq5+LCUJuKwabPHvW1ppCyKOBARF//Cb/C/n40vaS97mMw7b2YmGWXbNrquY55npmmSvKPve+q6pmmaf3j9n01DtXPb8ltVLMuCMgwDhmEghEBVVcme56HrOpqmSe26LrZt4ziOvIPzGWGafPo+oRB8HI/YhwNflwvKOI5YloXv+5imKYNhGMrgqywIgndhFEXYrotvGDw8j28h+DmdiB2Hx/WKsq4raZrKGUVRkGUZVVW9seuyLKUnjmPpy/OcNElo05QySXje75S3G/Mw8Acj7n1FWGFrBQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;jpa7&quot; title=&quot;jpa7&quot; src=&quot;/static/fc55efefa8e1d3299812a5ae2ab6a1a9/6d370/jpa7.png&quot; srcset=&quot;/static/fc55efefa8e1d3299812a5ae2ab6a1a9/103f2/jpa7.png 165w,
/static/fc55efefa8e1d3299812a5ae2ab6a1a9/748ba/jpa7.png 330w,
/static/fc55efefa8e1d3299812a5ae2ab6a1a9/6d370/jpa7.png 590w&quot; sizes=&quot;(max-width: 590px) 100vw, 590px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;테이블 스키마
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; &quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 15.151515151515152%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAb0lEQVQI13XK2wrDMAwD0Pz/N6ahb2MXiGs3I4lja2QwWFcmOC+SggNQc9SuaK2h9Y6qA6NX2Bhw94OZ3+5bICLcbw8QbciZ3ihvEBaITPvB/DGf+49QrxeUGCFxQUkJJS14rivMHGZ2wsxQ1b/7Cwyq6Uk+2dBQAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;jpa8&quot; title=&quot;jpa8&quot; src=&quot;/static/a23f541df1743d917574f6f0cbc7f759/7c811/jpa8.png&quot; srcset=&quot;/static/a23f541df1743d917574f6f0cbc7f759/103f2/jpa8.png 165w,
/static/a23f541df1743d917574f6f0cbc7f759/748ba/jpa8.png 330w,
/static/a23f541df1743d917574f6f0cbc7f759/7c811/jpa8.png 660w,
/static/a23f541df1743d917574f6f0cbc7f759/bf436/jpa8.png 745w&quot; sizes=&quot;(max-width: 660px) 100vw, 660px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;insert 결과&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</content:encoded><author>a_l_b_bloomer@naver.com</author></item></channel></rss>